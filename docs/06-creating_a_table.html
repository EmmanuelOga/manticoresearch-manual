<head>
    <meta charset="UTF-8">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=PT+Sans:ital,wght@0,400;0,700;1,400;1,700&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="chapter.css" />
    <link rel="stylesheet" href="pygments.css" />

    <title>Creating a table - Manticore Search 6.2.12 (Aug 23, 2023)</title>
</head>

<body>
    
    <section class="chapter-section" id="toc-06-creating_a_table">
        <a class="chapter-link" href="#toc-06-creating_a_table"> ¶ 6</a>

        
        <h1 id="creating-a-table">Creating a table</h1>
<!-- proofread -->
        
    </section>
    
    <section class="chapter-section" id="toc-06.01-data_types">
        <a class="chapter-link" href="#toc-06.01-data_types"> ¶ 6.1</a>

        
        <h1 id="data-types">Data types</h1>
<h2 id="full-text-fields-and-attributes">Full-text fields and attributes</h2>
<p>Manticore's data types can be split into two categories: full-text fields and attributes.</p>
<h3 id="full-text-fields">Full-text fields</h3>
<p>Full-text fields:</p>
<ul>
<li>can be indexed with natural language processing algorithms, therefore can be searched for keywords</li>
<li>cannot be used for sorting or grouping</li>
<li>original document's content can be retrieved</li>
<li>original document's content can be used for highlighting</li>
</ul>
<p>Full-text fields are represented by the data type <code>text</code>. All other data types are called "attributes".</p>
<h3 id="attributes">Attributes</h3>
<p>Attributes are non-full-text values associated with each document that can be used to perform non-full-text filtering, sorting and grouping during a search.</p>
<p>It is often desired to process full-text search results based not only on matching document ID and its rank, but also on a number of other per-document values. For example, one might need to sort news search results by date and then relevance, or search through products within a specified price range, or limit a blog search to posts made by selected users, or group results by month. To do this efficiently, Manticore enables not only full-text fields, but also additional attributes to be added to each document. These attributes can be used to filter, sort, or group full-text matches, or to search only by attributes.</p>
<p>The attributes, unlike full-text fields, are not full-text indexed. They are stored in the table, but it is not possible to search them as full-text.</p>
<!-- example attributes or fields -->

<p>A good example for attributes would be a forum posts table. Assume that only the title and content fields need to be full-text searchable - but that sometimes it is also required to limit search to a certain author or a sub-forum (i.e., search only those rows that have some specific values of author_id or forum_id); or to sort matches by post_date column; or to group matching posts by month of the post_date and calculate per-group match counts.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">forum</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">author_id</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span><span class="w"> </span><span class="n">forum_id</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span><span class="w"> </span><span class="n">post_date</span><span class="w"> </span><span class="k">timestamp</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;CREATE TABLE forum(title text, content text, author_id int, forum_id int, post_date timestamp)&quot;</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;forum&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">    &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">    &#39;content&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">    &#39;author_id&#39;=&gt;[&#39;type&#39;=&gt;&#39;int&#39;],</span>
<span class="x">    &#39;forum_id&#39;=&gt;[&#39;type&#39;=&gt;&#39;int&#39;],</span>
<span class="x">    &#39;post_date&#39;=&gt;[&#39;type&#39;=&gt;&#39;timestamp&#39;]</span>
<span class="x">]);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE forum(title text, content text, author_id int, forum_id int, post_date timestamp)&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request Javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE forum(title text, content text, author_id int, forum_id int, post_date timestamp)&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Java
</div>

<!-- request Java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE forum(title text, content text, author_id int, forum_id int, post_date timestamp)&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">Sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE forum(title text, content text, author_id int, forum_id int, post_date timestamp)&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
config
</div>

<!-- request config -->


<div class="codehilite"><pre><span></span><code><span class="na">table forum</span>
<span class="na">{</span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">    </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">forum</span>

<span class="w">    </span><span class="c1"># when configuring fields via config, they are indexed (and not stored) by default</span>
<span class="w">    </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">    </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">content</span>

<span class="w">    </span><span class="c1"># this option needs to be specified for the field to be stored</span>
<span class="w">    </span><span class="na">stored_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title, content</span>

<span class="w">    </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">author_id</span>
<span class="w">    </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">forum_id</span>
<span class="w">    </span><span class="na">rt_attr_timestamp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">post_date</span>
<span class="na">}</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<!-- example filtered query -->

<p>This example shows running a full-text query filtered by <code>author_id</code>, <code>forum_id</code> and sorted by <code>post_date</code>.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">forum</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">author_id</span><span class="o">=</span><span class="mi">123</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">forum_id</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">7</span><span class="p">)</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">post_date</span><span class="w"> </span><span class="k">desc</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/search</span>
<span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;forum&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;query&quot;</span><span class="p">:</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;match_all&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">    </span><span class="nt">&quot;bool&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;must&quot;</span><span class="p">:</span>
<span class="w">      </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;equals&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;author_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;in&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;forum_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">7</span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;sort&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;post_date&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;desc&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$client-&gt;search([</span>
<span class="x">        &#39;index&#39; =&gt; &#39;forum&#39;,</span>
<span class="x">        &#39;query&#39; =&gt;</span>
<span class="x">        [</span>
<span class="x">            &#39;match_all&#39; =&gt; [],</span>
<span class="x">            &#39;bool&#39; =&gt; [</span>
<span class="x">                &#39;must&#39; =&gt; [</span>
<span class="x">                    &#39;equals&#39; =&gt; [&#39;author_id&#39; =&gt; 123],</span>
<span class="x">                    &#39;in&#39; =&gt; [</span>
<span class="x">                        &#39;forum_id&#39; =&gt; [</span>
<span class="x">                            1,3,7</span>
<span class="x">                        ]</span>
<span class="x">                    ]</span>
<span class="x">                ]</span>
<span class="x">            ]</span>
<span class="x">        ],</span>
<span class="x">        &#39;sort&#39; =&gt; [</span>
<span class="x">        [&#39;post_date&#39; =&gt; &#39;desc&#39;]</span>
<span class="x">    ]</span>
<span class="x">]);</span>
</code></pre></div>




<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">searchApi</span><span class="o">.</span><span class="n">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="p">:</span><span class="s2">&quot;forum&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="p">:{</span><span class="s2">&quot;match_all&quot;</span><span class="p">:{},</span><span class="s2">&quot;bool&quot;</span><span class="p">:{</span><span class="s2">&quot;must&quot;</span><span class="p">:[{</span><span class="s2">&quot;equals&quot;</span><span class="p">:{</span><span class="s2">&quot;author_id&quot;</span><span class="p">:</span><span class="mi">123</span><span class="p">}},{</span><span class="s2">&quot;in&quot;</span><span class="p">:{</span><span class="s2">&quot;forum_id&quot;</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">7</span><span class="p">]}}]}},</span><span class="s2">&quot;sort&quot;</span><span class="p">:[{</span><span class="s2">&quot;post_date&quot;</span><span class="p">:</span><span class="s2">&quot;desc&quot;</span><span class="p">}]})</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">searchApi</span><span class="p">.</span><span class="nx">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="o">:</span><span class="s2">&quot;forum&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;match_all&quot;</span><span class="o">:</span><span class="p">{},</span><span class="s2">&quot;bool&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;must&quot;</span><span class="o">:</span><span class="p">[{</span><span class="s2">&quot;equals&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;author_id&quot;</span><span class="o">:</span><span class="mf">123</span><span class="p">}},{</span><span class="s2">&quot;in&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;forum_id&quot;</span><span class="o">:</span><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="mf">3</span><span class="p">,</span><span class="mf">7</span><span class="p">]}}]}},</span><span class="s2">&quot;sort&quot;</span><span class="o">:</span><span class="p">[{</span><span class="s2">&quot;post_date&quot;</span><span class="o">:</span><span class="s2">&quot;desc&quot;</span><span class="p">}]});</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="n">filters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">(){{</span>
<span class="w">    </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;must&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">(){{</span>
<span class="w">        </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;equals&quot;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Integer</span><span class="o">&gt;</span><span class="p">(){{</span>
<span class="w">            </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;author_id&quot;</span><span class="p">,</span><span class="mi">123</span><span class="p">);</span>
<span class="w">        </span><span class="p">}});</span>
<span class="w">        </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;in&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">(){{</span>
<span class="w">                </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;forum_id&quot;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="o">[]</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">7</span><span class="p">});</span>
<span class="w">        </span><span class="p">}});</span>
<span class="w">    </span><span class="p">}});</span>
<span class="p">}};</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">query</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;match_all&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">);</span>
<span class="n">query</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;bool&quot;</span><span class="p">,</span><span class="n">filters</span><span class="p">);</span>
<span class="n">SearchRequest</span><span class="w"> </span><span class="n">searchRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SearchRequest</span><span class="p">();</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setIndex</span><span class="p">(</span><span class="s">&quot;forum&quot;</span><span class="p">);</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setQuery</span><span class="p">(</span><span class="n">query</span><span class="p">);</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setSort</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">(){{</span>
<span class="w">    </span><span class="n">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">String</span><span class="o">&gt;</span><span class="p">(){{</span><span class="w"> </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;post_date&quot;</span><span class="p">,</span><span class="s">&quot;desc&quot;</span><span class="p">);}});</span>
<span class="p">}});</span>
<span class="n">SearchResponse</span><span class="w"> </span><span class="n">searchResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchApi</span><span class="p">.</span><span class="na">search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code><span class="n">object</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="n">new</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">match_all</span><span class="o">=</span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">};</span>
<span class="k">var</span><span class="w"> </span><span class="n">searchRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">SearchRequest</span><span class="p">(</span><span class="s2">&quot;forum&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">query</span><span class="p">);</span>
<span class="k">var</span><span class="w"> </span><span class="n">boolFilter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">BoolFilter</span><span class="p">();</span>
<span class="n">boolFilter</span><span class="o">.</span><span class="n">Must</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="nb nb-Type">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">new</span><span class="w"> </span><span class="n">EqualsFilter</span><span class="p">(</span><span class="s2">&quot;author_id&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">123</span><span class="p">),</span>
<span class="w">    </span><span class="n">new</span><span class="w"> </span><span class="n">InFilter</span><span class="p">(</span><span class="s2">&quot;forum_id&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="nb nb-Type">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">7</span><span class="p">})</span>
<span class="p">};</span>
<span class="n">searchRequest</span><span class="o">.</span><span class="n">AttrFilter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">boolFilter</span><span class="p">;</span>
<span class="n">searchRequest</span><span class="o">.</span><span class="n">Sort</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="nb nb-Type">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">SortOrder</span><span class="p">(</span><span class="s2">&quot;post_date&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">SortOrder</span><span class="o">.</span><span class="n">OrderEnum</span><span class="o">.</span><span class="n">Desc</span><span class="p">)</span><span class="w"> </span><span class="p">};</span>
<span class="k">var</span><span class="w"> </span><span class="n">searchResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchApi</span><span class="o">.</span><span class="n">Search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">);</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<h3 id="row-wise-and-columnar-attribute-storages">Row-wise and columnar attribute storages</h3>
<p>Manticore supports two types of attribute storages:</p>
<ul>
<li>row-wise - traditional storage available in Manticore Search out of the box</li>
<li>columnar - provided by <a href="https://github.com/manticoresoftware/columnar">Manticore Columnar Library</a></li>
</ul>
<p>As can be understood from their names, they store data differently. The traditional <strong>row-wise storage</strong>:</p>
<ul>
<li>stores attributes uncompressed</li>
<li>all attributes of the same document are stored in one row close to each other</li>
<li>rows are stored one by one</li>
<li>accessing attributes is basically done by just multiplying the row ID by the stride (length of a single vector) and getting the requested attribute from the calculated memory location. It gives very low random access latency.</li>
<li>attributes have to be in memory to get acceptable performance, otherwise due to the row-wise nature of the storage Manticore may have to read from disk too much unneeded data which is in many cases suboptimal.</li>
</ul>
<p>With <strong>the columnar storage</strong>:</p>
<ul>
<li>each attribute is stored independently of all other attributes in its separate "column"</li>
<li>storage is split into blocks of 65536 entries</li>
<li>the blocks are stored compressed. This often allows storing just a few distinct values instead of storing all of them like in the row-wise storage. High compression ratio allows reading from disk faster and makes the memory requirement much lower</li>
<li>when data is indexed, storage scheme is selected for each block independently. For example, if all values in a block are the same, it gets "const" storage and only one value is stored for the whole block. If there are less than 256 unique values per block, it gets "table" storage and stores indexes to a table of values instead of the values themselves</li>
<li>search in a block can be early rejected if it's clear the requested value is not present in the block.</li>
</ul>
<p>The columnar storage was designed to handle large data volume that does not fit into RAM, so the recommendations are:</p>
<ul>
<li>if you have enough memory for all your attributes you will benefit from the row-wise storage</li>
<li>otherwise, the columnar storage can still give you decent performance with a much lower memory footprint which will allow you to store much more documents in your table</li>
</ul>
<h3 id="how-to-switch-between-the-storages">How to switch between the storages</h3>
<p>The traditional row-wise storage is the default, so if you want everything to be stored in a row-wise fashion, you don't need to do anything when you create a table.</p>
<p>To enable the columnar storage you need to:</p>
<ul>
<li>specify <code>engine='columnar'</code> in <a href="../06-creating_a_table.html#creating-a-real-time-table-online-via-create-table">CREATE TABLE</a> to make all attributes of the table columnar. Then, if you want to keep a specific attribute row-wise, you need to add <code>engine='rowwise'</code> when you declare it. For example:</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">tbl</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="k">type</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="w"> </span><span class="n">engine</span><span class="o">=</span><span class="s1">&#39;rowwise&#39;</span><span class="p">)</span><span class="w"> </span><span class="n">engine</span><span class="o">=</span><span class="s1">&#39;columnar&#39;</span>
</code></pre></div>

<ul>
<li>specify <code>engine='columnar'</code> for a specific attribute in <code>CREATE TABLE</code> to make it columnar. For example:</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">tbl</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="k">type</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="w"> </span><span class="n">engine</span><span class="o">=</span><span class="s1">&#39;columnar&#39;</span><span class="p">);</span>
</code></pre></div>

<p>or</p>
<div class="codehilite"><pre><span></span><code><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">tbl</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="k">type</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="w"> </span><span class="n">engine</span><span class="o">=</span><span class="s1">&#39;columnar&#39;</span><span class="p">)</span><span class="w"> </span><span class="n">engine</span><span class="o">=</span><span class="s1">&#39;rowwise&#39;</span><span class="p">;</span>
</code></pre></div>

<ul>
<li>in the <a href="../02-read_this_first.html#real-time-mode-vs-plain-mode">plain mode</a> you need to list attributes you want to be columnar in <a href="../06-creating_a_table.html#columnar_attrs">columnar_attrs</a>.</li>
</ul>
<p>Below is the list of data types supported by Manticore Search:</p>
<h2 id="document-id">Document ID</h2>
<!-- example id -->
<p>The document identifier is a mandatory attribute, and document IDs must be <strong>unique 64-bit unsigned integers</strong>. Document IDs can be explicitly specified, but if not, they are still enabled. Document IDs cannot be updated. Note that when retrieving document IDs, they are treated as signed 64-bit integers, which means they may be negative. Use the <a href="15-functions.html#uint64%28%29">UINT64()</a> function to cast them to unsigned 64-bit integers if necessary.</p>
<!-- request Explicit ID -->

<p>When you create a table, you can specify ID explicitly, but no matter what data type you use, it will be always as said previously - a signed 64-bit integer.</p>
<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">tbl</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="nb">bigint</span><span class="p">,</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="nb">text</span><span class="p">);</span>
<span class="k">DESC</span><span class="w"> </span><span class="n">tbl</span><span class="p">;</span>
</code></pre></div>

<!-- response Explicit ID -->

<div class="codehilite"><pre><span></span><code><span class="o">+</span><span class="c1">---------+--------+----------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">Field</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">Type</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">Properties</span><span class="w">     </span><span class="o">|</span>
<span class="o">+</span><span class="c1">---------+--------+----------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="nb">bigint</span><span class="w"> </span><span class="o">|</span><span class="w">                </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nb">text</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">indexed</span><span class="w"> </span><span class="n">stored</span><span class="w"> </span><span class="o">|</span>
<span class="o">+</span><span class="c1">---------+--------+----------------+</span>
<span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>
</code></pre></div>

<!-- request Implicit ID -->

<p>You can also omit specifying ID at all, it will be enabled automatically.</p>
<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">tbl</span><span class="p">(</span><span class="n">content</span><span class="w"> </span><span class="nb">text</span><span class="p">);</span>
<span class="k">DESC</span><span class="w"> </span><span class="n">tbl</span><span class="p">;</span>
</code></pre></div>

<!-- response Implicit ID -->

<div class="codehilite"><pre><span></span><code><span class="o">+</span><span class="c1">---------+--------+----------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">Field</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">Type</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">Properties</span><span class="w">     </span><span class="o">|</span>
<span class="o">+</span><span class="c1">---------+--------+----------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="nb">bigint</span><span class="w"> </span><span class="o">|</span><span class="w">                </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nb">text</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">indexed</span><span class="w"> </span><span class="n">stored</span><span class="w"> </span><span class="o">|</span>
<span class="o">+</span><span class="c1">---------+--------+----------------+</span>
<span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>
</code></pre></div>

<!-- end -->

</div>
</div>
<h2 id="character-data-types">Character data types</h2>
<p>General syntax:</p>
<div class="codehilite"><pre><span></span><code><span class="n">string</span><span class="o">|</span><span class="nc">text</span><span class="w"> </span><span class="o">[</span><span class="n">stored|attribute</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">indexed</span><span class="o">]</span>
</code></pre></div>

<p><strong>Properties:</strong></p>
<ol>
<li><code>indexed</code> - full-text indexed (can be used in full-text queries)</li>
<li><code>stored</code> - stored in a docstore (stored on disk, not in RAM, lazy read)</li>
<li><code>attribute</code> - makes it a string attribute (can sort/group by it)</li>
</ol>
<p>Specifying at least one property overrides all the default ones (see below), i.e., if you decide to use a custom combination of properties, you need to list all the properties you want.</p>
<p><strong>No properties specified:</strong></p>
<p><code>string</code> and <code>text</code> are aliases, but if you don’t specify any properties, they by default mean different things:</p>
<ul>
<li>just <code>string</code> by default means <code>attribute</code> (see details <a href="../06-creating_a_table.html#text">below</a>).</li>
<li>just <code>text</code> by default means <code>stored</code> + <code>indexed</code> (see details <a href="../06-creating_a_table.html#string">below</a>).</li>
</ul>
<h3 id="text">Text</h3>
<!-- example working with text -->

<p>The text (just <code>text</code> or <code>text/string indexed</code>) data type forms the full-text part of the table. Text fields are indexed and can be searched for keywords.</p>
<p>Text is passed through an analyzer pipeline that converts the text to words, applies morphology transformations, etc. Eventually, a full-text table (a special data structure that enables quick searches for a keyword) gets built from that text.</p>
<p>Full-text fields can only be used in the <code>MATCH()</code> clause and cannot be used for sorting or aggregation. Words are stored in an inverted index along with references to the fields they belong to and positions in the field. This allows searching a word inside each field and using advanced operators like proximity. By default, the original text of the fields is both indexed and stored in document storage. It means that the original text can be returned with the query results and used in <a href="../13-searching.html#toc-13.07-highlighting">search result highlighting</a>.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;CREATE TABLE products(title text)&quot;</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">    &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;]</span>
<span class="x">]);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text)&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text)&#39;</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text)&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text)&quot;);
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
config
</div>

<!-- request config -->


<div class="codehilite"><pre><span></span><code><span class="na">table products</span>
<span class="na">{</span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">    </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">products</span>

<span class="w">    </span><span class="c1"># when configuring fields via config, they are indexed (and not stored) by default</span>
<span class="w">    </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>

<span class="w">    </span><span class="c1"># this option needs to be specified for the field to be stored</span>
<span class="w">    </span><span class="na">stored_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="na">}</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<!-- example working with indexed only  -->

<p>This behavior can be overridden by explicitly specifying that the text is only indexed.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="w"> </span><span class="n">indexed</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;CREATE TABLE products(title text indexed)&quot;</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">    &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;,&#39;options&#39;=&gt;[&#39;indexed&#39;]]</span>
<span class="x">]);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text indexed)&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text indexed)&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text indexed)&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text indexed)&quot;);
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
config
</div>

<!-- request config -->


<div class="codehilite"><pre><span></span><code><span class="na">table products</span>
<span class="na">{</span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">    </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">products</span>

<span class="w">    </span><span class="c1"># when configuring fields via config, they are indexed (and not stored) by default</span>
<span class="w">    </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="na">}</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<!-- example for field naming  -->

<p>Fields are named, and you can limit your searches to a single field (e.g. search through "title" only) or a subset of fields (e.g. "title" and "abstract" only). You can have up to 256 full-text fields.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="k">match</span><span class="p">(</span><span class="s1">&#39;@title first&#39;</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/search</span>
<span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;products&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;query&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;match&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;first&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>





<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index-&gt;setName(&#39;products&#39;)-&gt;search(&#39;@title&#39;)-&gt;get();</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">searchApi</span><span class="o">.</span><span class="n">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="p">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="p">:{</span><span class="s2">&quot;match&quot;</span><span class="p">:{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span><span class="s2">&quot;first&quot;</span><span class="p">}}})</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">searchApi</span><span class="p">.</span><span class="nx">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="o">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;match&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="o">:</span><span class="s2">&quot;first&quot;</span><span class="p">}}});</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text indexed)&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text indexed)&quot;);
</code></pre></div>



<!-- end -->

</div>

</div>

<h3 id="string">String</h3>
<!-- example for string attributes  -->

<p>Unlike full-text fields, string attributes (just <code>string</code> or <code>string/text attribute</code>) are stored as they are received and cannot be used in full-text searches. Instead, they are returned in results, can be used in the <code>WHERE</code> clause for comparison filtering or <code>REGEX</code>, and can be used for sorting and aggregation. In general, it's not recommended to store large texts in string attributes, but use string attributes for metadata like names, titles, tags, keys.</p>
<p>If you want to also index the string attribute, you can specify both as <code>string attribute indexed</code>. It will allow full-text searching and works as an attribute.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="n">string</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;CREATE TABLE products(title text, keys string)&quot;</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">    &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">    &#39;keys&#39;=&gt;[&#39;type&#39;=&gt;&#39;string&#39;]</span>
<span class="x">]);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, keys string)&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, keys string)&#39;</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, keys string)&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, keys string)&quot;);
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
config
</div>

<!-- request config -->


<div class="codehilite"><pre><span></span><code><span class="na">table products</span>
<span class="na">{</span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">    </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">products</span>

<span class="w">    </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">    </span><span class="na">stored_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>

<span class="w">    </span><span class="na">rt_attr_string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">keys</span>
<span class="na">}</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<details>
<summary>More</summary>

<!-- example string field -->

You can create a full-text field that is also stored as a string attribute. This approach creates a full-text field and a string attribute that have the same name. Note that you can't add a `stored` property to store the data as a string attribute and in the document storage at the same time.

<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->
`string attribute indexed` means that we're working with a string data type that is stored as an attribute and indexed as a full-text field.


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">title</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="n">attribute</span><span class="w"> </span><span class="n">indexed</span><span class="w"> </span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;CREATE TABLE products ( title string attribute indexed )&quot;</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">    &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;string&#39;,&#39;options&#39;=&gt;[&#39;indexed&#39;,&#39;attribute&#39;]]</span>
<span class="x">]);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products ( title string attribute indexed )&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products ( title string attribute indexed )&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products ( title string attribute indexed )&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products ( title string attribute indexed )&quot;);
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
config
</div>

<!-- request config -->


<div class="codehilite"><pre><span></span><code><span class="na">table products</span>
<span class="na">{</span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">    </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">products</span>

<span class="w">    </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">    </span><span class="na">rt_attr_string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="na">}</span>
</code></pre></div>



<!-- end -->

</div>

</div>

</details>

<h2 id="integer">Integer</h2>
<!-- example for integers  -->

<p>Integer type allows storing 32 bit <strong>unsigned</strong> integer values.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">int</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;CREATE TABLE products(title text, price int)&quot;</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">    &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">    &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;int&#39;]</span>
<span class="x">]);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price int)&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price int)&#39;</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price int)&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price int)&quot;);
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
config
</div>

<!-- request config -->


<div class="codehilite"><pre><span></span><code><span class="na">table products</span>
<span class="na">{</span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">    </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">products</span>

<span class="w">    </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">    </span><span class="na">stored_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>

<span class="w">    </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">type</span>
<span class="na">}</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<!-- example for bit integers  -->

<p>Integers can be stored in shorter sizes than 32-bit by specifying a bit count. For example, if we want to store a numeric value which we know is not going to be bigger than 8, the type can be defined as <code>bit(3)</code>. Bitcount integers perform slower than the full-size ones, but they require less RAM. They are saved in 32-bit chunks, so in order to save space, they should be grouped at the end of attribute definitions (otherwise a bitcount integer between 2 full-size integers will occupy 32 bits as well).</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">flags</span><span class="w"> </span><span class="nb">bit</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span><span class="w"> </span><span class="n">tags</span><span class="w"> </span><span class="nb">bit</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;CREATE TABLE products(title text, flags bit(3), tags bit(2))&quot;</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">    &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">    &#39;flags&#39;=&gt;[&#39;type&#39;=&gt;&#39;bit(3)&#39;],</span>
<span class="x">    &#39;tags&#39;=&gt;[&#39;type&#39;=&gt;&#39;bit(2)&#39;]</span>
<span class="x">]);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, flags bit(3), tags bit(2) &#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, flags bit(3), tags bit(2) &#39;</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, flags bit(3), tags bit(2)&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, flags bit(3), tags bit(2)&quot;);
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
config
</div>

<!-- request config -->


<div class="codehilite"><pre><span></span><code><span class="na">table products</span>
<span class="na">{</span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">    </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">products</span>

<span class="w">    </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">    </span><span class="na">stored_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>

<span class="w">    </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">flags:3</span>
<span class="w">    </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tags:2</span>
<span class="na">}</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<h2 id="big-integer">Big Integer</h2>
<!-- example for bigints  -->

<p>Big integers (bigint) are 64-bit wide <strong>signed</strong> integers.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">bigint</span><span class="w"> </span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;CREATE TABLE products(title text, price bigint)&quot;</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">    &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">    &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;bigint&#39;]</span>
<span class="x">]);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price bigint )&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price bigint )&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price bigint )&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price bigint )&quot;);
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
config
</div>

<!-- request config -->


<div class="codehilite"><pre><span></span><code><span class="na">table products</span>
<span class="na">{</span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">    </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">products</span>

<span class="w">    </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">    </span><span class="na">stored_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>

<span class="w">    </span><span class="na">rt_attr_bigint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">type</span>
<span class="na">}</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<h2 id="boolean">Boolean</h2>
<!-- example for boolean  -->

<p>Declares a boolean attribute. It's equivalent to an integer attribute with bit count of 1.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">sold</span><span class="w"> </span><span class="n">bool</span><span class="w"> </span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;CREATE TABLE products(title text, sold bool)&quot;</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">    &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">    &#39;sold&#39;=&gt;[&#39;type&#39;=&gt;&#39;bool&#39;]</span>
<span class="x">]);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, sold bool )&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, sold bool )&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, sold bool )&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, sold bool )&quot;);
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
config
</div>

<!-- request config -->


<div class="codehilite"><pre><span></span><code><span class="na">table products</span>
<span class="na">{</span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">    </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">products</span>

<span class="w">    </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">    </span><span class="na">stored_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>

<span class="w">    </span><span class="na">rt_attr_bool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">sold</span>
<span class="na">}</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<h2 id="timestamps">Timestamps</h2>
<!-- example for timestamps  -->

<p>Timestamp type represents unix timestamps which is stored as a 32-bit integer. The difference is that <a href="../15-functions.html#toc-15.05-date_and_time_functions">time and date</a> functions are available for the timestamp type.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="nb">date</span><span class="w"> </span><span class="k">timestamp</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;CREATE TABLE products(title text, date timestamp)&quot;</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">    &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">    &#39;date&#39;=&gt;[&#39;type&#39;=&gt;&#39;timestamp&#39;]</span>
<span class="x">]);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, date timestamp)&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, date timestamp)&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, date timestamp)&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, date timestamp)&quot;);
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
config
</div>

<!-- request config -->


<div class="codehilite"><pre><span></span><code><span class="na">table products</span>
<span class="na">{</span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">    </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">products</span>

<span class="w">    </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">    </span><span class="na">stored_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>

<span class="w">    </span><span class="na">rt_attr_timestamp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">date</span>
<span class="na">}</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<h2 id="float">Float</h2>
<!-- example for float -->
<p>Real numbers are stored as 32-bit IEEE 754 single precision floats.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">coeff</span><span class="w"> </span><span class="nb">float</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;CREATE TABLE products(title text, coeff float)&quot;</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">    &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">    &#39;coeff&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">]);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, coeff float)&#39;</span><span class="p">)</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, coeff float)&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, coeff float)&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, coeff float)&quot;);
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
config
</div>

<!-- request config -->


<div class="codehilite"><pre><span></span><code><span class="na">table products</span>
<span class="na">{</span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">    </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">products</span>

<span class="w">    </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">    </span><span class="na">stored_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>

<span class="w">    </span><span class="na">rt_attr_float</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">coeff</span>
<span class="na">}</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<!-- example for eps comparison -->

<p>Unlike integer types, comparing two floating-point numbers for equality is not recommended due to potential rounding errors. A more reliable approach is to use a near-equal comparison, by checking the absolute error margin.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="k">abs</span><span class="p">(</span><span class="n">a</span><span class="o">-</span><span class="n">b</span><span class="p">)</span><span class="o">&lt;=</span><span class="mi">0</span><span class="p">.</span><span class="mi">00001</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">products</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->

<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/search</span>
<span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;products&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;query&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;match_all&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;expressions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;eps&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;abs(a-b)&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index-&gt;setName(&#39;products&#39;)-&gt;search(&#39;&#39;)-&gt;expression(&#39;eps&#39;,&#39;abs(a-b)&#39;)-&gt;get();</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">searchApi</span><span class="o">.</span><span class="n">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="p">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="p">:{</span><span class="s2">&quot;match_all&quot;</span><span class="p">:{}},</span><span class="s2">&quot;expressions&quot;</span><span class="p">:{</span><span class="s2">&quot;eps&quot;</span><span class="p">:</span><span class="s2">&quot;abs(a-b)&quot;</span><span class="p">}})</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">searchApi</span><span class="p">.</span><span class="nx">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="o">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;match_all&quot;</span><span class="o">:</span><span class="p">{}}},</span><span class="s2">&quot;expressions&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;eps&quot;</span><span class="o">:</span><span class="s2">&quot;abs(a-b)&quot;</span><span class="p">}});</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">searchRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SearchRequest</span><span class="p">();</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setIndex</span><span class="p">(</span><span class="s">&quot;forum&quot;</span><span class="p">);</span>
<span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">query</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;match_all&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">);</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setQuery</span><span class="p">(</span><span class="n">query</span><span class="p">);</span>
<span class="n">Object</span><span class="w"> </span><span class="n">expressions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">(){{</span>
<span class="w">    </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;ebs&quot;</span><span class="p">,</span><span class="s">&quot;abs(a-b)&quot;</span><span class="p">);</span>
<span class="p">}};</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setExpressions</span><span class="p">(</span><span class="n">expressions</span><span class="p">);</span>
<span class="n">searchResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchApi</span><span class="p">.</span><span class="na">search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code><span class="n">object</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="n">new</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">match_all</span><span class="o">=</span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">};</span>
<span class="k">var</span><span class="w"> </span><span class="n">searchRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">SearchRequest</span><span class="p">(</span><span class="s2">&quot;forum&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">query</span><span class="p">);</span>
<span class="n">searchRequest</span><span class="o">.</span><span class="n">Expressions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="nb nb-Type">Object</span><span class="o">&gt;</span><span class="p">{</span>
<span class="w">    </span><span class="n">new</span><span class="w"> </span><span class="nb nb-Type">Dictionary</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">{</span><span class="s2">&quot;ebs&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;abs(a-b)&quot;</span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="p">};</span>
<span class="k">var</span><span class="w"> </span><span class="n">searchResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchApi</span><span class="o">.</span><span class="n">Search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">);</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<!-- example for float mul -->

<p>Another alternative, which can also be used to perform <code>IN(attr,val1,val2,val3)</code> is to compare floats as integers by choosing a multiplier factor and convert the floats to integers in operations. The following example illustrates modifying <code>IN(attr,2.0,2.5,3.5)</code> to work with integer values.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="k">in</span><span class="p">(</span><span class="n">ceil</span><span class="p">(</span><span class="n">attr</span><span class="o">*</span><span class="mi">100</span><span class="p">),</span><span class="mi">200</span><span class="p">,</span><span class="mi">250</span><span class="p">,</span><span class="mi">350</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">products</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->

<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/search</span>
<span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;products&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;query&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;match_all&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;expressions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;inc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;in(ceil(attr*100),200,250,350)&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index-&gt;setName(&#39;products&#39;)-&gt;search(&#39;&#39;)-&gt;expression(&#39;inc&#39;,&#39;in(ceil(attr*100),200,250,350)&#39;)-&gt;get();</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">searchApi</span><span class="o">.</span><span class="n">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="p">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="p">:{</span><span class="s2">&quot;match_all&quot;</span><span class="p">:{}}},</span><span class="s2">&quot;expressions&quot;</span><span class="p">:{</span><span class="s2">&quot;inc&quot;</span><span class="p">:</span><span class="s2">&quot;in(ceil(attr*100),200,250,350)&quot;</span><span class="p">}})</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">searchApi</span><span class="p">.</span><span class="nx">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="o">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;match_all&quot;</span><span class="o">:</span><span class="p">{}}},</span><span class="s2">&quot;expressions&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;inc&quot;</span><span class="o">:</span><span class="s2">&quot;in(ceil(attr*100),200,250,350)&quot;</span><span class="p">}});</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">searchRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SearchRequest</span><span class="p">();</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setIndex</span><span class="p">(</span><span class="s">&quot;forum&quot;</span><span class="p">);</span>
<span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">query</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;match_all&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">);</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setQuery</span><span class="p">(</span><span class="n">query</span><span class="p">);</span>
<span class="n">Object</span><span class="w"> </span><span class="n">expressions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">(){{</span>
<span class="w">    </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;inc&quot;</span><span class="p">,</span><span class="s">&quot;in(ceil(attr*100),200,250,350)&quot;</span><span class="p">);</span>
<span class="p">}};</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setExpressions</span><span class="p">(</span><span class="n">expressions</span><span class="p">);</span>
<span class="n">searchResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchApi</span><span class="p">.</span><span class="na">search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code><span class="n">object</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="n">new</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">match_all</span><span class="o">=</span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">};</span>
<span class="k">var</span><span class="w"> </span><span class="n">searchRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">SearchRequest</span><span class="p">(</span><span class="s2">&quot;forum&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">query</span><span class="p">);</span>
<span class="n">searchRequest</span><span class="o">.</span><span class="n">Expressions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="nb nb-Type">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">new</span><span class="w"> </span><span class="nb nb-Type">Dictionary</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">{</span><span class="s2">&quot;ebs&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;in(ceil(attr*100),200,250,350)&quot;</span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="p">};</span>
<span class="k">var</span><span class="w"> </span><span class="n">searchResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchApi</span><span class="o">.</span><span class="n">Search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">);</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h2 id="json">JSON</h2>
<!-- example for creating json -->

<p>This data type allows storing JSON objects, which is useful for storing schema-less data. However, it is not supported by columnar storage. However, it can be stored in traditional storage, as it's possible to combine both storage types in the same table.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="k">data</span><span class="w"> </span><span class="n">json</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;CREATE TABLE products(title text, data json)&quot;</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">    &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">    &#39;data&#39;=&gt;[&#39;type&#39;=&gt;&#39;json&#39;]</span>
<span class="x">]);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, data json)&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, data json)&#39;</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="err">&#39;</span><span class="n">CREATE</span><span class="w"> </span><span class="n">TABLE</span><span class="w"> </span><span class="nf">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="n">text</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">json</span><span class="p">)</span><span class="err">&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql&#39;CREATE TABLE products(title text, data json)&#39;);
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
config
</div>

<!-- request config -->


<div class="codehilite"><pre><span></span><code><span class="na">table products</span>
<span class="na">{</span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">    </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">products</span>

<span class="w">    </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">    </span><span class="na">stored_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>

<span class="w">    </span><span class="na">rt_attr_json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">data</span>
<span class="na">}</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<!-- example for INDEXOF() json -->

<p>JSON properties can be used in most operations. There are also special functions such as <a href="../15-functions.html#all%28%29">ALL()</a>, <a href="../15-functions.html#any%28%29">ANY()</a>, <a href="../15-functions.html#greatest%28%29">GREATEST()</a>, <a href="../15-functions.html#least%28%29">LEAST()</a> and <a href="../15-functions.html#indexof%28%29">INDEXOF()</a> that allow traversal of property arrays.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="n">indexof</span><span class="p">(</span><span class="n">x</span><span class="o">&gt;</span><span class="mi">2</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">data</span><span class="p">.</span><span class="n">intarray</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">products</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/search</span>
<span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;products&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;query&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;match_all&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;expressions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;idx&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;indexof(x&gt;2 for x in data.intarray)&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index-&gt;setName(&#39;products&#39;)-&gt;search(&#39;&#39;)-&gt;expression(&#39;idx&#39;,&#39;indexof(x&gt;2 for x in data.intarray)&#39;)-&gt;get();</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">searchApi</span><span class="o">.</span><span class="n">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="p">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="p">:{</span><span class="s2">&quot;match_all&quot;</span><span class="p">:{}}},</span><span class="s2">&quot;expressions&quot;</span><span class="p">:{</span><span class="s2">&quot;idx&quot;</span><span class="p">:</span><span class="s2">&quot;indexof(x&gt;2 for x in data.intarray)&quot;</span><span class="p">}})</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">searchApi</span><span class="p">.</span><span class="nx">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="o">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;match_all&quot;</span><span class="o">:</span><span class="p">{}}},</span><span class="s2">&quot;expressions&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;idx&quot;</span><span class="o">:</span><span class="s2">&quot;indexof(x&gt;2 for x in data.intarray)&quot;</span><span class="p">}});</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">searchRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SearchRequest</span><span class="p">();</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setIndex</span><span class="p">(</span><span class="s">&quot;forum&quot;</span><span class="p">);</span>
<span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">query</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;match_all&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">);</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setQuery</span><span class="p">(</span><span class="n">query</span><span class="p">);</span>
<span class="n">Object</span><span class="w"> </span><span class="n">expressions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">(){{</span>
<span class="w">    </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;idx&quot;</span><span class="p">,</span><span class="s">&quot;indexof(x&gt;2 for x in data.intarray)&quot;</span><span class="p">);</span>
<span class="p">}};</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setExpressions</span><span class="p">(</span><span class="n">expressions</span><span class="p">);</span>
<span class="n">searchResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchApi</span><span class="p">.</span><span class="na">search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code><span class="n">object</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="n">new</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">match_all</span><span class="o">=</span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">};</span>
<span class="k">var</span><span class="w"> </span><span class="n">searchRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">SearchRequest</span><span class="p">(</span><span class="s2">&quot;forum&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">query</span><span class="p">);</span>
<span class="n">searchRequest</span><span class="o">.</span><span class="n">Expressions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="nb nb-Type">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">new</span><span class="w"> </span><span class="nb nb-Type">Dictionary</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">{</span><span class="s2">&quot;idx&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;indexof(x&gt;2 for x in data.intarray)&quot;</span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="p">};</span>
<span class="k">var</span><span class="w"> </span><span class="n">searchResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchApi</span><span class="o">.</span><span class="n">Search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">);</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<!-- example for REGEX() json -->

<p>Text properties are treated the same as strings, so it's not possible to use them in full-text match expressions. However, string functions such as <a href="../15-functions.html#regex%28%29">REGEX()</a> can be used.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="n">regex</span><span class="p">(</span><span class="k">data</span><span class="p">.</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;est&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">c</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="k">c</span><span class="o">&gt;</span><span class="mi">0</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/search</span>
<span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;products&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;query&quot;</span><span class="p">:</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;match_all&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">    </span><span class="nt">&quot;range&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;c&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;gt&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;expressions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;c&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;regex(data.name, &#39;est&#39;)&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index-&gt;setName(&#39;products&#39;)-&gt;search(&#39;&#39;)-&gt;expression(&#39;idx&#39;,&quot;regex(data.name, &#39;est&#39;)&quot;)-&gt;filter(&#39;c&#39;,&#39;gt&#39;,0)-&gt;get();</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">searchApi</span><span class="o">.</span><span class="n">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="p">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="p">:{</span><span class="s2">&quot;match_all&quot;</span><span class="p">:{},</span><span class="s2">&quot;range&quot;</span><span class="p">:{</span><span class="s2">&quot;c&quot;</span><span class="p">:{</span><span class="s2">&quot;gt&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">}}}},</span><span class="s2">&quot;expressions&quot;</span><span class="p">:{</span><span class="s2">&quot;c&quot;</span><span class="p">:</span><span class="s2">&quot;regex(data.name, &#39;est&#39;)&quot;</span><span class="p">}})</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">searchApi</span><span class="p">.</span><span class="nx">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="o">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;match_all&quot;</span><span class="o">:</span><span class="p">{},</span><span class="s2">&quot;range&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;gt&quot;</span><span class="o">:</span><span class="mf">0</span><span class="p">}}}},</span><span class="s2">&quot;expressions&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="o">:</span><span class="s2">&quot;regex(data.name, &#39;est&#39;)&quot;</span><span class="p">}});</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">searchRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SearchRequest</span><span class="p">();</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setIndex</span><span class="p">(</span><span class="s">&quot;forum&quot;</span><span class="p">);</span>
<span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">query</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;match_all&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">);</span>
<span class="n">query</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;range&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">(){{</span>
<span class="w">    </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;c&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">(){{</span>
<span class="w">        </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;gt&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="p">}});</span>
<span class="p">}});</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setQuery</span><span class="p">(</span><span class="n">query</span><span class="p">);</span>
<span class="n">Object</span><span class="w"> </span><span class="n">expressions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">(){{</span>
<span class="w">    </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;idx&quot;</span><span class="p">,</span><span class="s">&quot;indexof(x&gt;2 for x in data.intarray)&quot;</span><span class="p">);</span>
<span class="p">}};</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setExpressions</span><span class="p">(</span><span class="n">expressions</span><span class="p">);</span>
<span class="n">searchResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchApi</span><span class="p">.</span><span class="na">search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code><span class="n">object</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="n">new</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">match_all</span><span class="o">=</span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">};</span>
<span class="k">var</span><span class="w"> </span><span class="n">searchRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">SearchRequest</span><span class="p">(</span><span class="s2">&quot;forum&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">query</span><span class="p">);</span>
<span class="k">var</span><span class="w"> </span><span class="n">rangeFilter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">RangeFilter</span><span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">);</span>
<span class="n">rangeFilter</span><span class="o">.</span><span class="n">Gt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="n">searchRequest</span><span class="o">.</span><span class="n">AttrFilter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rangeFilter</span><span class="p">;</span>
<span class="n">searchRequest</span><span class="o">.</span><span class="n">Expressions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="nb nb-Type">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">new</span><span class="w"> </span><span class="nb nb-Type">Dictionary</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">{</span><span class="s2">&quot;idx&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;indexof(x&gt;2 for x in data.intarray)&quot;</span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="p">};</span>
<span class="k">var</span><span class="w"> </span><span class="n">searchResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchApi</span><span class="o">.</span><span class="n">Search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">);</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<!-- example for DOUBLE() -->

<p>In the case of JSON properties, enforcing data type may be required for proper functionality in certain situations. For example, when working with float values, <a href="../15-functions.html#double%28%29">DOUBLE()</a> must be used for proper sorting.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">double</span><span class="p">(</span><span class="k">data</span><span class="p">.</span><span class="n">myfloat</span><span class="p">)</span><span class="w"> </span><span class="k">desc</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/search</span>
<span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;products&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;query&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;match_all&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;sort&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;double(data.myfloat)&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;order&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;desc&quot;</span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index-&gt;setName(&#39;products&#39;)-&gt;search(&#39;&#39;)-&gt;sort(&#39;double(data.myfloat)&#39;,&#39;desc&#39;)-&gt;get();</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">searchApi</span><span class="o">.</span><span class="n">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="p">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="p">:{</span><span class="s2">&quot;match_all&quot;</span><span class="p">:{}}},</span><span class="s2">&quot;sort&quot;</span><span class="p">:[{</span><span class="s2">&quot;double(data.myfloat)&quot;</span><span class="p">:{</span><span class="s2">&quot;order&quot;</span><span class="p">:</span><span class="s2">&quot;desc&quot;</span><span class="p">}}]})</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">searchApi</span><span class="p">.</span><span class="nx">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="o">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;match_all&quot;</span><span class="o">:</span><span class="p">{}}},</span><span class="s2">&quot;sort&quot;</span><span class="o">:</span><span class="p">[{</span><span class="s2">&quot;double(data.myfloat)&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;order&quot;</span><span class="o">:</span><span class="s2">&quot;desc&quot;</span><span class="p">}}]});</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">searchRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SearchRequest</span><span class="p">();</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setIndex</span><span class="p">(</span><span class="s">&quot;forum&quot;</span><span class="p">);</span>
<span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">query</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;match_all&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">);</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setQuery</span><span class="p">(</span><span class="n">query</span><span class="p">);</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setSort</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">(){{</span>
<span class="w">    </span><span class="n">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">String</span><span class="o">&gt;</span><span class="p">(){{</span><span class="w"> </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;double(data.myfloat)&quot;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">String</span><span class="o">&gt;</span><span class="p">(){{</span><span class="w"> </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;order&quot;</span><span class="p">,</span><span class="s">&quot;desc&quot;</span><span class="p">);}});}});</span>
<span class="p">}});</span>
<span class="n">searchResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchApi</span><span class="p">.</span><span class="na">search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code><span class="n">object</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="n">new</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">match_all</span><span class="o">=</span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">};</span>
<span class="k">var</span><span class="w"> </span><span class="n">searchRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">SearchRequest</span><span class="p">(</span><span class="s2">&quot;forum&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">query</span><span class="p">);</span>
<span class="n">searchRequest</span><span class="o">.</span><span class="n">Sort</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="nb nb-Type">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">new</span><span class="w"> </span><span class="n">SortOrder</span><span class="p">(</span><span class="s2">&quot;double(data.myfloat)&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">SortOrder</span><span class="o">.</span><span class="n">OrderEnum</span><span class="o">.</span><span class="n">Desc</span><span class="p">)</span>
<span class="p">};</span>
<span class="k">var</span><span class="w"> </span><span class="n">searchResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchApi</span><span class="o">.</span><span class="n">Search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">);</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<h2 id="float-vector">Float vector</h2>
<!-- example for creating float_vector -->

<p>Float vector attributes allow storing variable-length lists of floats. It's important to note that this concept differs from multi-valued attributes. Multi-valued attributes (MVAs) are essentially sets; they do not preserve value order, and duplicate values are not retained. In contrast, float vectors perform no additional processing on values during insertion.</p>
<p>Float vector attributes can be used in k-nearest neighbor searches; see <a href="../13-searching.html#toc-13.22-knearest_neighbor_vector_search">KNN search</a>.</p>
<p>** Currently, <code>float_vector</code> fields can only be utilized in KNN search within real-time tables and the data type is not supported in any other functions or expressions, nor is it supported in plain tables. **</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">image_vector</span><span class="w"> </span><span class="n">float_vector</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;CREATE TABLE products(title text, image_vector float_vector)&quot;</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">    &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">    &#39;image_vector&#39;=&gt;[&#39;type&#39;=&gt;&#39;float_vector&#39;]</span>
<span class="x">]);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, image_vector float_vector)&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, image_vector float_vector)&#39;</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, image_vector float_vector)&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, image_vector float_vector)&quot;);
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
config
</div>

<!-- request config -->


<div class="codehilite"><pre><span></span><code><span class="na">table products</span>
<span class="na">{</span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">    </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">products</span>

<span class="w">    </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">    </span><span class="na">stored_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>

<span class="w">    </span><span class="na">rt_attr_float_vector</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">image_vector</span>
<span class="na">}</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<h2 id="multi-value-integer-mva">Multi-value integer (MVA)</h2>
<!-- example for creating MVA32 -->

<p>Multi-value attributes allow storing variable-length lists of 32-bit unsigned integers. This can be useful for storing one-to-many numeric values, such as tags, product categories, and properties.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">product_codes</span><span class="w"> </span><span class="n">multi</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;CREATE TABLE products(title text, product_codes multi)&quot;</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">    &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">    &#39;product_codes&#39;=&gt;[&#39;type&#39;=&gt;&#39;multi&#39;]</span>
<span class="x">]);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, product_codes multi)&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, product_codes multi)&#39;</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, product_codes multi)&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, product_codes multi)&quot;);
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
config
</div>

<!-- request config -->


<div class="codehilite"><pre><span></span><code><span class="na">table products</span>
<span class="na">{</span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">    </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">products</span>

<span class="w">    </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">    </span><span class="na">stored_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>

<span class="w">    </span><span class="na">rt_attr_multi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">product_codes</span>
<span class="na">}</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<!-- example for any/all MVA -->
<p>It supports filtering and aggregation, but not sorting. Filtering can be done using a condition that requires at least one element to pass (using <a href="../15-functions.html#any%28%29">ANY()</a>) or all elements (<a href="../15-functions.html#all%28%29">ALL()</a>) to pass.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="k">any</span><span class="p">(</span><span class="n">product_codes</span><span class="p">)</span><span class="o">=</span><span class="mi">3</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/search</span>
<span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;products&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;query&quot;</span><span class="p">:</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;match_all&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">    </span><span class="nt">&quot;equals&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;any(product_codes)&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index-&gt;setName(&#39;products&#39;)-&gt;search(&#39;&#39;)-&gt;filter(&#39;any(product_codes)&#39;,&#39;equals&#39;,3)-&gt;get();</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">searchApi</span><span class="o">.</span><span class="n">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="p">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="p">:{</span><span class="s2">&quot;match_all&quot;</span><span class="p">:{},</span><span class="s2">&quot;equals&quot;</span><span class="p">:{</span><span class="s2">&quot;any(product_codes)&quot;</span><span class="p">:</span><span class="mi">3</span><span class="p">}}}})</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">searchApi</span><span class="p">.</span><span class="nx">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="o">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;match_all&quot;</span><span class="o">:</span><span class="p">{},</span><span class="s2">&quot;equals&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;any(product_codes)&quot;</span><span class="o">:</span><span class="mf">3</span><span class="p">}}}})</span><span class="err">&#39;</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">searchRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SearchRequest</span><span class="p">();</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setIndex</span><span class="p">(</span><span class="s">&quot;forum&quot;</span><span class="p">);</span>
<span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">query</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;match_all&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">);</span>
<span class="n">query</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;equals&quot;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Integer</span><span class="o">&gt;</span><span class="p">(){{</span>
<span class="w">     </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;any(product_codes)&quot;</span><span class="p">,</span><span class="mi">3</span><span class="p">);</span>
<span class="p">}});</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setQuery</span><span class="p">(</span><span class="n">query</span><span class="p">);</span>
<span class="n">searchResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchApi</span><span class="p">.</span><span class="na">search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code><span class="n">object</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="n">new</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">match_all</span><span class="o">=</span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">};</span>
<span class="k">var</span><span class="w"> </span><span class="n">searchRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">SearchRequest</span><span class="p">(</span><span class="s2">&quot;forum&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">query</span><span class="p">);</span>
<span class="n">searchRequest</span><span class="o">.</span><span class="n">AttrFilter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">EqualsFilter</span><span class="p">(</span><span class="s2">&quot;any(product_codes)&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span>
<span class="k">var</span><span class="w"> </span><span class="n">searchResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchApi</span><span class="o">.</span><span class="n">Search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">);</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<!-- example for least/greatest MVA -->

<p>Information like <a href="../15-functions.html#least%28%29">least</a> or <a href="../15-functions.html#greatest%28%29">greatest</a> element and length of the list can be extracted. An example shows ordering by the least element of a multi-value attribute.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="n">least</span><span class="p">(</span><span class="n">product_codes</span><span class="p">)</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="k">asc</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/search</span>
<span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;products&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;query&quot;</span><span class="p">:</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;match_all&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">    </span><span class="nt">&quot;sort&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;product_codes&quot;</span><span class="p">:{</span><span class="w"> </span><span class="nt">&quot;order&quot;</span><span class="p">:</span><span class="s2">&quot;asc&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;mode&quot;</span><span class="p">:</span><span class="s2">&quot;min&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index-&gt;setName(&#39;products&#39;)-&gt;search(&#39;&#39;)-&gt;sort(&#39;product_codes&#39;,&#39;asc&#39;,&#39;min&#39;)-&gt;get();</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">searchApi</span><span class="o">.</span><span class="n">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="p">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="p">:{</span><span class="s2">&quot;match_all&quot;</span><span class="p">:{},</span><span class="s2">&quot;sort&quot;</span><span class="p">:[{</span><span class="s2">&quot;product_codes&quot;</span><span class="p">:{</span><span class="s2">&quot;order&quot;</span><span class="p">:</span><span class="s2">&quot;asc&quot;</span><span class="p">,</span><span class="s2">&quot;mode&quot;</span><span class="p">:</span><span class="s2">&quot;min&quot;</span><span class="p">}}]}})</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">searchApi</span><span class="p">.</span><span class="nx">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="o">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;match_all&quot;</span><span class="o">:</span><span class="p">{},</span><span class="s2">&quot;sort&quot;</span><span class="o">:</span><span class="p">[{</span><span class="s2">&quot;product_codes&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;order&quot;</span><span class="o">:</span><span class="s2">&quot;asc&quot;</span><span class="p">,</span><span class="s2">&quot;mode&quot;</span><span class="o">:</span><span class="s2">&quot;min&quot;</span><span class="p">}}]}});</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">searchRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SearchRequest</span><span class="p">();</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setIndex</span><span class="p">(</span><span class="s">&quot;forum&quot;</span><span class="p">);</span>
<span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">query</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;match_all&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">);</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setQuery</span><span class="p">(</span><span class="n">query</span><span class="p">);</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setSort</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">(){{</span>
<span class="w">    </span><span class="n">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">String</span><span class="o">&gt;</span><span class="p">(){{</span><span class="w"> </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;product_codes&quot;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">String</span><span class="o">&gt;</span><span class="p">(){{</span><span class="w"> </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;order&quot;</span><span class="p">,</span><span class="s">&quot;asc&quot;</span><span class="p">);</span><span class="n">put</span><span class="p">(</span><span class="s">&quot;mode&quot;</span><span class="p">,</span><span class="s">&quot;min&quot;</span><span class="p">);}});}});</span>
<span class="p">}});</span>
<span class="n">searchResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchApi</span><span class="p">.</span><span class="na">search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code><span class="n">object</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="n">new</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">match_all</span><span class="o">=</span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">};</span>
<span class="k">var</span><span class="w"> </span><span class="n">searchRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">SearchRequest</span><span class="p">(</span><span class="s2">&quot;forum&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">query</span><span class="p">);</span>
<span class="n">searchRequest</span><span class="o">.</span><span class="n">Sort</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="nb nb-Type">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">new</span><span class="w"> </span><span class="n">SortMVA</span><span class="p">(</span><span class="s2">&quot;product_codes&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">SortOrder</span><span class="o">.</span><span class="n">OrderEnum</span><span class="o">.</span><span class="n">Asc</span><span class="p">,</span><span class="w"> </span><span class="n">SortMVA</span><span class="o">.</span><span class="n">ModeEnum</span><span class="o">.</span><span class="n">Min</span><span class="p">)</span>
<span class="p">};</span>
<span class="n">searchResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchApi</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">);</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<!-- example for grouping by MVA -->
<p>When grouping by a multi-value attribute, a document will contribute to as many groups as there are different values associated with that document. For instance, if a collection contains exactly one document having a 'product_codes' multi-value attribute with values 5, 7, and 11, grouping on 'product_codes' will produce 3 groups with <code>COUNT(*)</code>equal to 1 and <code>GROUPBY()</code> key values of 5, 7, and 11, respectively. Also, note that grouping by multi-value attributes may lead to duplicate documents in the result set because each document can participate in many groups.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;doc one&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
<span class="k">select</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">),</span><span class="w"> </span><span class="n">groupby</span><span class="p">()</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">product_codes</span><span class="p">;</span>
</code></pre></div>



<!-- response mysql -->


<div class="codehilite"><pre><span></span><code><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>

<span class="o">+</span><span class="c1">------+----------+-----------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">groupby</span><span class="p">()</span><span class="w"> </span><span class="o">|</span>
<span class="o">+</span><span class="c1">------+----------+-----------+</span>
<span class="o">|</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">11</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="mi">7</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="mi">5</span><span class="w"> </span><span class="o">|</span>
<span class="o">+</span><span class="c1">------+----------+-----------+</span>
<span class="mi">3</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<!-- example for MVA value order -->
<p>The order of the numbers inserted as values of multivalued attributes is not preserved. Values are stored internally as a sorted set.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">product</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;first&#39;</span><span class="p">,(</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">));</span>
<span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">products</span><span class="p">;</span>
</code></pre></div>



<!-- response mysql -->


<div class="codehilite"><pre><span></span><code><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>

<span class="o">+</span><span class="c1">------+---------------+-------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">product_codes</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">title</span><span class="w"> </span><span class="o">|</span>
<span class="o">+</span><span class="c1">------+---------------+-------+</span>
<span class="o">|</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="k">first</span><span class="w"> </span><span class="o">|</span>
<span class="o">+</span><span class="c1">------+---------------+-------+</span>
<span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/i</span><span class="kc">nsert</span>
<span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;doc&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="s2">&quot;first&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;product_codes&quot;</span><span class="p">:[</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="err">POST</span><span class="w"> </span><span class="err">/search</span>
<span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;products&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;query&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;match_all&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>



<!-- response JSON -->


<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;_index&quot;</span><span class="p">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;_id&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;created&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;result&quot;</span><span class="p">:</span><span class="s2">&quot;created&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="mi">201</span>
<span class="p">}</span>

<span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;took&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;timed_out&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;hits&quot;</span><span class="p">:{</span>
<span class="w">      </span><span class="nt">&quot;total&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;hits&quot;</span><span class="p">:[</span>
<span class="w">         </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;_id&quot;</span><span class="p">:</span><span class="s2">&quot;1&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;_score&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;_source&quot;</span><span class="p">:{</span>
<span class="w">               </span><span class="nt">&quot;product_codes&quot;</span><span class="p">:[</span>
<span class="w">                  </span><span class="mi">1</span><span class="p">,</span>
<span class="w">                  </span><span class="mi">2</span><span class="p">,</span>
<span class="w">                  </span><span class="mi">3</span><span class="p">,</span>
<span class="w">                  </span><span class="mi">4</span>
<span class="w">               </span><span class="p">],</span>
<span class="w">               </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="s2">&quot;first&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">         </span><span class="p">}</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index-&gt;addDocument([</span>
<span class="x">    &quot;title&quot;=&gt;&quot;first&quot;,</span>
<span class="x">    &quot;product_codes&quot;=&gt;[4,2,1,3]</span>
<span class="x">]);</span>
<span class="x">$index-&gt;search(&#39;&#39;)-get();</span>
</code></pre></div>



<!-- response PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">Array</span>
<span class="x">(</span>
<span class="x">    [_index] =&gt; products</span>
<span class="x">    [_id] =&gt; 1</span>
<span class="x">    [created] =&gt; 1</span>
<span class="x">    [result] =&gt; created</span>
<span class="x">    [status] =&gt; 201</span>
<span class="x">)</span>
<span class="x">Array</span>
<span class="x">(</span>
<span class="x">    [took] =&gt; 0</span>
<span class="x">    [timed_out] =&gt;</span>
<span class="x">    [hits] =&gt; Array</span>
<span class="x">        (</span>
<span class="x">            [total] =&gt; 1</span>
<span class="x">            [hits] =&gt; Array</span>
<span class="x">                (</span>
<span class="x">                    [0] =&gt; Array</span>
<span class="x">                        (</span>
<span class="x">                            [_id] =&gt; 1</span>
<span class="x">                            [_score] =&gt; 1</span>
<span class="x">                            [_source] =&gt; Array</span>
<span class="x">                                (</span>
<span class="x">                                    [product_codes] =&gt; Array</span>
<span class="x">                                        (</span>
<span class="x">                                            [0] =&gt; 1</span>
<span class="x">                                            [1] =&gt; 2</span>
<span class="x">                                            [2] =&gt; 3</span>
<span class="x">                                            [3] =&gt; 4</span>
<span class="x">                                        )</span>

<span class="x">                                    [title] =&gt; first</span>
<span class="x">                                )</span>
<span class="x">                        )</span>
<span class="x">                )</span>
<span class="x">        )</span>
<span class="x">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">indexApi</span><span class="o">.</span><span class="n">insert</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="p">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;id&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;doc&quot;</span><span class="p">:{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span><span class="s2">&quot;first&quot;</span><span class="p">,</span><span class="s2">&quot;product_codes&quot;</span><span class="p">:[</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">]}})</span>
<span class="n">searchApi</span><span class="o">.</span><span class="n">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="p">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="p">:{</span><span class="s2">&quot;match_all&quot;</span><span class="p">:{}}})</span>
</code></pre></div>


<!-- response Python -->


<div class="codehilite"><pre><span></span><code><span class="p">{</span><span class="s1">&#39;created&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;found&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
 <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="s1">&#39;products&#39;</span><span class="p">,</span>
 <span class="s1">&#39;result&#39;</span><span class="p">:</span> <span class="s1">&#39;created&#39;</span><span class="p">}</span>
<span class="p">{</span><span class="s1">&#39;hits&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;hits&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="sa">u</span><span class="s1">&#39;_id&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;1&#39;</span><span class="p">,</span>
                    <span class="sa">u</span><span class="s1">&#39;_score&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="sa">u</span><span class="s1">&#39;_source&#39;</span><span class="p">:</span> <span class="p">{</span><span class="sa">u</span><span class="s1">&#39;product_codes&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
                                 <span class="sa">u</span><span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;first&#39;</span><span class="p">}}],</span>
          <span class="s1">&#39;total&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>
 <span class="s1">&#39;profile&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;timed_out&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;took&#39;</span><span class="p">:</span> <span class="mi">29</span><span class="p">}</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="k">await</span><span class="w"> </span><span class="nx">indexApi</span><span class="p">.</span><span class="nx">insert</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="o">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="mf">1</span><span class="p">,</span><span class="s2">&quot;doc&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="o">:</span><span class="s2">&quot;first&quot;</span><span class="p">,</span><span class="s2">&quot;product_codes&quot;</span><span class="o">:</span><span class="p">[</span><span class="mf">4</span><span class="p">,</span><span class="mf">2</span><span class="p">,</span><span class="mf">1</span><span class="p">,</span><span class="mf">3</span><span class="p">]}});</span>
<span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">searchApi</span><span class="p">.</span><span class="nx">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="o">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;match_all&quot;</span><span class="o">:</span><span class="p">{}}});</span>
</code></pre></div>


<!-- response javascript -->


<div class="codehilite"><pre><span></span><code><span class="p">{</span><span class="s2">&quot;took&quot;</span><span class="o">:</span><span class="mf">0</span><span class="p">,</span><span class="s2">&quot;timed_out&quot;</span><span class="o">:</span><span class="kc">false</span><span class="p">,</span><span class="s2">&quot;hits&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;total&quot;</span><span class="o">:</span><span class="mf">1</span><span class="p">,</span><span class="s2">&quot;hits&quot;</span><span class="o">:</span><span class="p">[{</span><span class="s2">&quot;_id&quot;</span><span class="o">:</span><span class="s2">&quot;1&quot;</span><span class="p">,</span><span class="s2">&quot;_score&quot;</span><span class="o">:</span><span class="mf">1</span><span class="p">,</span><span class="s2">&quot;_source&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;product_codes&quot;</span><span class="o">:</span><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="mf">2</span><span class="p">,</span><span class="mf">3</span><span class="p">,</span><span class="mf">4</span><span class="p">],</span><span class="s2">&quot;title&quot;</span><span class="o">:</span><span class="s2">&quot;first&quot;</span><span class="p">}}]}}</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">InsertDocumentRequest</span><span class="w"> </span><span class="n">newdoc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">InsertDocumentRequest</span><span class="p">();</span>
<span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="n">doc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">(){{</span>
<span class="w">    </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;title&quot;</span><span class="p">,</span><span class="s">&quot;first&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;product_codes&quot;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="o">[]</span><span class="w"> </span><span class="p">{</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">});</span>
<span class="p">}};</span>
<span class="n">newdoc</span><span class="p">.</span><span class="na">index</span><span class="p">(</span><span class="s">&quot;products&quot;</span><span class="p">).</span><span class="na">id</span><span class="p">(</span><span class="mi">1L</span><span class="p">).</span><span class="na">setDoc</span><span class="p">(</span><span class="n">doc</span><span class="p">);</span>
<span class="n">sqlresult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">indexApi</span><span class="p">.</span><span class="na">insert</span><span class="p">(</span><span class="n">newdoc</span><span class="p">);</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">query</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;match_all&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">);</span>
<span class="n">SearchRequest</span><span class="w"> </span><span class="n">searchRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SearchRequest</span><span class="p">();</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setIndex</span><span class="p">(</span><span class="s">&quot;products&quot;</span><span class="p">);</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setQuery</span><span class="p">(</span><span class="n">query</span><span class="p">);</span>
<span class="n">SearchResponse</span><span class="w"> </span><span class="n">searchResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchApi</span><span class="p">.</span><span class="na">search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">);</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">searchResponse</span><span class="p">.</span><span class="na">toString</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>
</code></pre></div>


<!-- response java -->


<div class="codehilite"><pre><span></span><code><span class="kd">class</span> <span class="nc">SearchResponse</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">took</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">timedOut</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">    </span><span class="n">hits</span><span class="p">:</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SearchResponseHits</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">total</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="n">hits</span><span class="p">:</span><span class="w"> </span><span class="o">[</span><span class="p">{</span><span class="n">_id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">_score</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">_source</span><span class="o">=</span><span class="p">{</span><span class="n">product_codes</span><span class="o">=[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="n">title</span><span class="o">=</span><span class="n">first</span><span class="p">}}</span><span class="o">]</span>
<span class="w">        </span><span class="n">aggregations</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">profile</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span>
<span class="p">}</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code><span class="nb nb-Type">Dictionary</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="nb nb-Type">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="n">doc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="nb nb-Type">Dictionary</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="nb nb-Type">Object</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">doc</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;first&quot;</span><span class="p">);</span>
<span class="n">doc</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s2">&quot;product_codes&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="nb nb-Type">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">});</span>
<span class="n">InsertDocumentRequest</span><span class="w"> </span><span class="n">newdoc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">InsertDocumentRequest</span><span class="p">(</span><span class="n">index</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">doc</span><span class="p">:</span><span class="w"> </span><span class="n">doc</span><span class="p">);</span>
<span class="k">var</span><span class="w"> </span><span class="n">sqlresult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">indexApi</span><span class="o">.</span><span class="n">Insert</span><span class="p">(</span><span class="n">newdoc</span><span class="p">);</span>
<span class="n">object</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="n">new</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">match_all</span><span class="o">=</span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">};</span>
<span class="k">var</span><span class="w"> </span><span class="n">searchRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">SearchRequest</span><span class="p">(</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">query</span><span class="p">);</span>
<span class="k">var</span><span class="w"> </span><span class="n">searchResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchApi</span><span class="o">.</span><span class="n">Search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">);</span>
<span class="n">Console</span><span class="o">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">searchResponse</span><span class="o">.</span><span class="n">ToString</span><span class="p">())</span>
</code></pre></div>


<!-- response C# -->


<div class="codehilite"><pre><span></span><code><span class="n">class</span><span class="w"> </span><span class="n">SearchResponse</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nl">took:</span><span class="w"> </span><span class="mh">0</span>
<span class="w">    </span><span class="nl">timedOut:</span><span class="w"> </span><span class="n">false</span>
<span class="w">    </span><span class="nl">hits:</span><span class="w"> </span><span class="n">class</span><span class="w"> </span><span class="n">SearchResponseHits</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nl">total:</span><span class="w"> </span><span class="mh">1</span>
<span class="w">        </span><span class="nl">hits:</span><span class="w"> </span><span class="p">[{</span><span class="n">_id</span><span class="o">=</span><span class="mh">1</span><span class="p">,</span><span class="w"> </span><span class="n">_score</span><span class="o">=</span><span class="mh">1</span><span class="p">,</span><span class="w"> </span><span class="n">_source</span><span class="o">=</span><span class="p">{</span><span class="n">product_codes</span><span class="o">=</span><span class="p">[</span><span class="mh">1</span><span class="p">,</span><span class="w"> </span><span class="mh">2</span><span class="p">,</span><span class="w"> </span><span class="mh">3</span><span class="p">,</span><span class="w"> </span><span class="mh">4</span><span class="p">],</span><span class="w"> </span><span class="n">title</span><span class="o">=</span><span class="n">first</span><span class="p">}}]</span>
<span class="w">        </span><span class="nl">aggregations:</span><span class="w"> </span><span class="n">null</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nl">profile:</span><span class="w"> </span><span class="n">null</span>
<span class="p">}</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<h2 id="multi-value-big-integer">Multi-value big integer</h2>
<!-- example for creating MVA64 -->

<p>A data type that allows storing variable-length lists of 64-bit signed integers. It has the same functionality as multi-value integer.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="n">multi64</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;CREATE TABLE products(title text, values multi64)&quot;</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">    &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">    &#39;values&#39;=&gt;[&#39;type&#39;=&gt;&#39;multi64&#39;]</span>
<span class="x">]);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, values multi64))&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, values multi64))&#39;</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, values multi64))&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, values multi64))&quot;);
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
config
</div>

<!-- request config -->


<div class="codehilite"><pre><span></span><code><span class="na">table products</span>
<span class="na">{</span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">    </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">products</span>

<span class="w">    </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">    </span><span class="na">stored_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>

<span class="w">    </span><span class="na">rt_attr_multi_64</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">values</span>
<span class="na">}</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<h2 id="columnar-attribute-properties">Columnar attribute properties</h2>
<p>When you use the columnar storage you can specify the following properties for the attributes.</p>
<!-- example fast_fetch -->
<h3 id="fast_fetch">fast_fetch</h3>
<p>By default, Manticore Columnar storage stores all attributes in a columnar fashion, as well as in a special docstore row by row. This enables fast execution of queries like <code>SELECT * FROM ...</code>, especially when fetching a large number of records at once. However, if you are sure that you do not need it or wish to save disk space, you can disable it by specifying <code>fast_fetch='0'</code> when creating a table or (if you are defining a table in a config) by using <code>columnar_no_fast_fetch</code> as shown in the following example.</p>
<!-- request RT mode -->

<div class="codehilite"><pre><span></span><code><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">t</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="n">fast_fetch</span><span class="o">=</span><span class="s1">&#39;0&#39;</span><span class="p">)</span><span class="w"> </span><span class="n">engine</span><span class="o">=</span><span class="s1">&#39;columnar&#39;</span><span class="p">;</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="n">t</span><span class="p">;</span>
</code></pre></div>

<!-- response RT mode -->

<div class="codehilite"><pre><span></span><code><span class="o">+</span><span class="c1">-------+--------+---------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">Field</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Type</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">Properties</span><span class="w">          </span><span class="o">|</span>
<span class="o">+</span><span class="c1">-------+--------+---------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="nb">bigint</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">columnar</span><span class="w"> </span><span class="n">fast_fetch</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">a</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">uint</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">columnar</span><span class="w"> </span><span class="n">fast_fetch</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">b</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">uint</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">columnar</span><span class="w">            </span><span class="o">|</span>
<span class="o">+</span><span class="c1">-------+--------+---------------------+</span>
<span class="mi">3</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>
</code></pre></div>

<!-- request Plain mode -->

<div class="codehilite"><pre><span></span><code><span class="na">source min {</span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">mysql</span>
<span class="w">    </span><span class="na">sql_host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">localhost</span>
<span class="w">    </span><span class="na">sql_user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">test</span>
<span class="w">    </span><span class="na">sql_pass</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="na">sql_db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">test</span>
<span class="w">    </span><span class="na">sql_query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">select 1, 1 a, 1 b</span>
<span class="w">    </span><span class="na">sql_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">a</span>
<span class="w">    </span><span class="na">sql_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">b</span>
<span class="na">}</span>

<span class="na">table tbl {</span>
<span class="w">    </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl/col</span>
<span class="w">    </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">min</span>
<span class="w">    </span><span class="na">columnar_attrs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">*</span>
<span class="w">    </span><span class="na">columnar_no_fast_fetch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">b</span>
<span class="na">}</span>
</code></pre></div>

<!-- response Plain mode -->

<div class="codehilite"><pre><span></span><code><span class="o">+</span><span class="c1">-------+--------+---------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">Field</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Type</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">Properties</span><span class="w">          </span><span class="o">|</span>
<span class="o">+</span><span class="c1">-------+--------+---------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="nb">bigint</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">columnar</span><span class="w"> </span><span class="n">fast_fetch</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">a</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">uint</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">columnar</span><span class="w"> </span><span class="n">fast_fetch</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">b</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">uint</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">columnar</span><span class="w">            </span><span class="o">|</span>
<span class="o">+</span><span class="c1">-------+--------+---------------------+</span>
</code></pre></div>

<!-- end -->

</div>
</div>
<!-- proofread -->
        
    </section>
    
    <section class="chapter-section" id="toc-06.01.01-rowwise_and_columnar_attribute_storages">
        <a class="chapter-link" href="#toc-06.01.01-rowwise_and_columnar_attribute_storages"> ¶ 6.1.1</a>

        
        <h1 id="data-types">Data types</h1>
<h2 id="full-text-fields-and-attributes">Full-text fields and attributes</h2>
<p>Manticore's data types can be split into two categories: full-text fields and attributes.</p>
<h3 id="full-text-fields">Full-text fields</h3>
<p>Full-text fields:</p>
<ul>
<li>can be indexed with natural language processing algorithms, therefore can be searched for keywords</li>
<li>cannot be used for sorting or grouping</li>
<li>original document's content can be retrieved</li>
<li>original document's content can be used for highlighting</li>
</ul>
<p>Full-text fields are represented by the data type <code>text</code>. All other data types are called "attributes".</p>
<h3 id="attributes">Attributes</h3>
<p>Attributes are non-full-text values associated with each document that can be used to perform non-full-text filtering, sorting and grouping during a search.</p>
<p>It is often desired to process full-text search results based not only on matching document ID and its rank, but also on a number of other per-document values. For example, one might need to sort news search results by date and then relevance, or search through products within a specified price range, or limit a blog search to posts made by selected users, or group results by month. To do this efficiently, Manticore enables not only full-text fields, but also additional attributes to be added to each document. These attributes can be used to filter, sort, or group full-text matches, or to search only by attributes.</p>
<p>The attributes, unlike full-text fields, are not full-text indexed. They are stored in the table, but it is not possible to search them as full-text.</p>
<!-- example attributes or fields -->

<p>A good example for attributes would be a forum posts table. Assume that only the title and content fields need to be full-text searchable - but that sometimes it is also required to limit search to a certain author or a sub-forum (i.e., search only those rows that have some specific values of author_id or forum_id); or to sort matches by post_date column; or to group matching posts by month of the post_date and calculate per-group match counts.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">forum</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">author_id</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span><span class="w"> </span><span class="n">forum_id</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span><span class="w"> </span><span class="n">post_date</span><span class="w"> </span><span class="k">timestamp</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;CREATE TABLE forum(title text, content text, author_id int, forum_id int, post_date timestamp)&quot;</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;forum&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">    &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">    &#39;content&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">    &#39;author_id&#39;=&gt;[&#39;type&#39;=&gt;&#39;int&#39;],</span>
<span class="x">    &#39;forum_id&#39;=&gt;[&#39;type&#39;=&gt;&#39;int&#39;],</span>
<span class="x">    &#39;post_date&#39;=&gt;[&#39;type&#39;=&gt;&#39;timestamp&#39;]</span>
<span class="x">]);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE forum(title text, content text, author_id int, forum_id int, post_date timestamp)&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request Javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE forum(title text, content text, author_id int, forum_id int, post_date timestamp)&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Java
</div>

<!-- request Java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE forum(title text, content text, author_id int, forum_id int, post_date timestamp)&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">Sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE forum(title text, content text, author_id int, forum_id int, post_date timestamp)&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
config
</div>

<!-- request config -->


<div class="codehilite"><pre><span></span><code><span class="na">table forum</span>
<span class="na">{</span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">    </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">forum</span>

<span class="w">    </span><span class="c1"># when configuring fields via config, they are indexed (and not stored) by default</span>
<span class="w">    </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">    </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">content</span>

<span class="w">    </span><span class="c1"># this option needs to be specified for the field to be stored</span>
<span class="w">    </span><span class="na">stored_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title, content</span>

<span class="w">    </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">author_id</span>
<span class="w">    </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">forum_id</span>
<span class="w">    </span><span class="na">rt_attr_timestamp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">post_date</span>
<span class="na">}</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<!-- example filtered query -->

<p>This example shows running a full-text query filtered by <code>author_id</code>, <code>forum_id</code> and sorted by <code>post_date</code>.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">forum</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">author_id</span><span class="o">=</span><span class="mi">123</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">forum_id</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">7</span><span class="p">)</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">post_date</span><span class="w"> </span><span class="k">desc</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/search</span>
<span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;forum&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;query&quot;</span><span class="p">:</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;match_all&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">    </span><span class="nt">&quot;bool&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;must&quot;</span><span class="p">:</span>
<span class="w">      </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;equals&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;author_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;in&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;forum_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">7</span><span class="p">]</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;sort&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;post_date&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;desc&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$client-&gt;search([</span>
<span class="x">        &#39;index&#39; =&gt; &#39;forum&#39;,</span>
<span class="x">        &#39;query&#39; =&gt;</span>
<span class="x">        [</span>
<span class="x">            &#39;match_all&#39; =&gt; [],</span>
<span class="x">            &#39;bool&#39; =&gt; [</span>
<span class="x">                &#39;must&#39; =&gt; [</span>
<span class="x">                    &#39;equals&#39; =&gt; [&#39;author_id&#39; =&gt; 123],</span>
<span class="x">                    &#39;in&#39; =&gt; [</span>
<span class="x">                        &#39;forum_id&#39; =&gt; [</span>
<span class="x">                            1,3,7</span>
<span class="x">                        ]</span>
<span class="x">                    ]</span>
<span class="x">                ]</span>
<span class="x">            ]</span>
<span class="x">        ],</span>
<span class="x">        &#39;sort&#39; =&gt; [</span>
<span class="x">        [&#39;post_date&#39; =&gt; &#39;desc&#39;]</span>
<span class="x">    ]</span>
<span class="x">]);</span>
</code></pre></div>




<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">searchApi</span><span class="o">.</span><span class="n">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="p">:</span><span class="s2">&quot;forum&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="p">:{</span><span class="s2">&quot;match_all&quot;</span><span class="p">:{},</span><span class="s2">&quot;bool&quot;</span><span class="p">:{</span><span class="s2">&quot;must&quot;</span><span class="p">:[{</span><span class="s2">&quot;equals&quot;</span><span class="p">:{</span><span class="s2">&quot;author_id&quot;</span><span class="p">:</span><span class="mi">123</span><span class="p">}},{</span><span class="s2">&quot;in&quot;</span><span class="p">:{</span><span class="s2">&quot;forum_id&quot;</span><span class="p">:[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">7</span><span class="p">]}}]}},</span><span class="s2">&quot;sort&quot;</span><span class="p">:[{</span><span class="s2">&quot;post_date&quot;</span><span class="p">:</span><span class="s2">&quot;desc&quot;</span><span class="p">}]})</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">searchApi</span><span class="p">.</span><span class="nx">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="o">:</span><span class="s2">&quot;forum&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;match_all&quot;</span><span class="o">:</span><span class="p">{},</span><span class="s2">&quot;bool&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;must&quot;</span><span class="o">:</span><span class="p">[{</span><span class="s2">&quot;equals&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;author_id&quot;</span><span class="o">:</span><span class="mf">123</span><span class="p">}},{</span><span class="s2">&quot;in&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;forum_id&quot;</span><span class="o">:</span><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="mf">3</span><span class="p">,</span><span class="mf">7</span><span class="p">]}}]}},</span><span class="s2">&quot;sort&quot;</span><span class="o">:</span><span class="p">[{</span><span class="s2">&quot;post_date&quot;</span><span class="o">:</span><span class="s2">&quot;desc&quot;</span><span class="p">}]});</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="n">filters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">(){{</span>
<span class="w">    </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;must&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">(){{</span>
<span class="w">        </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;equals&quot;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Integer</span><span class="o">&gt;</span><span class="p">(){{</span>
<span class="w">            </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;author_id&quot;</span><span class="p">,</span><span class="mi">123</span><span class="p">);</span>
<span class="w">        </span><span class="p">}});</span>
<span class="w">        </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;in&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">(){{</span>
<span class="w">                </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;forum_id&quot;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="o">[]</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">7</span><span class="p">});</span>
<span class="w">        </span><span class="p">}});</span>
<span class="w">    </span><span class="p">}});</span>
<span class="p">}};</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">query</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;match_all&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">);</span>
<span class="n">query</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;bool&quot;</span><span class="p">,</span><span class="n">filters</span><span class="p">);</span>
<span class="n">SearchRequest</span><span class="w"> </span><span class="n">searchRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SearchRequest</span><span class="p">();</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setIndex</span><span class="p">(</span><span class="s">&quot;forum&quot;</span><span class="p">);</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setQuery</span><span class="p">(</span><span class="n">query</span><span class="p">);</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setSort</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">(){{</span>
<span class="w">    </span><span class="n">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">String</span><span class="o">&gt;</span><span class="p">(){{</span><span class="w"> </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;post_date&quot;</span><span class="p">,</span><span class="s">&quot;desc&quot;</span><span class="p">);}});</span>
<span class="p">}});</span>
<span class="n">SearchResponse</span><span class="w"> </span><span class="n">searchResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchApi</span><span class="p">.</span><span class="na">search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code><span class="n">object</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="n">new</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">match_all</span><span class="o">=</span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">};</span>
<span class="k">var</span><span class="w"> </span><span class="n">searchRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">SearchRequest</span><span class="p">(</span><span class="s2">&quot;forum&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">query</span><span class="p">);</span>
<span class="k">var</span><span class="w"> </span><span class="n">boolFilter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">BoolFilter</span><span class="p">();</span>
<span class="n">boolFilter</span><span class="o">.</span><span class="n">Must</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="nb nb-Type">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">new</span><span class="w"> </span><span class="n">EqualsFilter</span><span class="p">(</span><span class="s2">&quot;author_id&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">123</span><span class="p">),</span>
<span class="w">    </span><span class="n">new</span><span class="w"> </span><span class="n">InFilter</span><span class="p">(</span><span class="s2">&quot;forum_id&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="nb nb-Type">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">7</span><span class="p">})</span>
<span class="p">};</span>
<span class="n">searchRequest</span><span class="o">.</span><span class="n">AttrFilter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">boolFilter</span><span class="p">;</span>
<span class="n">searchRequest</span><span class="o">.</span><span class="n">Sort</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="nb nb-Type">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">SortOrder</span><span class="p">(</span><span class="s2">&quot;post_date&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">SortOrder</span><span class="o">.</span><span class="n">OrderEnum</span><span class="o">.</span><span class="n">Desc</span><span class="p">)</span><span class="w"> </span><span class="p">};</span>
<span class="k">var</span><span class="w"> </span><span class="n">searchResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchApi</span><span class="o">.</span><span class="n">Search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">);</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<h3 id="row-wise-and-columnar-attribute-storages">Row-wise and columnar attribute storages</h3>
<p>Manticore supports two types of attribute storages:</p>
<ul>
<li>row-wise - traditional storage available in Manticore Search out of the box</li>
<li>columnar - provided by <a href="https://github.com/manticoresoftware/columnar">Manticore Columnar Library</a></li>
</ul>
<p>As can be understood from their names, they store data differently. The traditional <strong>row-wise storage</strong>:</p>
<ul>
<li>stores attributes uncompressed</li>
<li>all attributes of the same document are stored in one row close to each other</li>
<li>rows are stored one by one</li>
<li>accessing attributes is basically done by just multiplying the row ID by the stride (length of a single vector) and getting the requested attribute from the calculated memory location. It gives very low random access latency.</li>
<li>attributes have to be in memory to get acceptable performance, otherwise due to the row-wise nature of the storage Manticore may have to read from disk too much unneeded data which is in many cases suboptimal.</li>
</ul>
<p>With <strong>the columnar storage</strong>:</p>
<ul>
<li>each attribute is stored independently of all other attributes in its separate "column"</li>
<li>storage is split into blocks of 65536 entries</li>
<li>the blocks are stored compressed. This often allows storing just a few distinct values instead of storing all of them like in the row-wise storage. High compression ratio allows reading from disk faster and makes the memory requirement much lower</li>
<li>when data is indexed, storage scheme is selected for each block independently. For example, if all values in a block are the same, it gets "const" storage and only one value is stored for the whole block. If there are less than 256 unique values per block, it gets "table" storage and stores indexes to a table of values instead of the values themselves</li>
<li>search in a block can be early rejected if it's clear the requested value is not present in the block.</li>
</ul>
<p>The columnar storage was designed to handle large data volume that does not fit into RAM, so the recommendations are:</p>
<ul>
<li>if you have enough memory for all your attributes you will benefit from the row-wise storage</li>
<li>otherwise, the columnar storage can still give you decent performance with a much lower memory footprint which will allow you to store much more documents in your table</li>
</ul>
<h3 id="how-to-switch-between-the-storages">How to switch between the storages</h3>
<p>The traditional row-wise storage is the default, so if you want everything to be stored in a row-wise fashion, you don't need to do anything when you create a table.</p>
<p>To enable the columnar storage you need to:</p>
<ul>
<li>specify <code>engine='columnar'</code> in <a href="../06-creating_a_table.html#creating-a-real-time-table-online-via-create-table">CREATE TABLE</a> to make all attributes of the table columnar. Then, if you want to keep a specific attribute row-wise, you need to add <code>engine='rowwise'</code> when you declare it. For example:</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">tbl</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="k">type</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="w"> </span><span class="n">engine</span><span class="o">=</span><span class="s1">&#39;rowwise&#39;</span><span class="p">)</span><span class="w"> </span><span class="n">engine</span><span class="o">=</span><span class="s1">&#39;columnar&#39;</span>
</code></pre></div>

<ul>
<li>specify <code>engine='columnar'</code> for a specific attribute in <code>CREATE TABLE</code> to make it columnar. For example:</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">tbl</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="k">type</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="w"> </span><span class="n">engine</span><span class="o">=</span><span class="s1">&#39;columnar&#39;</span><span class="p">);</span>
</code></pre></div>

<p>or</p>
<div class="codehilite"><pre><span></span><code><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">tbl</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="k">type</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="w"> </span><span class="n">engine</span><span class="o">=</span><span class="s1">&#39;columnar&#39;</span><span class="p">)</span><span class="w"> </span><span class="n">engine</span><span class="o">=</span><span class="s1">&#39;rowwise&#39;</span><span class="p">;</span>
</code></pre></div>

<ul>
<li>in the <a href="../02-read_this_first.html#real-time-mode-vs-plain-mode">plain mode</a> you need to list attributes you want to be columnar in <a href="../06-creating_a_table.html#columnar_attrs">columnar_attrs</a>.</li>
</ul>
<p>Below is the list of data types supported by Manticore Search:</p>
<h2 id="document-id">Document ID</h2>
<!-- example id -->
<p>The document identifier is a mandatory attribute, and document IDs must be <strong>unique 64-bit unsigned integers</strong>. Document IDs can be explicitly specified, but if not, they are still enabled. Document IDs cannot be updated. Note that when retrieving document IDs, they are treated as signed 64-bit integers, which means they may be negative. Use the <a href="15-functions.html#uint64%28%29">UINT64()</a> function to cast them to unsigned 64-bit integers if necessary.</p>
<!-- request Explicit ID -->

<p>When you create a table, you can specify ID explicitly, but no matter what data type you use, it will be always as said previously - a signed 64-bit integer.</p>
<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">tbl</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="nb">bigint</span><span class="p">,</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="nb">text</span><span class="p">);</span>
<span class="k">DESC</span><span class="w"> </span><span class="n">tbl</span><span class="p">;</span>
</code></pre></div>

<!-- response Explicit ID -->

<div class="codehilite"><pre><span></span><code><span class="o">+</span><span class="c1">---------+--------+----------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">Field</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">Type</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">Properties</span><span class="w">     </span><span class="o">|</span>
<span class="o">+</span><span class="c1">---------+--------+----------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="nb">bigint</span><span class="w"> </span><span class="o">|</span><span class="w">                </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nb">text</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">indexed</span><span class="w"> </span><span class="n">stored</span><span class="w"> </span><span class="o">|</span>
<span class="o">+</span><span class="c1">---------+--------+----------------+</span>
<span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>
</code></pre></div>

<!-- request Implicit ID -->

<p>You can also omit specifying ID at all, it will be enabled automatically.</p>
<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">tbl</span><span class="p">(</span><span class="n">content</span><span class="w"> </span><span class="nb">text</span><span class="p">);</span>
<span class="k">DESC</span><span class="w"> </span><span class="n">tbl</span><span class="p">;</span>
</code></pre></div>

<!-- response Implicit ID -->

<div class="codehilite"><pre><span></span><code><span class="o">+</span><span class="c1">---------+--------+----------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">Field</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">Type</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">Properties</span><span class="w">     </span><span class="o">|</span>
<span class="o">+</span><span class="c1">---------+--------+----------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="nb">bigint</span><span class="w"> </span><span class="o">|</span><span class="w">                </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="nb">text</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">indexed</span><span class="w"> </span><span class="n">stored</span><span class="w"> </span><span class="o">|</span>
<span class="o">+</span><span class="c1">---------+--------+----------------+</span>
<span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>
</code></pre></div>

<!-- end -->

</div>
</div>
<h2 id="character-data-types">Character data types</h2>
<p>General syntax:</p>
<div class="codehilite"><pre><span></span><code><span class="n">string</span><span class="o">|</span><span class="nc">text</span><span class="w"> </span><span class="o">[</span><span class="n">stored|attribute</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">indexed</span><span class="o">]</span>
</code></pre></div>

<p><strong>Properties:</strong></p>
<ol>
<li><code>indexed</code> - full-text indexed (can be used in full-text queries)</li>
<li><code>stored</code> - stored in a docstore (stored on disk, not in RAM, lazy read)</li>
<li><code>attribute</code> - makes it a string attribute (can sort/group by it)</li>
</ol>
<p>Specifying at least one property overrides all the default ones (see below), i.e., if you decide to use a custom combination of properties, you need to list all the properties you want.</p>
<p><strong>No properties specified:</strong></p>
<p><code>string</code> and <code>text</code> are aliases, but if you don’t specify any properties, they by default mean different things:</p>
<ul>
<li>just <code>string</code> by default means <code>attribute</code> (see details <a href="../06-creating_a_table.html#text">below</a>).</li>
<li>just <code>text</code> by default means <code>stored</code> + <code>indexed</code> (see details <a href="../06-creating_a_table.html#string">below</a>).</li>
</ul>
<h3 id="text">Text</h3>
<!-- example working with text -->

<p>The text (just <code>text</code> or <code>text/string indexed</code>) data type forms the full-text part of the table. Text fields are indexed and can be searched for keywords.</p>
<p>Text is passed through an analyzer pipeline that converts the text to words, applies morphology transformations, etc. Eventually, a full-text table (a special data structure that enables quick searches for a keyword) gets built from that text.</p>
<p>Full-text fields can only be used in the <code>MATCH()</code> clause and cannot be used for sorting or aggregation. Words are stored in an inverted index along with references to the fields they belong to and positions in the field. This allows searching a word inside each field and using advanced operators like proximity. By default, the original text of the fields is both indexed and stored in document storage. It means that the original text can be returned with the query results and used in <a href="../13-searching.html#toc-13.07-highlighting">search result highlighting</a>.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;CREATE TABLE products(title text)&quot;</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">    &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;]</span>
<span class="x">]);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text)&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text)&#39;</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text)&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text)&quot;);
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
config
</div>

<!-- request config -->


<div class="codehilite"><pre><span></span><code><span class="na">table products</span>
<span class="na">{</span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">    </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">products</span>

<span class="w">    </span><span class="c1"># when configuring fields via config, they are indexed (and not stored) by default</span>
<span class="w">    </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>

<span class="w">    </span><span class="c1"># this option needs to be specified for the field to be stored</span>
<span class="w">    </span><span class="na">stored_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="na">}</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<!-- example working with indexed only  -->

<p>This behavior can be overridden by explicitly specifying that the text is only indexed.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="w"> </span><span class="n">indexed</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;CREATE TABLE products(title text indexed)&quot;</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">    &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;,&#39;options&#39;=&gt;[&#39;indexed&#39;]]</span>
<span class="x">]);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text indexed)&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text indexed)&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text indexed)&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text indexed)&quot;);
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
config
</div>

<!-- request config -->


<div class="codehilite"><pre><span></span><code><span class="na">table products</span>
<span class="na">{</span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">    </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">products</span>

<span class="w">    </span><span class="c1"># when configuring fields via config, they are indexed (and not stored) by default</span>
<span class="w">    </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="na">}</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<!-- example for field naming  -->

<p>Fields are named, and you can limit your searches to a single field (e.g. search through "title" only) or a subset of fields (e.g. "title" and "abstract" only). You can have up to 256 full-text fields.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="k">match</span><span class="p">(</span><span class="s1">&#39;@title first&#39;</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/search</span>
<span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;products&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;query&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;match&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;first&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>





<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index-&gt;setName(&#39;products&#39;)-&gt;search(&#39;@title&#39;)-&gt;get();</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">searchApi</span><span class="o">.</span><span class="n">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="p">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="p">:{</span><span class="s2">&quot;match&quot;</span><span class="p">:{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span><span class="s2">&quot;first&quot;</span><span class="p">}}})</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">searchApi</span><span class="p">.</span><span class="nx">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="o">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;match&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="o">:</span><span class="s2">&quot;first&quot;</span><span class="p">}}});</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text indexed)&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text indexed)&quot;);
</code></pre></div>



<!-- end -->

</div>

</div>

<h3 id="string">String</h3>
<!-- example for string attributes  -->

<p>Unlike full-text fields, string attributes (just <code>string</code> or <code>string/text attribute</code>) are stored as they are received and cannot be used in full-text searches. Instead, they are returned in results, can be used in the <code>WHERE</code> clause for comparison filtering or <code>REGEX</code>, and can be used for sorting and aggregation. In general, it's not recommended to store large texts in string attributes, but use string attributes for metadata like names, titles, tags, keys.</p>
<p>If you want to also index the string attribute, you can specify both as <code>string attribute indexed</code>. It will allow full-text searching and works as an attribute.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="n">string</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;CREATE TABLE products(title text, keys string)&quot;</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">    &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">    &#39;keys&#39;=&gt;[&#39;type&#39;=&gt;&#39;string&#39;]</span>
<span class="x">]);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, keys string)&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, keys string)&#39;</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, keys string)&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, keys string)&quot;);
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
config
</div>

<!-- request config -->


<div class="codehilite"><pre><span></span><code><span class="na">table products</span>
<span class="na">{</span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">    </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">products</span>

<span class="w">    </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">    </span><span class="na">stored_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>

<span class="w">    </span><span class="na">rt_attr_string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">keys</span>
<span class="na">}</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<details>
<summary>More</summary>

<!-- example string field -->

You can create a full-text field that is also stored as a string attribute. This approach creates a full-text field and a string attribute that have the same name. Note that you can't add a `stored` property to store the data as a string attribute and in the document storage at the same time.

<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->
`string attribute indexed` means that we're working with a string data type that is stored as an attribute and indexed as a full-text field.


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">title</span><span class="w"> </span><span class="n">string</span><span class="w"> </span><span class="n">attribute</span><span class="w"> </span><span class="n">indexed</span><span class="w"> </span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;CREATE TABLE products ( title string attribute indexed )&quot;</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">    &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;string&#39;,&#39;options&#39;=&gt;[&#39;indexed&#39;,&#39;attribute&#39;]]</span>
<span class="x">]);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products ( title string attribute indexed )&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products ( title string attribute indexed )&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products ( title string attribute indexed )&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products ( title string attribute indexed )&quot;);
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
config
</div>

<!-- request config -->


<div class="codehilite"><pre><span></span><code><span class="na">table products</span>
<span class="na">{</span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">    </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">products</span>

<span class="w">    </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">    </span><span class="na">rt_attr_string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="na">}</span>
</code></pre></div>



<!-- end -->

</div>

</div>

</details>

<h2 id="integer">Integer</h2>
<!-- example for integers  -->

<p>Integer type allows storing 32 bit <strong>unsigned</strong> integer values.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">int</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;CREATE TABLE products(title text, price int)&quot;</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">    &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">    &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;int&#39;]</span>
<span class="x">]);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price int)&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price int)&#39;</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price int)&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price int)&quot;);
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
config
</div>

<!-- request config -->


<div class="codehilite"><pre><span></span><code><span class="na">table products</span>
<span class="na">{</span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">    </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">products</span>

<span class="w">    </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">    </span><span class="na">stored_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>

<span class="w">    </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">type</span>
<span class="na">}</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<!-- example for bit integers  -->

<p>Integers can be stored in shorter sizes than 32-bit by specifying a bit count. For example, if we want to store a numeric value which we know is not going to be bigger than 8, the type can be defined as <code>bit(3)</code>. Bitcount integers perform slower than the full-size ones, but they require less RAM. They are saved in 32-bit chunks, so in order to save space, they should be grouped at the end of attribute definitions (otherwise a bitcount integer between 2 full-size integers will occupy 32 bits as well).</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">flags</span><span class="w"> </span><span class="nb">bit</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span><span class="w"> </span><span class="n">tags</span><span class="w"> </span><span class="nb">bit</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;CREATE TABLE products(title text, flags bit(3), tags bit(2))&quot;</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">    &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">    &#39;flags&#39;=&gt;[&#39;type&#39;=&gt;&#39;bit(3)&#39;],</span>
<span class="x">    &#39;tags&#39;=&gt;[&#39;type&#39;=&gt;&#39;bit(2)&#39;]</span>
<span class="x">]);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, flags bit(3), tags bit(2) &#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, flags bit(3), tags bit(2) &#39;</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, flags bit(3), tags bit(2)&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, flags bit(3), tags bit(2)&quot;);
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
config
</div>

<!-- request config -->


<div class="codehilite"><pre><span></span><code><span class="na">table products</span>
<span class="na">{</span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">    </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">products</span>

<span class="w">    </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">    </span><span class="na">stored_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>

<span class="w">    </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">flags:3</span>
<span class="w">    </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tags:2</span>
<span class="na">}</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<h2 id="big-integer">Big Integer</h2>
<!-- example for bigints  -->

<p>Big integers (bigint) are 64-bit wide <strong>signed</strong> integers.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">bigint</span><span class="w"> </span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;CREATE TABLE products(title text, price bigint)&quot;</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">    &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">    &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;bigint&#39;]</span>
<span class="x">]);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price bigint )&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price bigint )&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price bigint )&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price bigint )&quot;);
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
config
</div>

<!-- request config -->


<div class="codehilite"><pre><span></span><code><span class="na">table products</span>
<span class="na">{</span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">    </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">products</span>

<span class="w">    </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">    </span><span class="na">stored_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>

<span class="w">    </span><span class="na">rt_attr_bigint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">type</span>
<span class="na">}</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<h2 id="boolean">Boolean</h2>
<!-- example for boolean  -->

<p>Declares a boolean attribute. It's equivalent to an integer attribute with bit count of 1.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">sold</span><span class="w"> </span><span class="n">bool</span><span class="w"> </span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;CREATE TABLE products(title text, sold bool)&quot;</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">    &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">    &#39;sold&#39;=&gt;[&#39;type&#39;=&gt;&#39;bool&#39;]</span>
<span class="x">]);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, sold bool )&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, sold bool )&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, sold bool )&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, sold bool )&quot;);
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
config
</div>

<!-- request config -->


<div class="codehilite"><pre><span></span><code><span class="na">table products</span>
<span class="na">{</span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">    </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">products</span>

<span class="w">    </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">    </span><span class="na">stored_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>

<span class="w">    </span><span class="na">rt_attr_bool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">sold</span>
<span class="na">}</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<h2 id="timestamps">Timestamps</h2>
<!-- example for timestamps  -->

<p>Timestamp type represents unix timestamps which is stored as a 32-bit integer. The difference is that <a href="../15-functions.html#toc-15.05-date_and_time_functions">time and date</a> functions are available for the timestamp type.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="nb">date</span><span class="w"> </span><span class="k">timestamp</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;CREATE TABLE products(title text, date timestamp)&quot;</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">    &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">    &#39;date&#39;=&gt;[&#39;type&#39;=&gt;&#39;timestamp&#39;]</span>
<span class="x">]);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, date timestamp)&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, date timestamp)&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, date timestamp)&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, date timestamp)&quot;);
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
config
</div>

<!-- request config -->


<div class="codehilite"><pre><span></span><code><span class="na">table products</span>
<span class="na">{</span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">    </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">products</span>

<span class="w">    </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">    </span><span class="na">stored_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>

<span class="w">    </span><span class="na">rt_attr_timestamp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">date</span>
<span class="na">}</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<h2 id="float">Float</h2>
<!-- example for float -->
<p>Real numbers are stored as 32-bit IEEE 754 single precision floats.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">coeff</span><span class="w"> </span><span class="nb">float</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;CREATE TABLE products(title text, coeff float)&quot;</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">    &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">    &#39;coeff&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">]);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, coeff float)&#39;</span><span class="p">)</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, coeff float)&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, coeff float)&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, coeff float)&quot;);
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
config
</div>

<!-- request config -->


<div class="codehilite"><pre><span></span><code><span class="na">table products</span>
<span class="na">{</span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">    </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">products</span>

<span class="w">    </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">    </span><span class="na">stored_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>

<span class="w">    </span><span class="na">rt_attr_float</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">coeff</span>
<span class="na">}</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<!-- example for eps comparison -->

<p>Unlike integer types, comparing two floating-point numbers for equality is not recommended due to potential rounding errors. A more reliable approach is to use a near-equal comparison, by checking the absolute error margin.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="k">abs</span><span class="p">(</span><span class="n">a</span><span class="o">-</span><span class="n">b</span><span class="p">)</span><span class="o">&lt;=</span><span class="mi">0</span><span class="p">.</span><span class="mi">00001</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">products</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->

<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/search</span>
<span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;products&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;query&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;match_all&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;expressions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;eps&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;abs(a-b)&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index-&gt;setName(&#39;products&#39;)-&gt;search(&#39;&#39;)-&gt;expression(&#39;eps&#39;,&#39;abs(a-b)&#39;)-&gt;get();</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">searchApi</span><span class="o">.</span><span class="n">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="p">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="p">:{</span><span class="s2">&quot;match_all&quot;</span><span class="p">:{}},</span><span class="s2">&quot;expressions&quot;</span><span class="p">:{</span><span class="s2">&quot;eps&quot;</span><span class="p">:</span><span class="s2">&quot;abs(a-b)&quot;</span><span class="p">}})</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">searchApi</span><span class="p">.</span><span class="nx">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="o">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;match_all&quot;</span><span class="o">:</span><span class="p">{}}},</span><span class="s2">&quot;expressions&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;eps&quot;</span><span class="o">:</span><span class="s2">&quot;abs(a-b)&quot;</span><span class="p">}});</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">searchRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SearchRequest</span><span class="p">();</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setIndex</span><span class="p">(</span><span class="s">&quot;forum&quot;</span><span class="p">);</span>
<span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">query</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;match_all&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">);</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setQuery</span><span class="p">(</span><span class="n">query</span><span class="p">);</span>
<span class="n">Object</span><span class="w"> </span><span class="n">expressions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">(){{</span>
<span class="w">    </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;ebs&quot;</span><span class="p">,</span><span class="s">&quot;abs(a-b)&quot;</span><span class="p">);</span>
<span class="p">}};</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setExpressions</span><span class="p">(</span><span class="n">expressions</span><span class="p">);</span>
<span class="n">searchResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchApi</span><span class="p">.</span><span class="na">search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code><span class="n">object</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="n">new</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">match_all</span><span class="o">=</span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">};</span>
<span class="k">var</span><span class="w"> </span><span class="n">searchRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">SearchRequest</span><span class="p">(</span><span class="s2">&quot;forum&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">query</span><span class="p">);</span>
<span class="n">searchRequest</span><span class="o">.</span><span class="n">Expressions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="nb nb-Type">Object</span><span class="o">&gt;</span><span class="p">{</span>
<span class="w">    </span><span class="n">new</span><span class="w"> </span><span class="nb nb-Type">Dictionary</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">{</span><span class="s2">&quot;ebs&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;abs(a-b)&quot;</span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="p">};</span>
<span class="k">var</span><span class="w"> </span><span class="n">searchResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchApi</span><span class="o">.</span><span class="n">Search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">);</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<!-- example for float mul -->

<p>Another alternative, which can also be used to perform <code>IN(attr,val1,val2,val3)</code> is to compare floats as integers by choosing a multiplier factor and convert the floats to integers in operations. The following example illustrates modifying <code>IN(attr,2.0,2.5,3.5)</code> to work with integer values.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="k">in</span><span class="p">(</span><span class="n">ceil</span><span class="p">(</span><span class="n">attr</span><span class="o">*</span><span class="mi">100</span><span class="p">),</span><span class="mi">200</span><span class="p">,</span><span class="mi">250</span><span class="p">,</span><span class="mi">350</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">products</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->

<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/search</span>
<span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;products&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;query&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;match_all&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;expressions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;inc&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;in(ceil(attr*100),200,250,350)&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index-&gt;setName(&#39;products&#39;)-&gt;search(&#39;&#39;)-&gt;expression(&#39;inc&#39;,&#39;in(ceil(attr*100),200,250,350)&#39;)-&gt;get();</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">searchApi</span><span class="o">.</span><span class="n">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="p">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="p">:{</span><span class="s2">&quot;match_all&quot;</span><span class="p">:{}}},</span><span class="s2">&quot;expressions&quot;</span><span class="p">:{</span><span class="s2">&quot;inc&quot;</span><span class="p">:</span><span class="s2">&quot;in(ceil(attr*100),200,250,350)&quot;</span><span class="p">}})</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">searchApi</span><span class="p">.</span><span class="nx">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="o">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;match_all&quot;</span><span class="o">:</span><span class="p">{}}},</span><span class="s2">&quot;expressions&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;inc&quot;</span><span class="o">:</span><span class="s2">&quot;in(ceil(attr*100),200,250,350)&quot;</span><span class="p">}});</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">searchRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SearchRequest</span><span class="p">();</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setIndex</span><span class="p">(</span><span class="s">&quot;forum&quot;</span><span class="p">);</span>
<span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">query</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;match_all&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">);</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setQuery</span><span class="p">(</span><span class="n">query</span><span class="p">);</span>
<span class="n">Object</span><span class="w"> </span><span class="n">expressions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">(){{</span>
<span class="w">    </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;inc&quot;</span><span class="p">,</span><span class="s">&quot;in(ceil(attr*100),200,250,350)&quot;</span><span class="p">);</span>
<span class="p">}};</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setExpressions</span><span class="p">(</span><span class="n">expressions</span><span class="p">);</span>
<span class="n">searchResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchApi</span><span class="p">.</span><span class="na">search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code><span class="n">object</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="n">new</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">match_all</span><span class="o">=</span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">};</span>
<span class="k">var</span><span class="w"> </span><span class="n">searchRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">SearchRequest</span><span class="p">(</span><span class="s2">&quot;forum&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">query</span><span class="p">);</span>
<span class="n">searchRequest</span><span class="o">.</span><span class="n">Expressions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="nb nb-Type">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">new</span><span class="w"> </span><span class="nb nb-Type">Dictionary</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">{</span><span class="s2">&quot;ebs&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;in(ceil(attr*100),200,250,350)&quot;</span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="p">};</span>
<span class="k">var</span><span class="w"> </span><span class="n">searchResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchApi</span><span class="o">.</span><span class="n">Search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">);</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h2 id="json">JSON</h2>
<!-- example for creating json -->

<p>This data type allows storing JSON objects, which is useful for storing schema-less data. However, it is not supported by columnar storage. However, it can be stored in traditional storage, as it's possible to combine both storage types in the same table.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="k">data</span><span class="w"> </span><span class="n">json</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;CREATE TABLE products(title text, data json)&quot;</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">    &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">    &#39;data&#39;=&gt;[&#39;type&#39;=&gt;&#39;json&#39;]</span>
<span class="x">]);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, data json)&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, data json)&#39;</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="err">&#39;</span><span class="n">CREATE</span><span class="w"> </span><span class="n">TABLE</span><span class="w"> </span><span class="nf">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="n">text</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">json</span><span class="p">)</span><span class="err">&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql&#39;CREATE TABLE products(title text, data json)&#39;);
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
config
</div>

<!-- request config -->


<div class="codehilite"><pre><span></span><code><span class="na">table products</span>
<span class="na">{</span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">    </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">products</span>

<span class="w">    </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">    </span><span class="na">stored_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>

<span class="w">    </span><span class="na">rt_attr_json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">data</span>
<span class="na">}</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<!-- example for INDEXOF() json -->

<p>JSON properties can be used in most operations. There are also special functions such as <a href="../15-functions.html#all%28%29">ALL()</a>, <a href="../15-functions.html#any%28%29">ANY()</a>, <a href="../15-functions.html#greatest%28%29">GREATEST()</a>, <a href="../15-functions.html#least%28%29">LEAST()</a> and <a href="../15-functions.html#indexof%28%29">INDEXOF()</a> that allow traversal of property arrays.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="n">indexof</span><span class="p">(</span><span class="n">x</span><span class="o">&gt;</span><span class="mi">2</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">data</span><span class="p">.</span><span class="n">intarray</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">products</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/search</span>
<span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;products&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;query&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;match_all&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;expressions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;idx&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;indexof(x&gt;2 for x in data.intarray)&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index-&gt;setName(&#39;products&#39;)-&gt;search(&#39;&#39;)-&gt;expression(&#39;idx&#39;,&#39;indexof(x&gt;2 for x in data.intarray)&#39;)-&gt;get();</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">searchApi</span><span class="o">.</span><span class="n">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="p">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="p">:{</span><span class="s2">&quot;match_all&quot;</span><span class="p">:{}}},</span><span class="s2">&quot;expressions&quot;</span><span class="p">:{</span><span class="s2">&quot;idx&quot;</span><span class="p">:</span><span class="s2">&quot;indexof(x&gt;2 for x in data.intarray)&quot;</span><span class="p">}})</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">searchApi</span><span class="p">.</span><span class="nx">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="o">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;match_all&quot;</span><span class="o">:</span><span class="p">{}}},</span><span class="s2">&quot;expressions&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;idx&quot;</span><span class="o">:</span><span class="s2">&quot;indexof(x&gt;2 for x in data.intarray)&quot;</span><span class="p">}});</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">searchRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SearchRequest</span><span class="p">();</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setIndex</span><span class="p">(</span><span class="s">&quot;forum&quot;</span><span class="p">);</span>
<span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">query</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;match_all&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">);</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setQuery</span><span class="p">(</span><span class="n">query</span><span class="p">);</span>
<span class="n">Object</span><span class="w"> </span><span class="n">expressions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">(){{</span>
<span class="w">    </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;idx&quot;</span><span class="p">,</span><span class="s">&quot;indexof(x&gt;2 for x in data.intarray)&quot;</span><span class="p">);</span>
<span class="p">}};</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setExpressions</span><span class="p">(</span><span class="n">expressions</span><span class="p">);</span>
<span class="n">searchResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchApi</span><span class="p">.</span><span class="na">search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code><span class="n">object</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="n">new</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">match_all</span><span class="o">=</span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">};</span>
<span class="k">var</span><span class="w"> </span><span class="n">searchRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">SearchRequest</span><span class="p">(</span><span class="s2">&quot;forum&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">query</span><span class="p">);</span>
<span class="n">searchRequest</span><span class="o">.</span><span class="n">Expressions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="nb nb-Type">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">new</span><span class="w"> </span><span class="nb nb-Type">Dictionary</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">{</span><span class="s2">&quot;idx&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;indexof(x&gt;2 for x in data.intarray)&quot;</span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="p">};</span>
<span class="k">var</span><span class="w"> </span><span class="n">searchResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchApi</span><span class="o">.</span><span class="n">Search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">);</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<!-- example for REGEX() json -->

<p>Text properties are treated the same as strings, so it's not possible to use them in full-text match expressions. However, string functions such as <a href="../15-functions.html#regex%28%29">REGEX()</a> can be used.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="n">regex</span><span class="p">(</span><span class="k">data</span><span class="p">.</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;est&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">c</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="k">c</span><span class="o">&gt;</span><span class="mi">0</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/search</span>
<span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;products&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;query&quot;</span><span class="p">:</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;match_all&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">    </span><span class="nt">&quot;range&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;c&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;gt&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;expressions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;c&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;regex(data.name, &#39;est&#39;)&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index-&gt;setName(&#39;products&#39;)-&gt;search(&#39;&#39;)-&gt;expression(&#39;idx&#39;,&quot;regex(data.name, &#39;est&#39;)&quot;)-&gt;filter(&#39;c&#39;,&#39;gt&#39;,0)-&gt;get();</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">searchApi</span><span class="o">.</span><span class="n">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="p">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="p">:{</span><span class="s2">&quot;match_all&quot;</span><span class="p">:{},</span><span class="s2">&quot;range&quot;</span><span class="p">:{</span><span class="s2">&quot;c&quot;</span><span class="p">:{</span><span class="s2">&quot;gt&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">}}}},</span><span class="s2">&quot;expressions&quot;</span><span class="p">:{</span><span class="s2">&quot;c&quot;</span><span class="p">:</span><span class="s2">&quot;regex(data.name, &#39;est&#39;)&quot;</span><span class="p">}})</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">searchApi</span><span class="p">.</span><span class="nx">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="o">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;match_all&quot;</span><span class="o">:</span><span class="p">{},</span><span class="s2">&quot;range&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;gt&quot;</span><span class="o">:</span><span class="mf">0</span><span class="p">}}}},</span><span class="s2">&quot;expressions&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;c&quot;</span><span class="o">:</span><span class="s2">&quot;regex(data.name, &#39;est&#39;)&quot;</span><span class="p">}});</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">searchRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SearchRequest</span><span class="p">();</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setIndex</span><span class="p">(</span><span class="s">&quot;forum&quot;</span><span class="p">);</span>
<span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">query</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;match_all&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">);</span>
<span class="n">query</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;range&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">(){{</span>
<span class="w">    </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;c&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">(){{</span>
<span class="w">        </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;gt&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="p">}});</span>
<span class="p">}});</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setQuery</span><span class="p">(</span><span class="n">query</span><span class="p">);</span>
<span class="n">Object</span><span class="w"> </span><span class="n">expressions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">(){{</span>
<span class="w">    </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;idx&quot;</span><span class="p">,</span><span class="s">&quot;indexof(x&gt;2 for x in data.intarray)&quot;</span><span class="p">);</span>
<span class="p">}};</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setExpressions</span><span class="p">(</span><span class="n">expressions</span><span class="p">);</span>
<span class="n">searchResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchApi</span><span class="p">.</span><span class="na">search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code><span class="n">object</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="n">new</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">match_all</span><span class="o">=</span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">};</span>
<span class="k">var</span><span class="w"> </span><span class="n">searchRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">SearchRequest</span><span class="p">(</span><span class="s2">&quot;forum&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">query</span><span class="p">);</span>
<span class="k">var</span><span class="w"> </span><span class="n">rangeFilter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">RangeFilter</span><span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="p">);</span>
<span class="n">rangeFilter</span><span class="o">.</span><span class="n">Gt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="n">searchRequest</span><span class="o">.</span><span class="n">AttrFilter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rangeFilter</span><span class="p">;</span>
<span class="n">searchRequest</span><span class="o">.</span><span class="n">Expressions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="nb nb-Type">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">new</span><span class="w"> </span><span class="nb nb-Type">Dictionary</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">string</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">{</span><span class="s2">&quot;idx&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;indexof(x&gt;2 for x in data.intarray)&quot;</span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="p">};</span>
<span class="k">var</span><span class="w"> </span><span class="n">searchResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchApi</span><span class="o">.</span><span class="n">Search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">);</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<!-- example for DOUBLE() -->

<p>In the case of JSON properties, enforcing data type may be required for proper functionality in certain situations. For example, when working with float values, <a href="../15-functions.html#double%28%29">DOUBLE()</a> must be used for proper sorting.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">double</span><span class="p">(</span><span class="k">data</span><span class="p">.</span><span class="n">myfloat</span><span class="p">)</span><span class="w"> </span><span class="k">desc</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/search</span>
<span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;products&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;query&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;match_all&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;sort&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;double(data.myfloat)&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;order&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;desc&quot;</span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index-&gt;setName(&#39;products&#39;)-&gt;search(&#39;&#39;)-&gt;sort(&#39;double(data.myfloat)&#39;,&#39;desc&#39;)-&gt;get();</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">searchApi</span><span class="o">.</span><span class="n">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="p">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="p">:{</span><span class="s2">&quot;match_all&quot;</span><span class="p">:{}}},</span><span class="s2">&quot;sort&quot;</span><span class="p">:[{</span><span class="s2">&quot;double(data.myfloat)&quot;</span><span class="p">:{</span><span class="s2">&quot;order&quot;</span><span class="p">:</span><span class="s2">&quot;desc&quot;</span><span class="p">}}]})</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">searchApi</span><span class="p">.</span><span class="nx">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="o">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;match_all&quot;</span><span class="o">:</span><span class="p">{}}},</span><span class="s2">&quot;sort&quot;</span><span class="o">:</span><span class="p">[{</span><span class="s2">&quot;double(data.myfloat)&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;order&quot;</span><span class="o">:</span><span class="s2">&quot;desc&quot;</span><span class="p">}}]});</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">searchRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SearchRequest</span><span class="p">();</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setIndex</span><span class="p">(</span><span class="s">&quot;forum&quot;</span><span class="p">);</span>
<span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">query</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;match_all&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">);</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setQuery</span><span class="p">(</span><span class="n">query</span><span class="p">);</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setSort</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">(){{</span>
<span class="w">    </span><span class="n">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">String</span><span class="o">&gt;</span><span class="p">(){{</span><span class="w"> </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;double(data.myfloat)&quot;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">String</span><span class="o">&gt;</span><span class="p">(){{</span><span class="w"> </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;order&quot;</span><span class="p">,</span><span class="s">&quot;desc&quot;</span><span class="p">);}});}});</span>
<span class="p">}});</span>
<span class="n">searchResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchApi</span><span class="p">.</span><span class="na">search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code><span class="n">object</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="n">new</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">match_all</span><span class="o">=</span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">};</span>
<span class="k">var</span><span class="w"> </span><span class="n">searchRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">SearchRequest</span><span class="p">(</span><span class="s2">&quot;forum&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">query</span><span class="p">);</span>
<span class="n">searchRequest</span><span class="o">.</span><span class="n">Sort</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="nb nb-Type">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">new</span><span class="w"> </span><span class="n">SortOrder</span><span class="p">(</span><span class="s2">&quot;double(data.myfloat)&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">SortOrder</span><span class="o">.</span><span class="n">OrderEnum</span><span class="o">.</span><span class="n">Desc</span><span class="p">)</span>
<span class="p">};</span>
<span class="k">var</span><span class="w"> </span><span class="n">searchResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchApi</span><span class="o">.</span><span class="n">Search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">);</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<h2 id="float-vector">Float vector</h2>
<!-- example for creating float_vector -->

<p>Float vector attributes allow storing variable-length lists of floats. It's important to note that this concept differs from multi-valued attributes. Multi-valued attributes (MVAs) are essentially sets; they do not preserve value order, and duplicate values are not retained. In contrast, float vectors perform no additional processing on values during insertion.</p>
<p>Float vector attributes can be used in k-nearest neighbor searches; see <a href="../13-searching.html#toc-13.22-knearest_neighbor_vector_search">KNN search</a>.</p>
<p>** Currently, <code>float_vector</code> fields can only be utilized in KNN search within real-time tables and the data type is not supported in any other functions or expressions, nor is it supported in plain tables. **</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">image_vector</span><span class="w"> </span><span class="n">float_vector</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;CREATE TABLE products(title text, image_vector float_vector)&quot;</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">    &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">    &#39;image_vector&#39;=&gt;[&#39;type&#39;=&gt;&#39;float_vector&#39;]</span>
<span class="x">]);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, image_vector float_vector)&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, image_vector float_vector)&#39;</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, image_vector float_vector)&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, image_vector float_vector)&quot;);
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
config
</div>

<!-- request config -->


<div class="codehilite"><pre><span></span><code><span class="na">table products</span>
<span class="na">{</span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">    </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">products</span>

<span class="w">    </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">    </span><span class="na">stored_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>

<span class="w">    </span><span class="na">rt_attr_float_vector</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">image_vector</span>
<span class="na">}</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<h2 id="multi-value-integer-mva">Multi-value integer (MVA)</h2>
<!-- example for creating MVA32 -->

<p>Multi-value attributes allow storing variable-length lists of 32-bit unsigned integers. This can be useful for storing one-to-many numeric values, such as tags, product categories, and properties.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">product_codes</span><span class="w"> </span><span class="n">multi</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;CREATE TABLE products(title text, product_codes multi)&quot;</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">    &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">    &#39;product_codes&#39;=&gt;[&#39;type&#39;=&gt;&#39;multi&#39;]</span>
<span class="x">]);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, product_codes multi)&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, product_codes multi)&#39;</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, product_codes multi)&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, product_codes multi)&quot;);
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
config
</div>

<!-- request config -->


<div class="codehilite"><pre><span></span><code><span class="na">table products</span>
<span class="na">{</span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">    </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">products</span>

<span class="w">    </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">    </span><span class="na">stored_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>

<span class="w">    </span><span class="na">rt_attr_multi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">product_codes</span>
<span class="na">}</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<!-- example for any/all MVA -->
<p>It supports filtering and aggregation, but not sorting. Filtering can be done using a condition that requires at least one element to pass (using <a href="../15-functions.html#any%28%29">ANY()</a>) or all elements (<a href="../15-functions.html#all%28%29">ALL()</a>) to pass.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="k">any</span><span class="p">(</span><span class="n">product_codes</span><span class="p">)</span><span class="o">=</span><span class="mi">3</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/search</span>
<span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;products&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;query&quot;</span><span class="p">:</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;match_all&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">    </span><span class="nt">&quot;equals&quot;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;any(product_codes)&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index-&gt;setName(&#39;products&#39;)-&gt;search(&#39;&#39;)-&gt;filter(&#39;any(product_codes)&#39;,&#39;equals&#39;,3)-&gt;get();</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">searchApi</span><span class="o">.</span><span class="n">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="p">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="p">:{</span><span class="s2">&quot;match_all&quot;</span><span class="p">:{},</span><span class="s2">&quot;equals&quot;</span><span class="p">:{</span><span class="s2">&quot;any(product_codes)&quot;</span><span class="p">:</span><span class="mi">3</span><span class="p">}}}})</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">searchApi</span><span class="p">.</span><span class="nx">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="o">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;match_all&quot;</span><span class="o">:</span><span class="p">{},</span><span class="s2">&quot;equals&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;any(product_codes)&quot;</span><span class="o">:</span><span class="mf">3</span><span class="p">}}}})</span><span class="err">&#39;</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">searchRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SearchRequest</span><span class="p">();</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setIndex</span><span class="p">(</span><span class="s">&quot;forum&quot;</span><span class="p">);</span>
<span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">query</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;match_all&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">);</span>
<span class="n">query</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;equals&quot;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Integer</span><span class="o">&gt;</span><span class="p">(){{</span>
<span class="w">     </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;any(product_codes)&quot;</span><span class="p">,</span><span class="mi">3</span><span class="p">);</span>
<span class="p">}});</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setQuery</span><span class="p">(</span><span class="n">query</span><span class="p">);</span>
<span class="n">searchResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchApi</span><span class="p">.</span><span class="na">search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code><span class="n">object</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="n">new</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">match_all</span><span class="o">=</span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">};</span>
<span class="k">var</span><span class="w"> </span><span class="n">searchRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">SearchRequest</span><span class="p">(</span><span class="s2">&quot;forum&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">query</span><span class="p">);</span>
<span class="n">searchRequest</span><span class="o">.</span><span class="n">AttrFilter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">EqualsFilter</span><span class="p">(</span><span class="s2">&quot;any(product_codes)&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span>
<span class="k">var</span><span class="w"> </span><span class="n">searchResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchApi</span><span class="o">.</span><span class="n">Search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">);</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<!-- example for least/greatest MVA -->

<p>Information like <a href="../15-functions.html#least%28%29">least</a> or <a href="../15-functions.html#greatest%28%29">greatest</a> element and length of the list can be extracted. An example shows ordering by the least element of a multi-value attribute.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">select</span><span class="w"> </span><span class="n">least</span><span class="p">(</span><span class="n">product_codes</span><span class="p">)</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="k">asc</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/search</span>
<span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;products&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;query&quot;</span><span class="p">:</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;match_all&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">    </span><span class="nt">&quot;sort&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;product_codes&quot;</span><span class="p">:{</span><span class="w"> </span><span class="nt">&quot;order&quot;</span><span class="p">:</span><span class="s2">&quot;asc&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;mode&quot;</span><span class="p">:</span><span class="s2">&quot;min&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index-&gt;setName(&#39;products&#39;)-&gt;search(&#39;&#39;)-&gt;sort(&#39;product_codes&#39;,&#39;asc&#39;,&#39;min&#39;)-&gt;get();</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">searchApi</span><span class="o">.</span><span class="n">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="p">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="p">:{</span><span class="s2">&quot;match_all&quot;</span><span class="p">:{},</span><span class="s2">&quot;sort&quot;</span><span class="p">:[{</span><span class="s2">&quot;product_codes&quot;</span><span class="p">:{</span><span class="s2">&quot;order&quot;</span><span class="p">:</span><span class="s2">&quot;asc&quot;</span><span class="p">,</span><span class="s2">&quot;mode&quot;</span><span class="p">:</span><span class="s2">&quot;min&quot;</span><span class="p">}}]}})</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">searchApi</span><span class="p">.</span><span class="nx">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="o">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;match_all&quot;</span><span class="o">:</span><span class="p">{},</span><span class="s2">&quot;sort&quot;</span><span class="o">:</span><span class="p">[{</span><span class="s2">&quot;product_codes&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;order&quot;</span><span class="o">:</span><span class="s2">&quot;asc&quot;</span><span class="p">,</span><span class="s2">&quot;mode&quot;</span><span class="o">:</span><span class="s2">&quot;min&quot;</span><span class="p">}}]}});</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">searchRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SearchRequest</span><span class="p">();</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setIndex</span><span class="p">(</span><span class="s">&quot;forum&quot;</span><span class="p">);</span>
<span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">query</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;match_all&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">);</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setQuery</span><span class="p">(</span><span class="n">query</span><span class="p">);</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setSort</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">(){{</span>
<span class="w">    </span><span class="n">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">String</span><span class="o">&gt;</span><span class="p">(){{</span><span class="w"> </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;product_codes&quot;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">String</span><span class="o">&gt;</span><span class="p">(){{</span><span class="w"> </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;order&quot;</span><span class="p">,</span><span class="s">&quot;asc&quot;</span><span class="p">);</span><span class="n">put</span><span class="p">(</span><span class="s">&quot;mode&quot;</span><span class="p">,</span><span class="s">&quot;min&quot;</span><span class="p">);}});}});</span>
<span class="p">}});</span>
<span class="n">searchResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchApi</span><span class="p">.</span><span class="na">search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code><span class="n">object</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="n">new</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">match_all</span><span class="o">=</span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">};</span>
<span class="k">var</span><span class="w"> </span><span class="n">searchRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">SearchRequest</span><span class="p">(</span><span class="s2">&quot;forum&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">query</span><span class="p">);</span>
<span class="n">searchRequest</span><span class="o">.</span><span class="n">Sort</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="nb nb-Type">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">new</span><span class="w"> </span><span class="n">SortMVA</span><span class="p">(</span><span class="s2">&quot;product_codes&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">SortOrder</span><span class="o">.</span><span class="n">OrderEnum</span><span class="o">.</span><span class="n">Asc</span><span class="p">,</span><span class="w"> </span><span class="n">SortMVA</span><span class="o">.</span><span class="n">ModeEnum</span><span class="o">.</span><span class="n">Min</span><span class="p">)</span>
<span class="p">};</span>
<span class="n">searchResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchApi</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">);</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<!-- example for grouping by MVA -->
<p>When grouping by a multi-value attribute, a document will contribute to as many groups as there are different values associated with that document. For instance, if a collection contains exactly one document having a 'product_codes' multi-value attribute with values 5, 7, and 11, grouping on 'product_codes' will produce 3 groups with <code>COUNT(*)</code>equal to 1 and <code>GROUPBY()</code> key values of 5, 7, and 11, respectively. Also, note that grouping by multi-value attributes may lead to duplicate documents in the result set because each document can participate in many groups.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;doc one&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="p">);</span>
<span class="k">select</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">),</span><span class="w"> </span><span class="n">groupby</span><span class="p">()</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">product_codes</span><span class="p">;</span>
</code></pre></div>



<!-- response mysql -->


<div class="codehilite"><pre><span></span><code><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>

<span class="o">+</span><span class="c1">------+----------+-----------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">groupby</span><span class="p">()</span><span class="w"> </span><span class="o">|</span>
<span class="o">+</span><span class="c1">------+----------+-----------+</span>
<span class="o">|</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">11</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="mi">7</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">        </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="mi">5</span><span class="w"> </span><span class="o">|</span>
<span class="o">+</span><span class="c1">------+----------+-----------+</span>
<span class="mi">3</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<!-- example for MVA value order -->
<p>The order of the numbers inserted as values of multivalued attributes is not preserved. Values are stored internally as a sorted set.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">product</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;first&#39;</span><span class="p">,(</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">));</span>
<span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">products</span><span class="p">;</span>
</code></pre></div>



<!-- response mysql -->


<div class="codehilite"><pre><span></span><code><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>

<span class="o">+</span><span class="c1">------+---------------+-------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">product_codes</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">title</span><span class="w"> </span><span class="o">|</span>
<span class="o">+</span><span class="c1">------+---------------+-------+</span>
<span class="o">|</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="k">first</span><span class="w"> </span><span class="o">|</span>
<span class="o">+</span><span class="c1">------+---------------+-------+</span>
<span class="mi">1</span><span class="w"> </span><span class="k">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/i</span><span class="kc">nsert</span>
<span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;doc&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="s2">&quot;first&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;product_codes&quot;</span><span class="p">:[</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="err">POST</span><span class="w"> </span><span class="err">/search</span>
<span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;index&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;products&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;query&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;match_all&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>



<!-- response JSON -->


<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;_index&quot;</span><span class="p">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;_id&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;created&quot;</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;result&quot;</span><span class="p">:</span><span class="s2">&quot;created&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="mi">201</span>
<span class="p">}</span>

<span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;took&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;timed_out&quot;</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;hits&quot;</span><span class="p">:{</span>
<span class="w">      </span><span class="nt">&quot;total&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;hits&quot;</span><span class="p">:[</span>
<span class="w">         </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;_id&quot;</span><span class="p">:</span><span class="s2">&quot;1&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;_score&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;_source&quot;</span><span class="p">:{</span>
<span class="w">               </span><span class="nt">&quot;product_codes&quot;</span><span class="p">:[</span>
<span class="w">                  </span><span class="mi">1</span><span class="p">,</span>
<span class="w">                  </span><span class="mi">2</span><span class="p">,</span>
<span class="w">                  </span><span class="mi">3</span><span class="p">,</span>
<span class="w">                  </span><span class="mi">4</span>
<span class="w">               </span><span class="p">],</span>
<span class="w">               </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="s2">&quot;first&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">         </span><span class="p">}</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index-&gt;addDocument([</span>
<span class="x">    &quot;title&quot;=&gt;&quot;first&quot;,</span>
<span class="x">    &quot;product_codes&quot;=&gt;[4,2,1,3]</span>
<span class="x">]);</span>
<span class="x">$index-&gt;search(&#39;&#39;)-get();</span>
</code></pre></div>



<!-- response PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">Array</span>
<span class="x">(</span>
<span class="x">    [_index] =&gt; products</span>
<span class="x">    [_id] =&gt; 1</span>
<span class="x">    [created] =&gt; 1</span>
<span class="x">    [result] =&gt; created</span>
<span class="x">    [status] =&gt; 201</span>
<span class="x">)</span>
<span class="x">Array</span>
<span class="x">(</span>
<span class="x">    [took] =&gt; 0</span>
<span class="x">    [timed_out] =&gt;</span>
<span class="x">    [hits] =&gt; Array</span>
<span class="x">        (</span>
<span class="x">            [total] =&gt; 1</span>
<span class="x">            [hits] =&gt; Array</span>
<span class="x">                (</span>
<span class="x">                    [0] =&gt; Array</span>
<span class="x">                        (</span>
<span class="x">                            [_id] =&gt; 1</span>
<span class="x">                            [_score] =&gt; 1</span>
<span class="x">                            [_source] =&gt; Array</span>
<span class="x">                                (</span>
<span class="x">                                    [product_codes] =&gt; Array</span>
<span class="x">                                        (</span>
<span class="x">                                            [0] =&gt; 1</span>
<span class="x">                                            [1] =&gt; 2</span>
<span class="x">                                            [2] =&gt; 3</span>
<span class="x">                                            [3] =&gt; 4</span>
<span class="x">                                        )</span>

<span class="x">                                    [title] =&gt; first</span>
<span class="x">                                )</span>
<span class="x">                        )</span>
<span class="x">                )</span>
<span class="x">        )</span>
<span class="x">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">indexApi</span><span class="o">.</span><span class="n">insert</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="p">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;id&quot;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;doc&quot;</span><span class="p">:{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span><span class="s2">&quot;first&quot;</span><span class="p">,</span><span class="s2">&quot;product_codes&quot;</span><span class="p">:[</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">]}})</span>
<span class="n">searchApi</span><span class="o">.</span><span class="n">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="p">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="p">:{</span><span class="s2">&quot;match_all&quot;</span><span class="p">:{}}})</span>
</code></pre></div>


<!-- response Python -->


<div class="codehilite"><pre><span></span><code><span class="p">{</span><span class="s1">&#39;created&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
 <span class="s1">&#39;found&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
 <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="s1">&#39;products&#39;</span><span class="p">,</span>
 <span class="s1">&#39;result&#39;</span><span class="p">:</span> <span class="s1">&#39;created&#39;</span><span class="p">}</span>
<span class="p">{</span><span class="s1">&#39;hits&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;hits&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="sa">u</span><span class="s1">&#39;_id&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;1&#39;</span><span class="p">,</span>
                    <span class="sa">u</span><span class="s1">&#39;_score&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="sa">u</span><span class="s1">&#39;_source&#39;</span><span class="p">:</span> <span class="p">{</span><span class="sa">u</span><span class="s1">&#39;product_codes&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
                                 <span class="sa">u</span><span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="sa">u</span><span class="s1">&#39;first&#39;</span><span class="p">}}],</span>
          <span class="s1">&#39;total&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>
 <span class="s1">&#39;profile&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
 <span class="s1">&#39;timed_out&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
 <span class="s1">&#39;took&#39;</span><span class="p">:</span> <span class="mi">29</span><span class="p">}</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="k">await</span><span class="w"> </span><span class="nx">indexApi</span><span class="p">.</span><span class="nx">insert</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="o">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;id&quot;</span><span class="o">:</span><span class="mf">1</span><span class="p">,</span><span class="s2">&quot;doc&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="o">:</span><span class="s2">&quot;first&quot;</span><span class="p">,</span><span class="s2">&quot;product_codes&quot;</span><span class="o">:</span><span class="p">[</span><span class="mf">4</span><span class="p">,</span><span class="mf">2</span><span class="p">,</span><span class="mf">1</span><span class="p">,</span><span class="mf">3</span><span class="p">]}});</span>
<span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">searchApi</span><span class="p">.</span><span class="nx">search</span><span class="p">({</span><span class="s2">&quot;index&quot;</span><span class="o">:</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="s2">&quot;query&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;match_all&quot;</span><span class="o">:</span><span class="p">{}}});</span>
</code></pre></div>


<!-- response javascript -->


<div class="codehilite"><pre><span></span><code><span class="p">{</span><span class="s2">&quot;took&quot;</span><span class="o">:</span><span class="mf">0</span><span class="p">,</span><span class="s2">&quot;timed_out&quot;</span><span class="o">:</span><span class="kc">false</span><span class="p">,</span><span class="s2">&quot;hits&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;total&quot;</span><span class="o">:</span><span class="mf">1</span><span class="p">,</span><span class="s2">&quot;hits&quot;</span><span class="o">:</span><span class="p">[{</span><span class="s2">&quot;_id&quot;</span><span class="o">:</span><span class="s2">&quot;1&quot;</span><span class="p">,</span><span class="s2">&quot;_score&quot;</span><span class="o">:</span><span class="mf">1</span><span class="p">,</span><span class="s2">&quot;_source&quot;</span><span class="o">:</span><span class="p">{</span><span class="s2">&quot;product_codes&quot;</span><span class="o">:</span><span class="p">[</span><span class="mf">1</span><span class="p">,</span><span class="mf">2</span><span class="p">,</span><span class="mf">3</span><span class="p">,</span><span class="mf">4</span><span class="p">],</span><span class="s2">&quot;title&quot;</span><span class="o">:</span><span class="s2">&quot;first&quot;</span><span class="p">}}]}}</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">InsertDocumentRequest</span><span class="w"> </span><span class="n">newdoc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">InsertDocumentRequest</span><span class="p">();</span>
<span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="n">doc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">(){{</span>
<span class="w">    </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;title&quot;</span><span class="p">,</span><span class="s">&quot;first&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">put</span><span class="p">(</span><span class="s">&quot;product_codes&quot;</span><span class="p">,</span><span class="k">new</span><span class="w"> </span><span class="kt">int</span><span class="o">[]</span><span class="w"> </span><span class="p">{</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">});</span>
<span class="p">}};</span>
<span class="n">newdoc</span><span class="p">.</span><span class="na">index</span><span class="p">(</span><span class="s">&quot;products&quot;</span><span class="p">).</span><span class="na">id</span><span class="p">(</span><span class="mi">1L</span><span class="p">).</span><span class="na">setDoc</span><span class="p">(</span><span class="n">doc</span><span class="p">);</span>
<span class="n">sqlresult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">indexApi</span><span class="p">.</span><span class="na">insert</span><span class="p">(</span><span class="n">newdoc</span><span class="p">);</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="n">Object</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">query</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;match_all&quot;</span><span class="p">,</span><span class="kc">null</span><span class="p">);</span>
<span class="n">SearchRequest</span><span class="w"> </span><span class="n">searchRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SearchRequest</span><span class="p">();</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setIndex</span><span class="p">(</span><span class="s">&quot;products&quot;</span><span class="p">);</span>
<span class="n">searchRequest</span><span class="p">.</span><span class="na">setQuery</span><span class="p">(</span><span class="n">query</span><span class="p">);</span>
<span class="n">SearchResponse</span><span class="w"> </span><span class="n">searchResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchApi</span><span class="p">.</span><span class="na">search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">);</span>
<span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">searchResponse</span><span class="p">.</span><span class="na">toString</span><span class="p">()</span><span class="w"> </span><span class="p">);</span>
</code></pre></div>


<!-- response java -->


<div class="codehilite"><pre><span></span><code><span class="kd">class</span> <span class="nc">SearchResponse</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">took</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">timedOut</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">    </span><span class="n">hits</span><span class="p">:</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SearchResponseHits</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">total</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="n">hits</span><span class="p">:</span><span class="w"> </span><span class="o">[</span><span class="p">{</span><span class="n">_id</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">_score</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">_source</span><span class="o">=</span><span class="p">{</span><span class="n">product_codes</span><span class="o">=[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="o">]</span><span class="p">,</span><span class="w"> </span><span class="n">title</span><span class="o">=</span><span class="n">first</span><span class="p">}}</span><span class="o">]</span>
<span class="w">        </span><span class="n">aggregations</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">profile</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span>
<span class="p">}</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code><span class="nb nb-Type">Dictionary</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="nb nb-Type">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="n">doc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="nb nb-Type">Dictionary</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="nb nb-Type">Object</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">doc</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;first&quot;</span><span class="p">);</span>
<span class="n">doc</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="s2">&quot;product_codes&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="nb nb-Type">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">});</span>
<span class="n">InsertDocumentRequest</span><span class="w"> </span><span class="n">newdoc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">InsertDocumentRequest</span><span class="p">(</span><span class="n">index</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">doc</span><span class="p">:</span><span class="w"> </span><span class="n">doc</span><span class="p">);</span>
<span class="k">var</span><span class="w"> </span><span class="n">sqlresult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">indexApi</span><span class="o">.</span><span class="n">Insert</span><span class="p">(</span><span class="n">newdoc</span><span class="p">);</span>
<span class="n">object</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="n">new</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">match_all</span><span class="o">=</span><span class="nb nb-Type">null</span><span class="w"> </span><span class="p">};</span>
<span class="k">var</span><span class="w"> </span><span class="n">searchRequest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">SearchRequest</span><span class="p">(</span><span class="s2">&quot;products&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">query</span><span class="p">);</span>
<span class="k">var</span><span class="w"> </span><span class="n">searchResponse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchApi</span><span class="o">.</span><span class="n">Search</span><span class="p">(</span><span class="n">searchRequest</span><span class="p">);</span>
<span class="n">Console</span><span class="o">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">searchResponse</span><span class="o">.</span><span class="n">ToString</span><span class="p">())</span>
</code></pre></div>


<!-- response C# -->


<div class="codehilite"><pre><span></span><code><span class="n">class</span><span class="w"> </span><span class="n">SearchResponse</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nl">took:</span><span class="w"> </span><span class="mh">0</span>
<span class="w">    </span><span class="nl">timedOut:</span><span class="w"> </span><span class="n">false</span>
<span class="w">    </span><span class="nl">hits:</span><span class="w"> </span><span class="n">class</span><span class="w"> </span><span class="n">SearchResponseHits</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nl">total:</span><span class="w"> </span><span class="mh">1</span>
<span class="w">        </span><span class="nl">hits:</span><span class="w"> </span><span class="p">[{</span><span class="n">_id</span><span class="o">=</span><span class="mh">1</span><span class="p">,</span><span class="w"> </span><span class="n">_score</span><span class="o">=</span><span class="mh">1</span><span class="p">,</span><span class="w"> </span><span class="n">_source</span><span class="o">=</span><span class="p">{</span><span class="n">product_codes</span><span class="o">=</span><span class="p">[</span><span class="mh">1</span><span class="p">,</span><span class="w"> </span><span class="mh">2</span><span class="p">,</span><span class="w"> </span><span class="mh">3</span><span class="p">,</span><span class="w"> </span><span class="mh">4</span><span class="p">],</span><span class="w"> </span><span class="n">title</span><span class="o">=</span><span class="n">first</span><span class="p">}}]</span>
<span class="w">        </span><span class="nl">aggregations:</span><span class="w"> </span><span class="n">null</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="nl">profile:</span><span class="w"> </span><span class="n">null</span>
<span class="p">}</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<h2 id="multi-value-big-integer">Multi-value big integer</h2>
<!-- example for creating MVA64 -->

<p>A data type that allows storing variable-length lists of 64-bit signed integers. It has the same functionality as multi-value integer.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="k">values</span><span class="w"> </span><span class="n">multi64</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
JSON
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;CREATE TABLE products(title text, values multi64)&quot;</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">    &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">    &#39;values&#39;=&gt;[&#39;type&#39;=&gt;&#39;multi64&#39;]</span>
<span class="x">]);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, values multi64))&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, values multi64))&#39;</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, values multi64))&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, values multi64))&quot;);
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
config
</div>

<!-- request config -->


<div class="codehilite"><pre><span></span><code><span class="na">table products</span>
<span class="na">{</span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">    </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">products</span>

<span class="w">    </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">    </span><span class="na">stored_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>

<span class="w">    </span><span class="na">rt_attr_multi_64</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">values</span>
<span class="na">}</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<h2 id="columnar-attribute-properties">Columnar attribute properties</h2>
<p>When you use the columnar storage you can specify the following properties for the attributes.</p>
<!-- example fast_fetch -->
<h3 id="fast_fetch">fast_fetch</h3>
<p>By default, Manticore Columnar storage stores all attributes in a columnar fashion, as well as in a special docstore row by row. This enables fast execution of queries like <code>SELECT * FROM ...</code>, especially when fetching a large number of records at once. However, if you are sure that you do not need it or wish to save disk space, you can disable it by specifying <code>fast_fetch='0'</code> when creating a table or (if you are defining a table in a config) by using <code>columnar_no_fast_fetch</code> as shown in the following example.</p>
<!-- request RT mode -->

<div class="codehilite"><pre><span></span><code><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">t</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="nb">int</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="n">fast_fetch</span><span class="o">=</span><span class="s1">&#39;0&#39;</span><span class="p">)</span><span class="w"> </span><span class="n">engine</span><span class="o">=</span><span class="s1">&#39;columnar&#39;</span><span class="p">;</span><span class="w"> </span><span class="k">desc</span><span class="w"> </span><span class="n">t</span><span class="p">;</span>
</code></pre></div>

<!-- response RT mode -->

<div class="codehilite"><pre><span></span><code><span class="o">+</span><span class="c1">-------+--------+---------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">Field</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Type</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">Properties</span><span class="w">          </span><span class="o">|</span>
<span class="o">+</span><span class="c1">-------+--------+---------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="nb">bigint</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">columnar</span><span class="w"> </span><span class="n">fast_fetch</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">a</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">uint</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">columnar</span><span class="w"> </span><span class="n">fast_fetch</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">b</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">uint</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">columnar</span><span class="w">            </span><span class="o">|</span>
<span class="o">+</span><span class="c1">-------+--------+---------------------+</span>
<span class="mi">3</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>
</code></pre></div>

<!-- request Plain mode -->

<div class="codehilite"><pre><span></span><code><span class="na">source min {</span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">mysql</span>
<span class="w">    </span><span class="na">sql_host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">localhost</span>
<span class="w">    </span><span class="na">sql_user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">test</span>
<span class="w">    </span><span class="na">sql_pass</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="na">sql_db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">test</span>
<span class="w">    </span><span class="na">sql_query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">select 1, 1 a, 1 b</span>
<span class="w">    </span><span class="na">sql_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">a</span>
<span class="w">    </span><span class="na">sql_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">b</span>
<span class="na">}</span>

<span class="na">table tbl {</span>
<span class="w">    </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl/col</span>
<span class="w">    </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">min</span>
<span class="w">    </span><span class="na">columnar_attrs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">*</span>
<span class="w">    </span><span class="na">columnar_no_fast_fetch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">b</span>
<span class="na">}</span>
</code></pre></div>

<!-- response Plain mode -->

<div class="codehilite"><pre><span></span><code><span class="o">+</span><span class="c1">-------+--------+---------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">Field</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">Type</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">Properties</span><span class="w">          </span><span class="o">|</span>
<span class="o">+</span><span class="c1">-------+--------+---------------------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="nb">bigint</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">columnar</span><span class="w"> </span><span class="n">fast_fetch</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">a</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">uint</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">columnar</span><span class="w"> </span><span class="n">fast_fetch</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w"> </span><span class="n">b</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">uint</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">columnar</span><span class="w">            </span><span class="o">|</span>
<span class="o">+</span><span class="c1">-------+--------+---------------------+</span>
</code></pre></div>

<!-- end -->

</div>
</div>
<!-- proofread -->
        
    </section>
    
    <section class="chapter-section" id="toc-06.02-creating_a_local_table">
        <a class="chapter-link" href="#toc-06.02-creating_a_local_table"> ¶ 6.2</a>

        
        <h1 id="creating-a-local-table">Creating a local table</h1>
<p>In Manticore Search, there are two ways to manage tables:</p>
<h2 id="online-schema-management-rt-mode">Online schema management (RT mode)</h2>
<p>Real-time mode requires no table definition in the configuration file. However, the <a href="../20-server_settings.html#data_dir">data_dir</a> directive in the <code>searchd</code> section is mandatory. Index files are stored inside the <code>data_dir</code>.</p>
<p>Replication is only available in this mode.</p>
<p>You can use SQL commands such as <code>CREATE TABLE</code>, <code>ALTER TABLE</code> and <code>DROP TABLE</code> to create and modify table schema, and to drop it. This mode is particularly useful for <strong>real-time</strong> and <strong>percolate tables</strong>.</p>
<p>Table names are converted to lowercase when created.</p>
<h2 id="defining-table-schema-in-config-plain-mode">Defining table schema in config (Plain mode)</h2>
<p>In this mode, you can specify the table schema in the configuration file. Manticore reads this schema on startup and creates the table if it doesn't exist yet. This mode is particularly useful for <strong>plain tables</strong> that use data from an external storage.</p>
<p>To drop a table, remove it from the configuration file or remove the path setting and send a HUP signal to the server or restart it.</p>
<p>Table names are case-sensitive in this mode.</p>
<p>All table types are supported in this mode.</p>
<h2 id="table-types-and-modes">Table types and modes</h2>
<table>
<thead>
<tr>
<th>Table type</th>
<th>RT mode</th>
<th>Plain mode</th>
</tr>
</thead>
<tbody>
<tr>
<td>Real-time</td>
<td>supported</td>
<td>supported</td>
</tr>
<tr>
<td>Plain</td>
<td>not supported</td>
<td>supported</td>
</tr>
<tr>
<td>Percolate</td>
<td>supported</td>
<td>supported</td>
</tr>
<tr>
<td>Distributed</td>
<td>supported</td>
<td>supported</td>
</tr>
<tr>
<td>Template</td>
<td>not supported</td>
<td>supported</td>
</tr>
</tbody>
</table>
<!-- proofread -->
        
    </section>
    
    <section class="chapter-section" id="toc-06.02.01-realtime_table">
        <a class="chapter-link" href="#toc-06.02.01-realtime_table"> ¶ 6.2.1</a>

        
        <h1 id="real-time-table">Real-time table</h1>
<p>A <strong>real-time table</strong> is a main type of table in Manticore. It lets you add, update, and delete documents, and you can see these changes right away. You can set up a real-time Table in a configuration file or use commands like <code>CREATE</code>, <code>UPDATE</code>, <code>DELETE</code>, or <code>ALTER</code>.</p>
<p>Internally a real-time table consists of one or more <a href="../../06-creating_a_table.html#toc-06.02.02-plain_table">plain tables</a> called <strong>chunks</strong>. There are two kinds of chunks:</p>
<ul>
<li>multiple <strong>disk chunks</strong> - these are saved on a disk and are structured like a <a href="../../06-creating_a_table.html#toc-06.02.02-plain_table">plain table</a>.</li>
<li>single <strong>ram chunk</strong> - this is kept in memory and collects all changes.</li>
</ul>
<p>The size of the RAM chunk is controlled by the <a href="../../06-creating_a_table.html#rt_mem_limit">rt_mem_limit</a> setting. Once this limit is reached, the RAM chunk is transferred to disk as a disk chunk. If there are too many disk chunks, Manticore <a href="../../16-securing_and_compacting_a_table.html#number-of-optimized-disk-chunks">combines some of them</a> to improve performance.</p>
<h3 id="creating-a-real-time-table">Creating a real-time table:</h3>
<p>You can create a new real-time table in two ways: by using the <code>CREATE TABLE</code> command or through the <a href="../../06-creating_a_table.html#_mapping-api:">_mapping endpoint</a> of the HTTP JSON API.</p>
<h4 id="create-table-command">CREATE TABLE command:</h4>
<!-- example rt -->

<p>You can use this command via both SQL and HTTP protocols:</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
Creating a real-time table via SQL protocol
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">morphology</span><span class="o">=</span><span class="s1">&#39;stem_en&#39;</span><span class="p">;</span>
</code></pre></div>


<!-- response SQL -->


<div class="codehilite"><pre><span></span><code><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Creating a real-time table via JSON over HTTP
</div>
<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;CREATE TABLE products(title text, price float)  morphology=&#39;stem_en&#39;&quot;</span>
</code></pre></div>



<!-- response JSON -->


<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="nt">&quot;total&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<span class="nt">&quot;error&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="nt">&quot;warning&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span>
<span class="p">}</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Creating a real-time table via PHP client
</div>
<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">    &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">    &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;],</span>
<span class="x">]);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>
<!-- request Python -->

<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE forum(title text, price float)&#39;</span><span class="p">)</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request Javascript -->

<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE forum(title text, price float)&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Java
</div>
<!-- request Java -->

<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE forum(title text, price float)&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>
<!-- request C# -->

<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE forum(title text, price float)&quot;);
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Creating a real-time table via a configuration file
</div>
<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="w">  </span><span class="na">stored_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h4 id="_mapping-api">_mapping API:</h4>
<!-- example rt-mapping -->

<p>Alternatively, you can create a new table via the <code>_mapping</code> endpoint. This endpoint allows you to define an Elasticsearch-like table structure to be converted to a Manticore table.</p>
<p>The body of your request must have the following structure:</p>
<div class="codehilite"><pre><span></span><code><span class="s2">&quot;properties&quot;</span>
<span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;FIELD_NAME_1&quot;</span><span class="p">:</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FIELD_TYPE_1&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;FIELD_NAME_2&quot;</span><span class="p">:</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FIELD_TYPE_2&quot;</span>
<span class="w">  </span><span class="p">},</span>

<span class="w">  </span><span class="err">...</span>

<span class="w">  </span><span class="nt">&quot;FIELD_NAME_N&quot;</span><span class="p">:</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FIELD_TYPE_M&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>When creating a table, Elasticsearch data types will be mapped to Manticore types according to the following rules:<br />
-    aggregate_metric =&gt; json<br />
-    binary =&gt; string<br />
-    boolean =&gt; bool<br />
-    byte =&gt; int<br />
-    completion =&gt; string<br />
-    date =&gt; timestamp<br />
-    date_nanos =&gt; bigint<br />
-    date_range =&gt; json<br />
-    dense_vector =&gt; json<br />
-    flattened =&gt; json<br />
-    flat_object =&gt; json<br />
-    float =&gt; float<br />
-    float_range =&gt; json<br />
-    geo_point =&gt; json<br />
-    geo_shape =&gt; json<br />
-    half_float =&gt; float<br />
-    histogram =&gt; json<br />
-    integer =&gt; int<br />
-    integer_range =&gt; json<br />
-    ip =&gt; string<br />
-    ip_range =&gt; json<br />
-    keyword =&gt; string<br />
-    knn_vector =&gt; float_vector<br />
-    long =&gt; bigint<br />
-    long_range =&gt; json<br />
-    match_only_text =&gt; text<br />
-    object =&gt; json<br />
-    point =&gt; json<br />
-    scaled_float =&gt; float<br />
-    search_as_you_type =&gt; text<br />
-    shape =&gt; json<br />
-    short =&gt; int<br />
-    text =&gt; text<br />
-    unsigned_long =&gt; int<br />
-    version =&gt; string</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
Creating a real-time table via the _mapping endpoint
</div>
<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/your_</span><span class="kc">ta</span><span class="err">ble_</span><span class="kc">na</span><span class="err">me/_mappi</span><span class="kc">n</span><span class="err">g</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="err">&#39;</span>
<span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;test&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;mappings&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;price&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;float&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;text&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
<span class="err">&#39;</span>
</code></pre></div>



<!-- response JSON -->


<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="nt">&quot;total&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<span class="nt">&quot;error&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="nt">&quot;warning&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span>
<span class="p">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h3 id="what-you-can-do-with-a-real-time-table">👍 What you can do with a real-time table:</h3>
<ul>
<li><a href="../../12-data_creation_and_modification.html#toc-12.01.01-adding_documents_to_a_realtime_table">Add documents</a>.</li>
<li>Update attributes and full-text fields using the <a href="../../04-quick_start_guide.html#update">Update</a> process.</li>
<li><a href="../../04-quick_start_guide.html#delete">Delete documents</a>.</li>
<li><a href="../../09-emptying_a_table.html#toc-09-emptying_a_table">Empty the table</a>.</li>
<li>Change the schema online with the <code>ALTER</code> command, as explained in <a href="../../14-updating_table_schema_and_settings.html#updating-table-schema-in-rt-mode">Change schema online</a>.</li>
<li>Define the table in a configuration file, as detailed in <a href="../../06-creating_a_table.html#toc-06.02.01-realtime_table">Define table</a>.</li>
<li>Use the <a href="../../12-data_creation_and_modification.html#auto-id">UUID</a> feature for automatic ID provisioning.</li>
</ul>
<h3 id="what-you-cannot-do-with-a-real-time-table">⛔ What you cannot do with a real-time table:</h3>
<ul>
<li>Ingest data using the <a href="../../12-data_creation_and_modification.html#indexer-tool">indexer</a> feature.</li>
<li>Connect it to <a href="../../12-data_creation_and_modification.html#toc-12.02.02.03-execution_of_fetch_queries">sources</a> for easy indexing from external storage.</li>
<li>Update the <a href="../../06-creating_a_table.html#killlist_target">killlist_target</a>, as it is automatically managed by the real-time table.</li>
</ul>
<h4 id="real-time-table-files-structure">Real-time table files structure</h4>
<p>The following table outlines the different file extensions and their respective descriptions in a real-time table:</p>
<table>
<thead>
<tr>
<th>Extension</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>.lock</code></td>
<td>A lock file that ensures that only one process can access the table at a time.</td>
</tr>
<tr>
<td><code>.ram</code></td>
<td>The RAM chunk of the table, stored in memory and used as an accumulator of changes.</td>
</tr>
<tr>
<td><code>.meta</code></td>
<td>The headers of the real-time table that define its structure and settings.</td>
</tr>
<tr>
<td><code>.*.sp*</code></td>
<td>Disk chunks that are stored on disk with the same format as plain tables. They are created when the RAM chunk size exceeds the  rt_mem_limit.</td>
</tr>
</tbody>
</table>
<p>For more information on the structure of disk chunks, refer to the <a href="../../06-creating_a_table.html#plain-table-files-structure">plain table files structure</a>.</p>
<!-- proofread -->
        
    </section>
    
    <section class="chapter-section" id="toc-06.02.02-plain_table">
        <a class="chapter-link" href="#toc-06.02.02-plain_table"> ¶ 6.2.2</a>

        
        <h1 id="plain-table">Plain table</h1>
<p><strong>Plain table</strong> is a basic element for non-<a href="../../06-creating_a_table.html#toc-06.02.04-percolate_table">percolate</a> searching. It can be defined only in a configuration file using the <a href="../../06-creating_a_table.html#defining-table-schema-in-config-%28plain mode%29">Plain mode</a>, and is not supported in the <a href="../../06-creating_a_table.html#online-schema-management-%28rt-mode%29">RT mode</a>. It is typically used in conjunction with a <a href="../../06-creating_a_table.html#source">source</a> to process data <a href="../../12-data_creation_and_modification.html#toc-12.02.01-plain_tables_creation">from the external storage</a> and can later be <a href="../../12-data_creation_and_modification.html#toc-12.02.06.03-attaching_a_plain_table_to_rt_table">attached</a> to a <strong>real-time table</strong>.</p>
<h4 id="creating-a-plain-table">Creating a plain table</h4>
<p>To create a plain table, you'll need to define it in a configuration file. It's not supported by the  <code>CREATE TABLE</code> command.</p>
<!-- example plain -->

<p>Here's an example of a plain table configuration and a source for fetching data from a MySQL database:</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>
#### How to create a plain table

<!-- request Plain table example -->


<div class="codehilite"><pre><span></span><code><span class="na">source source {</span>
<span class="w">  </span><span class="na">type</span><span class="w">             </span><span class="o">=</span><span class="w"> </span><span class="s">mysql</span>
<span class="w">  </span><span class="na">sql_host</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s">localhost</span>
<span class="w">  </span><span class="na">sql_user</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s">myuser</span>
<span class="w">  </span><span class="na">sql_pass</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s">mypass</span>
<span class="w">  </span><span class="na">sql_db</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s">mydb</span>
<span class="w">  </span><span class="na">sql_query</span><span class="w">        </span><span class="o">=</span><span class="w"> </span><span class="s">SELECT id, title, description, category_id  from mytable</span>
<span class="w">  </span><span class="na">sql_attr_uint</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s">category_id</span>
<span class="w">  </span><span class="na">sql_field_string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w"> </span><span class="na">}</span>

<span class="na">table tbl {</span>
<span class="w">  </span><span class="na">type</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s">plain</span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">source</span>
<span class="w">  </span><span class="na">path</span><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="s">/path/to/table</span>
<span class="w"> </span><span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h3 id="what-you-can-do-with-a-plain-table">👍 What you can do with a plain table:</h3>
<ul>
<li>Build it from an external storage using a <a href="../../06-creating_a_table.html#source">source</a> and <a href="../../12-data_creation_and_modification.html#indexer-tool">indexer</a></li>
<li>Perform an in-place update of <a href="../../06-creating_a_table.html#toc-06.01.01-rowwise_and_columnar_attribute_storages">integer, float, string and MVA attribute</a></li>
<li><a href="../../12-data_creation_and_modification.html#killlist_target">Update</a> it's <code>killlist_target</code></li>
</ul>
<h3 id="what-you-cannot-do-with-a-plain-table">⛔ What you cannot do with a plain table:</h3>
<ul>
<li>Insert additional data into the table once it has been built</li>
<li>Delete data from the table</li>
<li>Create, delete, or alter the table schema online</li>
<li>Use <a href="../../12-data_creation_and_modification.html#auto-id">UUID</a> for automatic ID generation (data from external storage must include a unique identifier)</li>
</ul>
<p>Numeric attributes, including <a href="../../06-creating_a_table.html#multi-value-integer-%28mva%29">MVAs</a>, are the only elements that can be updated in a plain table. All other data in the table is immutable. If updates or new records are required, the table must be rebuilt. During the rebuilding process, the existing table remains available to serve requests, and a process called  <a href="../../12-data_creation_and_modification.html#toc-12.02.07-rotating_a_table">rotation</a> is performed when the new version is ready, bringing it online and discarding the old version.</p>
<h4 id="plain-table-building-performance">Plain table building performance</h4>
<p>The speed at which a plain table is indexed depends on several factors, including:</p>
<ul>
<li>Data source retrieval speed</li>
<li><a href="../../06-creating_a_table.html#toc-06.03.01-data_tokenization">Tokenization settings</a></li>
<li>The hardware specifications (such as CPU, RAM, and disk performance)</li>
</ul>
<h4 id="plain-table-building-scenarios">Plain table building scenarios</h4>
<h5 id="rebuild-fully-when-needed">Rebuild fully when needed</h5>
<p>For small data sets, the simplest option is to have a single plain table that is fully rebuilt as needed. This approach is acceptable when:</p>
<ul>
<li>The data in the table is not as fresh as the data in the source</li>
<li>The time it takes to build the table increases as the data set grows</li>
</ul>
<h5 id="maindelta-scenario">Main+delta scenario</h5>
<p>For larger data sets, a plain table can be used instead of a <a href="../../06-creating_a_table.html#toc-06.02.01-realtime_table">Real-Time</a>. The main+delta scenario involves:</p>
<ul>
<li>Creating a smaller table for incremental indexing</li>
<li>Combining the two tables using a <a href="../../06-creating_a_table.html#toc-06.04.01-creating_a_local_distributed_table">distributed table</a></li>
</ul>
<p>This approach allows for infrequent rebuilding of the larger table and more frequent processing of updates from the source. The smaller table can be rebuilt more often (e.g. every minute or even every few seconds).</p>
<p>However, as time goes on, the indexing duration for the smaller table will become too long, requiring a rebuild of the larger table and the emptying of the smaller one.</p>
<p>The main+delta schema is explained in detail in <a href="https://play.manticoresearch.com/maindelta/">this interactive course</a>.</p>
<p>The mechanism of <strong>kill list</strong> and <a href="../../06-creating_a_table.html#killlist_target">killlist_target</a> directive is used to ensure that documents from the current table take precedence over those from the other table.</p>
<p>For more information on this topic, see <a href="../../12-data_creation_and_modification.html#toc-12.02.05-maindelta_schema">here</a>.</p>
<h4 id="plain-table-files-structure">Plain table files structure</h4>
<p>The following table outlines the various file extensions used in a plain table and their respective descriptions:</p>
<table>
<thead>
<tr>
<th>Extension</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>.spa</code></td>
<td>stores document attributes in <a href="../../06-creating_a_table.html#row-wise-and-columnar-attribute-storages">row-wise mode</a></td>
</tr>
<tr>
<td><code>.spb</code></td>
<td>stores blob attributes in <a href="../../06-creating_a_table.html#row-wise-and-columnar-attribute-storages">row-wise mode</a>: strings, MVA, json</td>
</tr>
<tr>
<td><code>.spc</code></td>
<td>stores document attributes in <a href="../../06-creating_a_table.html#row-wise-and-columnar-attribute-storages">columnar mode</a></td>
</tr>
<tr>
<td><code>.spd</code></td>
<td>stores matching document ID lists for each word ID</td>
</tr>
<tr>
<td><code>.sph</code></td>
<td>stores table header information</td>
</tr>
<tr>
<td><code>.sphi</code></td>
<td>stores histograms of attribute values</td>
</tr>
<tr>
<td><code>.spi</code></td>
<td>stores word lists (word IDs and pointers to <code>.spd</code> file)</td>
</tr>
<tr>
<td><code>.spidx</code></td>
<td>stores secondary indexes data</td>
</tr>
<tr>
<td><code>.spk</code></td>
<td>stores kill-lists</td>
</tr>
<tr>
<td><code>.spl</code></td>
<td>lock file</td>
</tr>
<tr>
<td><code>.spm</code></td>
<td>stores a bitmap of killed documents</td>
</tr>
<tr>
<td><code>.spp</code></td>
<td>stores hit (aka posting, aka word occurrence) lists for each word ID</td>
</tr>
<tr>
<td><code>.spt</code></td>
<td>stores additional data structures to speed up lookups by document ids</td>
</tr>
<tr>
<td><code>.spe</code></td>
<td>stores skip-lists to speed up doc-list filtering</td>
</tr>
<tr>
<td><code>.spds</code></td>
<td>stores document texts</td>
</tr>
<tr>
<td><code>.tmp*</code></td>
<td>temporary files during index_settings_and_status</td>
</tr>
<tr>
<td><code>.new.sp*</code></td>
<td>new version of a plain table before rotation</td>
</tr>
<tr>
<td><code>.old.sp*</code></td>
<td>old version of a plain table after rotation</td>
</tr>
</tbody>
</table>
<!-- proofread -->
        
    </section>
    
    <section class="chapter-section" id="toc-06.02.03-plain_and_realtime_table_settings">
        <a class="chapter-link" href="#toc-06.02.03-plain_and_realtime_table_settings"> ¶ 6.2.3</a>

        
        <h1 id="plain-and-real-time-table-settings">Plain and real-time table settings</h1>
<!-- example config -->
<h2 id="defining-table-schema-in-a-configuration-file">Defining table schema in a configuration file</h2>
<div class="codehilite"><pre><span></span><code><span class="na">table &lt;index_name&gt;[</span><span class="o">:</span><span class="s">&lt;parent table name&gt;] {</span>
<span class="na">...</span>
<span class="na">}</span>
</code></pre></div>

<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
Example of a plain table in a configuration file
</div>
<!-- request Plain -->


<div class="codehilite"><pre><span></span><code><span class="na">table &lt;table name&gt; {</span>
<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">plain</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">/path/to/table</span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&lt;source_name&gt;</span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&lt;another source_name&gt;</span>
<span class="w">  </span><span class="k">[stored_fields = &lt;comma separated list of full-text fields that should be stored, all are stored by default, can be empty&gt;]</span>
<span class="na">}</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Example of a real-time table in a configuration file
</div>
<!-- request Real-time -->


<div class="codehilite"><pre><span></span><code><span class="na">table &lt;table name&gt; {</span>
<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">/path/to/table</span>

<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&lt;full-text field name&gt;</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&lt;another full-text field name&gt;</span>
<span class="w">  </span><span class="k">[rt_attr_uint = &lt;integer field name&gt;]</span>
<span class="w">  </span><span class="k">[rt_attr_uint = &lt;another integer field name, limit by N bits&gt;:N]</span>
<span class="w">  </span><span class="k">[rt_attr_bigint = &lt;bigint field name&gt;]</span>
<span class="w">  </span><span class="k">[rt_attr_bigint = &lt;another bigint field name&gt;]</span>
<span class="w">  </span><span class="k">[rt_attr_multi = &lt;multi-integer (MVA) field name&gt;]</span>
<span class="w">  </span><span class="k">[rt_attr_multi = &lt;another multi-integer (MVA) field name&gt;]</span>
<span class="w">  </span><span class="k">[rt_attr_multi_64 = &lt;multi-bigint (MVA) field name&gt;]</span>
<span class="w">  </span><span class="k">[rt_attr_multi_64 = &lt;another multi-bigint (MVA) field name&gt;]</span>
<span class="w">  </span><span class="k">[rt_attr_float = &lt;float field name&gt;]</span>
<span class="w">  </span><span class="k">[rt_attr_float = &lt;another float field name&gt;]</span>
<span class="w">  </span><span class="k">[rt_attr_float_vector = &lt;float vector field name&gt;]</span>
<span class="w">  </span><span class="k">[rt_attr_float_vector = &lt;another float vector field name&gt;]</span>
<span class="w">  </span><span class="k">[rt_attr_bool = &lt;boolean field name&gt;]</span>
<span class="w">  </span><span class="k">[rt_attr_bool = &lt;another boolean field name&gt;]</span>
<span class="w">  </span><span class="k">[rt_attr_string = &lt;string field name&gt;]</span>
<span class="w">  </span><span class="k">[rt_attr_string = &lt;another string field name&gt;]</span>
<span class="w">  </span><span class="k">[rt_attr_json = &lt;json field name&gt;]</span>
<span class="w">  </span><span class="k">[rt_attr_json = &lt;another json field name&gt;]</span>
<span class="w">  </span><span class="k">[rt_attr_timestamp = &lt;timestamp field name&gt;]</span>
<span class="w">  </span><span class="k">[rt_attr_timestamp = &lt;another timestamp field name&gt;]</span>

<span class="w">  </span><span class="k">[stored_fields = &lt;comma separated list of full-text fields that should be stored, all are stored by default, can be empty&gt;]</span>

<span class="w">  </span><span class="k">[rt_mem_limit = &lt;RAM chunk max size, default 128M&gt;]</span>
<span class="w">  </span><span class="k">[optimize_cutoff = &lt;max number of RT table disk chunks&gt;]</span>

<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h3 id="common-plain-and-real-time-tables-settings">Common plain and real-time tables settings</h3>
<h4 id="type">type</h4>
<div class="codehilite"><pre><span></span><code><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">plain</span>

<span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
</code></pre></div>

<p>Table type: "plain" or "rt" (real-time)</p>
<p>Value: <strong>plain</strong> (default), rt</p>
<h4 id="path">path</h4>
<div class="codehilite"><pre><span></span><code><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">path/to/table</span>
</code></pre></div>

<p>The path to where the table will be stored or located, either absolute or relative, without the extension.</p>
<p>Value: The path to the table, <strong>mandatory</strong></p>
<h4 id="stored_fields">stored_fields</h4>
<div class="codehilite"><pre><span></span><code><span class="na">stored_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title, content</span>
</code></pre></div>

<!-- example stored_fields -->

<p>By default, the original content of full-text fields is indexed and stored when a table is defined in a configuration file. This setting allows you to specify the fields that should have their original values stored.</p>
<p>Value: A comma-separated list of <strong>full-text</strong> fields that should be stored. An empty value (i.e. <code>stored_fields =</code> ) disables the storage of original values for all fields.</p>
<p>Note: In the case of a real-time table, the fields listed in <code>stored_fields</code> should also be declared as <a href="../../06-creating_a_table.html#rt_field">rt_field</a>.</p>
<p>Also, note that you don't need to list attributes in <code>stored_fields</code>, since their original values are stored anyway. <code>stored_fields</code> can only be used for full-text fields.</p>
<p>See also <a href="../../06-creating_a_table.html#docstore_block_size">docstore_block_size</a>, <a href="../../06-creating_a_table.html#docstore_compression">docstore_compression</a> for document storage compression options.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>

<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="nb">text</span><span class="w"> </span><span class="n">stored</span><span class="w"> </span><span class="n">indexed</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="nb">text</span><span class="w"> </span><span class="n">indexed</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span>
</code></pre></div>



<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, content text stored indexed, name text indexed, price float)&quot;</span>
</code></pre></div>



<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$params = [</span>
<span class="x">    &#39;body&#39; =&gt; [</span>
<span class="x">        &#39;columns&#39; =&gt; [</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;content&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;, &#39;options&#39; =&gt; [&#39;indexed&#39;, &#39;stored&#39;]],</span>
<span class="x">            &#39;name&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;, &#39;options&#39; =&gt; [&#39;indexed&#39;]],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ]</span>
<span class="x">    ],</span>
<span class="x">    &#39;index&#39; =&gt; &#39;products&#39;</span>
<span class="x">];</span>
<span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;create($params);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>
<!-- request Python -->

<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, content text stored indexed, name text indexed, price float)&#39;</span><span class="p">)</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request Javascript -->

<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, content text stored indexed, name text indexed, price float)&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Java
</div>
<!-- request Java -->

<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, content text stored indexed, name text indexed, price float)&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>
<!-- request C# -->

<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, content text stored indexed, name text indexed, price float)&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">stored_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title, content</span><span class="w"> </span><span class="c1"># we want to store only &quot;title&quot; and &quot;content&quot;, &quot;name&quot; shouldn&#39;t be stored</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">content</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">name</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h4 id="stored_only_fields">stored_only_fields</h4>
<div class="codehilite"><pre><span></span><code><span class="na">stored_only_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title,content</span>
</code></pre></div>

<p>List of fields that will be stored in the table, but not indexed. This setting works similarly to <a href="../../06-creating_a_table.html#stored_fields">stored_fields</a> except that when a field is specified in <code>stored_only_fields</code> t will only be stored, not indexed, and cannot be searched using full-text queries. It can only be retrieved in search results.</p>
<p>The value is a comma-separated list of fields that should be stored only, not indexed. By default, this value is empty. If a real-time table is being defined, the fields listed in <code>stored_only_fields</code> must also be declared as <a href="../../06-creating_a_table.html#rt_field">rt_field</a>.</p>
<p>Note also, that you don't need to list attributes in<code>stored_only_fields</code>,since their original values are stored anyway. If to compare <code>stored_only_fields</code>  to string attributes the former (stored field):</p>
<ul>
<li>is stored on disk and does not take up memory</li>
<li>is stored in a compressed format</li>
<li>can only be fetched, it cannot be used for sorting, filtering or grouping</li>
</ul>
<p>In contrast, the latter (string attribute):</p>
<ul>
<li>is stored on disk and in memory</li>
<li>is stored in an uncompressed format</li>
<li>can be used for sorting, grouping, filtering, and any other actions you want to take with attributes.</li>
</ul>
<h3 id="real-time-table-settings">Real-time table settings:</h3>
<h4 id="optimize_cutoff">optimize_cutoff</h4>
<p>The maximum number of disk chunks for the RT table. Learn more <a href="../../16-securing_and_compacting_a_table.html#number-of-optimized-disk-chunks">here</a>.</p>
<h4 id="rt_field">rt_field</h4>
<div class="codehilite"><pre><span></span><code><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">subject</span>
</code></pre></div>

<p>This field declaration determines the full-text fields that will be indexed. The field names must be unique, and the order is preserved. When inserting data, the field values must be in the same order as specified in the configuration.</p>
<p>This is a multi-value, optional field.</p>
<h4 id="rt_attr_uint">rt_attr_uint</h4>
<div class="codehilite"><pre><span></span><code><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">gid</span>
</code></pre></div>

<p>This declaration defines an unsigned integer attribute.</p>
<p>Value: the field name or field_name:N (where N is the maximum number of bits to keep).</p>
<h4 id="rt_attr_bigint">rt_attr_bigint</h4>
<div class="codehilite"><pre><span></span><code><span class="na">rt_attr_bigint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">gid</span>
</code></pre></div>

<p>This declaration defines a BIGINT attribute.</p>
<p>Value: field name, multiple records allowed.</p>
<h4 id="rt_attr_multi">rt_attr_multi</h4>
<div class="codehilite"><pre><span></span><code><span class="na">rt_attr_multi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tags</span>
</code></pre></div>

<p>Declares a multi-valued attribute (MVA) with unsigned 32-bit integer values.</p>
<p>Value: field name. Multiple records allowed.</p>
<h4 id="rt_attr_multi_64">rt_attr_multi_64</h4>
<div class="codehilite"><pre><span></span><code><span class="na">rt_attr_multi_64</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">wide_tags</span>
</code></pre></div>

<p>Declares a multi-valued attribute (MVA) with signed 64-bit BIGINT values.</p>
<p>Value: field name. Multiple records allowed.</p>
<h4 id="rt_attr_float">rt_attr_float</h4>
<div class="codehilite"><pre><span></span><code><span class="na">rt_attr_float</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">lat</span>
<span class="na">rt_attr_float</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">lon</span>
</code></pre></div>

<p>Declares floating point attributes with single precision, 32-bit IEEE 754 format.</p>
<p>Value: field name. Multiple records allowed.</p>
<h4 id="rt_attr_float_vector">rt_attr_float_vector</h4>
<div class="codehilite"><pre><span></span><code><span class="na">rt_attr_float_vector</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">image_vector</span>
</code></pre></div>

<p>Declares a vector of floating-point values.</p>
<p>Value: field name. Multiple records allowed.</p>
<h4 id="rt_attr_bool">rt_attr_bool</h4>
<div class="codehilite"><pre><span></span><code><span class="na">rt_attr_bool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">available</span>
</code></pre></div>

<p>Declares a boolean attribute with 1-bit unsigned integer values.</p>
<p>Value: field name.</p>
<h4 id="rt_attr_string">rt_attr_string</h4>
<div class="codehilite"><pre><span></span><code><span class="na">rt_attr_string</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
</code></pre></div>

<p>String attribute declaration.</p>
<p>Value: field name.</p>
<h4 id="rt_attr_json">rt_attr_json</h4>
<div class="codehilite"><pre><span></span><code><span class="na">rt_attr_json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">properties</span>
</code></pre></div>

<p>Declares a JSON attribute.</p>
<p>Value: field name.</p>
<h4 id="rt_attr_timestamp">rt_attr_timestamp</h4>
<div class="codehilite"><pre><span></span><code><span class="na">rt_attr_timestamp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">date_added</span>
</code></pre></div>

<p>Declares a timestamp attribute.</p>
<p>Value: field name.</p>
<h4 id="rt_mem_limit">rt_mem_limit</h4>
<div class="codehilite"><pre><span></span><code><span class="na">rt_mem_limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">512M</span>
</code></pre></div>

<p>Memory limit for a RAM chunk of the table. Optional, default is 128M.</p>
<p>RT tables store some data in memory, known as the "RAM chunk," and also maintain a number of on-disk tables, referred to as "disk chunks." This directive allows you to control the size of the RAM chunk. When there is too much data to keep in memory, RT tables will flush it to disk, activate a newly created disk chunk, and reset the RAM chunk.</p>
<p>Please note that the limit is strict, and RT tables will never allocate more memory than what is specified in the rt_mem_limit. Additionally, memory is not preallocated, so specifying a 512MB limit and only inserting 3MB of data will result in allocating only 3MB, not 512MB.</p>
<p>The <code>rt_mem_limit</code> is never exceeded, but the actual RAM chunk size can be significantly lower than the limit. RT tables adapt to the data insertion pace and adjust the actual limit dynamically to minimize memory usage and maximize data write speed. This is how it works:</p>
<ul>
<li>By default, the RAM chunk size is 50% of the  <code>rt_mem_limit</code>, referred to as the  "<code>rt_mem_limit</code>".</li>
<li>As soon as the RAM chunk accumulates data equivalent to <code>rt_mem_limit * rate</code> data (50% of <code>rt_mem_limit</code>  by default), Manticore starts saving the RAM chunk as a new disk chunk.</li>
<li>While a new disk chunk is being saved, Manticore assesses the number of new/updated documents.</li>
<li>After saving a new disk chunk, the <code>rt_mem_limit</code> rate is updated.</li>
<li>The rate is reset to 50% each time you restart the searchd.</li>
</ul>
<p>For instance, if 90MB of data is saved to a disk chunk and an additional 10MB of data arrives while the save is in progress, the rate would be 90%. Next time, the RT table will collect up to 90% of <code>rt_mem_limit</code> before flushing the data. The faster the insertion pace, the lower the <code>rt_mem_limit</code> rate. The rate varies between 33.3% to 95%. You can view the current rate of a table using the <a href="../../19-node_info_and_management.html#toc-19.10.01-show_table_status">SHOW TABLE <tbl> STATUS</a> command.</p>
<h5 id="how-to-change-rt_mem_limit-and-optimize_cutoff">How to change rt_mem_limit and optimize_cutoff</h5>
<p>In real-time mode, you can adjust the size limit of RAM chunks and the maximum number of disk chunks using the <code>ALTER TABLE</code> statement. To set <code>rt_mem_limit</code> to 1 gigabyte for the table "t," run the following query: <code>ALTER TABLE t rt_mem_limit='1G'</code>. To change the maximum number of disk chunks, run the query: <code>ALTER TABLE t optimize_cutoff='5'</code>.</p>
<p>In the plain mode, you can change the values of <code>rt_mem_limit</code> and <code>optimize_cutoff</code> by updating the table configuration or running the command <code>ALTER TABLE &lt;index_name&gt; RECONFIGURE</code></p>
<h5 id="important-notes-about-ram-chunks">Important notes about RAM chunks</h5>
<ul>
<li>Real-time tables are similar to <a href="../../06-creating_a_table.html#creating-a-local-distributed-table">distributed</a> consisting of multiple local tables, also known as disk chunks.</li>
<li>Each RAM chunk is made up of multiple segments, which are special RAM-only tables.</li>
<li>While disk chunks are stored on disk, RAM chunks are stored in memory.</li>
<li>Each transaction made to a real-time table generates a new segment, and RAM chunk segments are merged after each transaction commit. It is more efficient to perform bulk INSERTs of hundreds or thousands of documents rather than multiple separate INSERTs with one document to reduce the overhead from merging RAM chunk segments.</li>
<li>When the number of segments exceeds 32, they will be merged to keep the count below 32. </li>
<li>Real-time tables always have one RAM chunk (which may be empty) and one or more disk chunks. </li>
<li>Merging larger segments takes longer, so it's best to avoid having a very large RAM chunk (and therefore <code>rt_mem_limit</code>).</li>
<li>The number of disk chunks depends on the data in the table and the <code>rt_mem_limit</code> setting.</li>
<li>Searchd flushes the RAM chunk to disk (as a persisted file, not as a disk chunk) on shutdown and periodically according to the <a href="../../20-server_settings.html#rt_flush_period">rt_flush_period</a> setting. Flushing several gigabytes to disk may take some time.</li>
<li>A large RAM chunk puts more pressure on storage, both when flushing to disk into the <code>.ram</code> file and when the RAM chunk is full and dumped to disk as a disk chunk.</li>
<li>The RAM chunk is backed up by a <a href="../../18-logging.html#toc-18.03-binary_logging">binary log</a> until it is flushed to disk, and a larger <code>rt_mem_limit</code>, setting will increase the time it takes to replay the binary log and recover the RAM chunk.</li>
<li>The RAM chunk may be slightly slower than a disk chunk.</li>
<li>Although the RAM chunk itself doesn't take up more memory than <code>rt_mem_limit</code> Manticore may take up more memory in some cases, such as when you start a transaction to insert data and don't commit it for a while. In this case, the data you have already transmitted within the transaction will remain in memory.</li>
</ul>
<h3 id="plain-table-settings">Plain table settings:</h3>
<h4 id="source">source</h4>
<div class="codehilite"><pre><span></span><code><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">srcpart1</span>
<span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">srcpart2</span>
<span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">srcpart3</span>
</code></pre></div>

<p>The source field specifies the source from which documents will be obtained during indexing of the current table. There must be at least one source. The sources can be of different types (e.g. one could be MySQL, another PostgreSQL). For more information on indexing from external storages, <a href="../../12-data_creation_and_modification.html#toc-12.02.01-plain_tables_creation">indexing from external storages here</a></p>
<p>Value: The name of the source is <strong>mandatory</strong>. Multiple values are allowed.</p>
<h4 id="killlist_target">killlist_target</h4>
<div class="codehilite"><pre><span></span><code><span class="na">killlist_target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">main:kl</span>
</code></pre></div>

<p>This setting determines the table(s) to which the kill-list will be applied. Matches in the targeted table that are updated or deleted in the current table will be suppressed. In <code>:kl</code> mode, the documents to suppress are taken from the <a href="../../12-data_creation_and_modification.html#toc-12.02.06.02-killlists_in_plain_tables">kill-list</a>. In <code>:id</code> mode, all document IDs from the current table are suppressed in the targeted one. If neither is specified, both modes will take effect. <a href="../../12-data_creation_and_modification.html#toc-12.02.06.02-killlists_in_plain_tables">Learn more about kill-lists here</a></p>
<p>Value: <strong>not specified</strong> (default), target_index_name:kl, target_index_name:id, target_index_name. Multiple values are allowed</p>
<h4 id="columnar_attrs">columnar_attrs</h4>
<div class="codehilite"><pre><span></span><code><span class="na">columnar_attrs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">*</span>
<span class="na">columnar_attrs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">id, attr1, attr2, attr3</span>
</code></pre></div>

<p>This configuration setting determines which attributes should be stored in <a href="../../06-creating_a_table.html#row-wise-and-columnar-attribute-storages">the columnar storage</a> instead of the row-wise storage.</p>
<p>You can set <code>columnar_attrs = *</code> to store all supported data types in the columnar storage.</p>
<p>Additionally, <code>id</code> is a supported attribute to store in the columnar storage.</p>
<h4 id="columnar_strings_no_hash">columnar_strings_no_hash</h4>
<div class="codehilite"><pre><span></span><code><span class="na">columnar_strings_no_hash</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">attr1, attr2, attr3</span>
</code></pre></div>

<p>By default, all string attributes stored in columnar storage store pre-calculated hashes. These hashes are used for grouping and filtering. However, they occupy extra space, and if you don't need to group by that attribute, you can save space by disabling hash generation.</p>
<h3 id="creating-a-real-time-table-online-via-create-table">Creating a real-time table online via CREATE TABLE</h3>
<!-- example rt_mode -->

<div class='item-select'>
General syntax of CREATE TABLE
</div>

<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="p">[</span><span class="k">IF</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">EXISTS</span><span class="p">]</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="o">&lt;</span><span class="n">field</span><span class="w"> </span><span class="n">name</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&lt;</span><span class="n">field</span><span class="w"> </span><span class="k">data</span><span class="w"> </span><span class="k">type</span><span class="o">&gt;</span><span class="w"> </span><span class="p">[</span><span class="k">data</span><span class="w"> </span><span class="k">type</span><span class="w"> </span><span class="k">options</span><span class="p">]</span><span class="w"> </span><span class="p">[,</span><span class="w"> </span><span class="p">...])</span><span class="w"> </span><span class="p">[</span><span class="n">table_options</span><span class="p">]</span>
</code></pre></div>

<div class='item-select'>
Data types
</div>

<p>For more information on data types, see <a href="../../06-creating_a_table.html#toc-06.01.01-rowwise_and_columnar_attribute_storages">more about data types here</a>.</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Equivalent in a configuration file</th>
<th>Notes</th>
<th>Aliases</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="../../06-creating_a_table.html#text">text</a></td>
<td><a href="../../06-creating_a_table.html#rt_field">rt_field</a></td>
<td>Options: indexed, stored. Default: <strong>both</strong>. To keep text stored, but indexed, specify "stored" only. To keep text indexed only, specify "indexed" only.</td>
<td>string</td>
</tr>
<tr>
<td><a href="../../06-creating_a_table.html#integer">integer</a></td>
<td><a href="../../06-creating_a_table.html#rt_attr_uint">rt_attr_uint</a></td>
<td>integer</td>
<td>int, uint</td>
</tr>
<tr>
<td><a href="../../06-creating_a_table.html#big-integer">bigint</a></td>
<td><a href="../../06-creating_a_table.html#rt_attr_bigint">rt_attr_bigint</a></td>
<td>big integer</td>
<td></td>
</tr>
<tr>
<td><a href="../../06-creating_a_table.html#float">float</a></td>
<td><a href="../../06-creating_a_table.html#rt_attr_float">rt_attr_float</a></td>
<td>float</td>
<td></td>
</tr>
<tr>
<td><a href="../../06-creating_a_table.html#float-vector">float_vector</a></td>
<td><a href="../../06-creating_a_table.html#rt_attr_float_vector">rt_attr_float_vector</a></td>
<td>a vector of float values</td>
<td></td>
</tr>
<tr>
<td><a href="../../06-creating_a_table.html#multi-value-integer-%28mva%29">multi</a></td>
<td><a href="../../06-creating_a_table.html#rt_attr_multi">rt_attr_multi</a></td>
<td>multi-integer</td>
<td></td>
</tr>
<tr>
<td><a href="../../06-creating_a_table.html#multi-value-big-integer">multi64</a></td>
<td><a href="../../06-creating_a_table.html#rt_attr_multi_64">rt_attr_multi_64</a></td>
<td>multi-bigint</td>
<td></td>
</tr>
<tr>
<td><a href="../../06-creating_a_table.html#boolean">bool</a></td>
<td><a href="../../06-creating_a_table.html#rt_attr_bool">rt_attr_bool</a></td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td><a href="../../06-creating_a_table.html#json">json</a></td>
<td><a href="../../06-creating_a_table.html#rt_attr_json">rt_attr_json</a></td>
<td>JSON</td>
<td></td>
</tr>
<tr>
<td><a href="../../06-creating_a_table.html#string">string</a></td>
<td><a href="../../06-creating_a_table.html#rt_attr_string">rt_attr_string</a></td>
<td>string. Option <code>indexed, attribute</code> will make the value full-text indexed and filterable, sortable and groupable at the same time</td>
<td></td>
</tr>
<tr>
<td><a href="../../06-creating_a_table.html#timestamps">timestamp</a></td>
<td><a href="../../06-creating_a_table.html#rt_attr_timestamp">rt_attr_timestamp</a></td>
<td>timestamp</td>
<td></td>
</tr>
<tr>
<td><a href="../../06-creating_a_table.html#integer">bit(n)</a></td>
<td><a href="../../06-creating_a_table.html#rt_attr_uint">rt_attr_uint field_name:N</a></td>
<td>N is the max number of bits to keep</td>
<td></td>
</tr>
</tbody>
</table>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
Examples of creating a real-time table via CREATE TABLE
</div>
<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">morphology</span><span class="o">=</span><span class="s1">&#39;stem_en&#39;</span>
</code></pre></div>



This creates the "products" table with two fields: "title" (full-text) and "price" (float), and sets the "morphology" to "stem_en".


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="w"> </span><span class="n">indexed</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="nb">text</span><span class="w"> </span><span class="n">stored</span><span class="p">,</span><span class="w"> </span><span class="n">author</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span>
</code></pre></div>


This creates the "products" table with three fields:

* "title" is indexed, but not stored.
* "description" is stored, but not indexed.
* "author" is both stored and indexed.
<!-- end -->

</div>

</div>

<h2 id="engine">Engine</h2>
<div class="codehilite"><pre><span></span><code><span class="na">create table ... engine</span><span class="o">=</span><span class="s">&#39;columnar&#39;</span><span class="c1">;</span>
<span class="na">create table ... engine</span><span class="o">=</span><span class="s">&#39;rowwise&#39;</span><span class="c1">;</span>
</code></pre></div>

<p>The engine setting changes the default <a href="../../06-creating_a_table.html#row-wise-and-columnar-attribute-storages">attribute storage</a> for all attributes in the table. You can also specify <code>engine</code> <a href="../../06-creating_a_table.html#how-to-switch-between-the-storages">separately for each attribute</a>.</p>
<p>For information on how to enable columnar storage for a plain table, see  <a href="../../06-creating_a_table.html#columnar_attrs">columnar_attrs</a> .</p>
<p>Values:</p>
<ul>
<li>columnar - Enables columnar storage for all table attributes, except for <a href="../../06-creating_a_table.html#json">json</a></li>
<li><strong>rowwise (default)</strong> - Doesn't change anything and uses the traditional row-wise storage for the table.</li>
</ul>
<h2 id="other-settings">Other settings</h2>
<p>The following settings are applicable for both real-time and plain tables, regardless of whether they are specified in a configuration file or set online using the <code>CREATE</code> or <code>ALTER</code> command.</p>
<h3 id="performance-related">Performance related</h3>
<h4 id="accessing-table-files">Accessing table files</h4>
<p>Manticore supports two access modes for reading table data: seek+read and mmap.</p>
<p>In seek+read mode, the server uses the <code>pread</code> system call to read document lists and keyword positions, represented by the<code>*.spd</code> and <code>*.spp</code>  files. The server uses internal read buffers to optimize the reading process, and the size of these buffers can be adjusted using the options <a href="../../20-server_settings.html#read_buffer_docs">read_buffer_docs</a> and <a href="../../20-server_settings.html#read_buffer_hits">read_buffer_hits</a>.There is also the option  <a href="../../06-creating_a_table.html#preopen">preopen</a> that controls how Manticore opens files at start.</p>
<p>In mmap access mode, the search server maps the table's file into memory using the <code>mmap</code> system call, and the OS caches the file contents. The options <a href="../../20-server_settings.html#read_buffer_docs">read_buffer_docs</a> and <a href="../../20-server_settings.html#read_buffer_hits">read_buffer_hits</a> have no effect for corresponding files in this mode. The mmap reader can also lock the table's data in memory using the<code>mlock</code> privileged call, which prevents the OS from swapping the cached data out to disk.</p>
<p>To control which access mode to use, the options <strong>access_plain_attrs</strong>, <strong>access_blob_attrs</strong>, <strong>access_doclists</strong>, <strong>access_hitlists</strong> and <strong>access_dict</strong>  are available, with the following values:</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>file</td>
<td>server reads the table files from disk with seek+read using internal buffers on file access</td>
</tr>
<tr>
<td>mmap</td>
<td>server maps the table files into memory and OS caches up its contents on file access</td>
</tr>
<tr>
<td>mmap_preread</td>
<td>server maps the table files into memory and a background thread reads it once to warm up the cache</td>
</tr>
<tr>
<td>mlock</td>
<td>server maps the table files into memory and then executes the mlock() system call to cache up the file contents and lock it into memory to prevent it being swapped out</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Values</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>access_plain_attrs</td>
<td>mmap, <strong>mmap_preread</strong> (default), mlock</td>
<td>controls how <code>*.spa</code> (plain attributes) <code>*.spe</code> (skip lists) <code>*.spt</code> (lookups) <code>*.spm</code> (killed docs) will be read</td>
</tr>
<tr>
<td>access_blob_attrs</td>
<td>mmap, <strong>mmap_preread</strong> (default), mlock</td>
<td>controls how <code>*.spb</code> (blob attributes) (string, mva and json attributes) will be read</td>
</tr>
<tr>
<td>access_doclists</td>
<td><strong>file</strong> (default), mmap, mlock</td>
<td>controls how <code>*.spd</code> (doc lists) data will be read</td>
</tr>
<tr>
<td>access_hitlists</td>
<td><strong>file</strong> (default), mmap, mlock</td>
<td>controls how <code>*.spp</code> (hit lists) data will be read</td>
</tr>
<tr>
<td>access_dict</td>
<td>mmap, <strong>mmap_preread</strong> (default), mlock</td>
<td>controls how <code>*.spi</code> (dictionary) will be read</td>
</tr>
</tbody>
</table>
<p>Here is a table which can help you select your desired mode:</p>
<table>
<thead>
<tr>
<th>table part</th>
<th>keep it on disk</th>
<th>keep it in memory</th>
<th>cached in memory on server start</th>
<th>lock it in memory</th>
</tr>
</thead>
<tbody>
<tr>
<td>plain attributes in <a href="../../06-creating_a_table.html#row-wise-and-columnar-attribute-storages">row-wise</a> (non-columnar) storage, skip lists, word lists, lookups, killed docs</td>
<td>mmap</td>
<td>mmap</td>
<td><strong>mmap_preread</strong> (default)</td>
<td>mlock</td>
</tr>
<tr>
<td>row-wise string, multi-value attributes (MVA) and json attributes</td>
<td>mmap</td>
<td>mmap</td>
<td><strong>mmap_preread</strong> (default)</td>
<td>mlock</td>
</tr>
<tr>
<td><a href="../../06-creating_a_table.html#row-wise-and-columnar-attribute-storages">columnar</a> numeric, string and multi-value attributes</td>
<td>always</td>
<td>only by means of OS</td>
<td>no</td>
<td>not supported</td>
</tr>
<tr>
<td>doc lists</td>
<td><strong>file</strong> (default)</td>
<td>mmap</td>
<td>no</td>
<td>mlock</td>
</tr>
<tr>
<td>hit lists</td>
<td><strong>file</strong> (default)</td>
<td>mmap</td>
<td>no</td>
<td>mlock</td>
</tr>
<tr>
<td>dictionary</td>
<td>mmap</td>
<td>mmap</td>
<td><strong>mmap_preread</strong> (default)</td>
<td>mlock</td>
</tr>
</tbody>
</table>
<h5 id="the-recommendations-are">The recommendations are:</h5>
<ul>
<li>For the <strong>fastest search response time</strong> and ample memory availability, use <a href="../../06-creating_a_table.html#json">row-wise</a> attributes and lock them in memory using <code>mlock</code>. Additionally, use mlock for doclists/hitlists.</li>
<li>If you prioritize <strong>can't afford lower performance after start</strong> and are willing to sacrifice longer startup time, use the <a href="../../05-starting_the_server.html#searchd-command-line-options">--force-preread</a>. option. If you desire faster searchd restart, stick to the default  <code>mmap_preread</code> option.</li>
<li>If you are looking to <strong>conserve memory</strong>, while still having enough memory for all attributes, skip the use of <code>mlock</code>. The operating system will determine what should be kept in memory based on frequent disk reads.</li>
<li>If row-wise attributes  <strong>do not fit into memory</strong>, opt for <a href="../../06-creating_a_table.html#row-wise-and-columnar-attribute-storages">columnar attributes</a></li>
<li>If full-text search <strong>performance is not a concern</strong>, and you wish to save memory, use <code>access_doclists/access_hitlists=file</code></li>
</ul>
<p>The default mode offers a balance of:</p>
<ul>
<li>mmap,</li>
<li>Prereading non-columnar attributes,</li>
<li>Seeking and reading columnar attributes with no preread,</li>
<li>Seeking and reading doclists/hitlists with no preread.</li>
</ul>
<p>This provides a decent search performance, optimal memory utilization, and faster searchd restart in most scenarios.</p>
<h3 id="other-performance-related-settings">Other performance related settings</h3>
<h4 id="attr_update_reserve">attr_update_reserve</h4>
<div class="codehilite"><pre><span></span><code><span class="na">attr_update_reserve</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">256k</span>
</code></pre></div>

<p>This setting reserves extra space for updates to blob attributes such as multi-value attributes (MVA), strings, and JSON. The default value is 128k. When updating these attributes, their length may change. If the updated string is shorter than the previous one, it will overwrite the old data in the <code>*.spb</code> file. If the updated string is longer, it will be written to the end of the <code>*.spb</code> file. This file is memory-mapped, making resizing it a potentially slow process, depending on the operating system's memory-mapped file implementation. To avoid frequent resizing, you can use this setting to reserve extra space at the end of the .spb file.</p>
<p>Value: size, default <strong>128k</strong>.</p>
<h4 id="docstore_block_size">docstore_block_size</h4>
<div class="codehilite"><pre><span></span><code><span class="na">docstore_block_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">32k</span>
</code></pre></div>

<p>This setting controls the size of blocks used by the document storage. The default value is 16kb. When original document text is stored using stored_fields or stored_only_fields, it is stored within the table and compressed for efficiency. To optimize disk access and compression ratios for small documents, these documents are concatenated into blocks. The indexing process collects documents until their total size reaches the threshold specified by this option. At that point, the block of documents is compressed. This option can be adjusted to achieve better compression ratios (by increasing the block size) or faster access to document text (by decreasing the block size).</p>
<p>Value: size, default <strong>16k</strong>.</p>
<h4 id="docstore_compression">docstore_compression</h4>
<div class="codehilite"><pre><span></span><code><span class="na">docstore_compression</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">lz4hc</span>
</code></pre></div>

<p>This setting determines the type of compression used for compressing blocks of documents stored in document storage. If stored_fields or stored_only_fields are specified, the document storage stores compressed document blocks. 'lz4' offers fast compression and decompression speeds, while 'lz4hc' (high compression) sacrifices some compression speed for a better compression ratio. 'none' disables compression completely.</p>
<p>Values: <strong>lz4</strong> (default), lz4hc, none.</p>
<h4 id="docstore_compression_level">docstore_compression_level</h4>
<div class="codehilite"><pre><span></span><code><span class="na">docstore_compression_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">12</span>
</code></pre></div>

<p>The compression level used when 'lz4hc' compression is applied in document storage. By adjusting the compression level, you can find the right balance between performance and compression ratio when using 'lz4hc' compression. Note that this option is not applicable when using 'lz4' compression.</p>
<p>Value: An integer between 1 and 12, with a default of <strong>9</strong>.</p>
<h4 id="preopen">preopen</h4>
<div class="codehilite"><pre><span></span><code><span class="na">preopen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1</span>
</code></pre></div>

<p>This setting indicates that searchd should open all table files on startup or rotation, and keep them open while running. By default, the files are not pre-opened. Pre-opened tables require a few file descriptors per table, but they eliminate the need for per-query open() calls and are immune to race conditions that might occur during table rotation under high load. However, if you are serving many tables, it may still be more efficient to open them on a per-query basis in order to conserve file descriptors.</p>
<p>Value: <strong>0</strong> (default), or 1.</p>
<h4 id="read_buffer_docs">read_buffer_docs</h4>
<div class="codehilite"><pre><span></span><code><span class="na">read_buffer_docs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1M</span>
</code></pre></div>

<p>Buffer size for storing the list of documents per keyword. Increasing this value will result in higher memory usage during query execution, but may reduce I/O time.</p>
<p>Value: size, default <strong>256k</strong>, minimum value is 8k.</p>
<h4 id="read_buffer_hits">read_buffer_hits</h4>
<div class="codehilite"><pre><span></span><code><span class="na">read_buffer_hits</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1M</span>
</code></pre></div>

<p>Buffer size for storing the list of hits per keyword. Increasing this value will result in higher memory usage during query execution, but may reduce I/O time.</p>
<p>Value: size, default <strong>256k</strong>, minimum value is 8k.</p>
<h3 id="plain-table-disk-footprint-settings">Plain table disk footprint settings</h3>
<h4 id="inplace_enable">inplace_enable</h4>
<!-- example inplace_enable -->

<div class="codehilite"><pre><span></span><code><span class="na">inplace_enable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">{0|1}</span>
</code></pre></div>

<p>Enables in-place table inversion. Optional, default is 0 (uses separate temporary files).</p>
<p>The <code>inplace_enable</code> option reduces the disk footprint during indexing of plain tables, while slightly slowing down indexing (it uses approximately 2 times less disk, but yields around 90-95% of the original performance).</p>
<p>Indexing is comprised of two primary phases. During the first phase, documents are collected, processed, and partially sorted by keyword, and the intermediate results are written to temporary files (.tmp*). During the second phase, the documents are fully sorted and the final table files are created. Rebuilding a production table on-the-fly requires approximately 3 times the peak disk footprint: first for the intermediate temporary files, second for the newly constructed copy, and third for the old table that will be serving production queries in the meantime. (Intermediate data is comparable in size to the final table.) This may be too much disk footprint for large data collections, and the <code>inplace_enable</code> option can be used to reduce it. When enabled, it reuses the temporary files, outputs the final data back to them, and renames them upon completion. However, this may require additional temporary data chunk relocation, which is where the performance impact comes from.</p>
<p>This directive has no effect on <a href="../../05-starting_the_server.html#toc-05.02-manually">searchd</a>, it only affects the <a href="../../12-data_creation_and_modification.html#indexer-tool">indexer</a>.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
CONFIG
</div>

<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">inplace_enable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1</span>

<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">products</span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">src_base</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h4 id="inplace_hit_gap">inplace_hit_gap</h4>
<!-- example inplace_hit_gap -->

<div class="codehilite"><pre><span></span><code><span class="na">inplace_hit_gap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">size</span>
</code></pre></div>

<p>The option <a href="../../06-creating_a_table.html#inplace_enable">In-place inversion</a> fine-tuning option. Controls preallocated hitlist gap size. Optional, default is 0.</p>
<p>This directive only affects the <a href="../../05-starting_the_server.html#toc-05.02-manually">searchd</a> tool, and does not have any impact on the  <a href="../../12-data_creation_and_modification.html#indexer-tool">indexer</a>.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
CONFIG
</div>

<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">inplace_hit_gap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1M</span>
<span class="w">  </span><span class="na">inplace_enable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1</span>

<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">products</span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">src_base</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h4 id="inplace_reloc_factor">inplace_reloc_factor</h4>
<!-- example inplace_reloc_factor -->

<div class="codehilite"><pre><span></span><code><span class="na">inplace_reloc_factor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0.1</span>
</code></pre></div>

<p>The inplace_reloc_factor setting determines the size of the relocation buffer within the memory arena used during indexing. The default value is 0.1. </p>
<p>This option is optional and only affects the <a href="../../12-data_creation_and_modification.html#indexer-tool">indexer</a> tool, not the <a href="../../05-starting_the_server.html#toc-05.02-manually">searchd</a>  server.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
CONFIG
</div>

<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">inplace_reloc_factor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0.1</span>
<span class="w">  </span><span class="na">inplace_enable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1</span>

<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">products</span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">src_base</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h4 id="inplace_write_factor">inplace_write_factor</h4>
<!-- example inplace_write_factor -->

<div class="codehilite"><pre><span></span><code><span class="na">inplace_write_factor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0.1</span>
</code></pre></div>

<p>Controls the size of the buffer used for in-place writing during indexing. Optional, with a default value of 0.1.</p>
<p>It's important to note that this directive only impacts the <a href="../../12-data_creation_and_modification.html#indexer-tool">indexer</a> tool and not the <a href="../../05-starting_the_server.html#toc-05.02-manually">searchd</a> server.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
CONFIG
</div>

<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">inplace_write_factor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0.1</span>
<span class="w">  </span><span class="na">inplace_enable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1</span>

<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">products</span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">src_base</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h3 id="natural-language-processing-specific-settings">Natural language processing specific settings</h3>
<p>The following settings are supported. They are all described in section <a href="../../06-creating_a_table.html#toc-06.03.01-data_tokenization">NLP and tokenization</a>.</p>
<ul>
<li><a href="../../06-creating_a_table.html#bigram_freq_words">bigram_freq_words</a></li>
<li><a href="../../06-creating_a_table.html#bigram_index">bigram_index</a></li>
<li><a href="../../06-creating_a_table.html#blend_chars">blend_chars</a></li>
<li><a href="../../06-creating_a_table.html#blend_mode">blend_mode</a></li>
<li><a href="../../06-creating_a_table.html#charset_table">charset_table</a></li>
<li><a href="../../06-creating_a_table.html#dict">dict</a></li>
<li><a href="../../06-creating_a_table.html#embedded_limit">embedded_limit</a></li>
<li><a href="../../06-creating_a_table.html#toc-06.03.08-exceptions">exceptions</a></li>
<li><a href="../../13-searching.html#expand_keywords">expand_keywords</a></li>
<li><a href="../../06-creating_a_table.html#global_idf">global_idf</a></li>
<li><a href="../../06-creating_a_table.html#hitless_words">hitless_words</a></li>
<li><a href="../../06-creating_a_table.html#html_index_attrs">html_index_attrs</a></li>
<li><a href="../../06-creating_a_table.html#html_remove_elements">html_remove_elements</a></li>
<li><a href="../../06-creating_a_table.html#html_strip">html_strip</a></li>
<li><a href="../../06-creating_a_table.html#ignore_chars">ignore_chars</a></li>
<li><a href="../../06-creating_a_table.html#index_exact_words">index_exact_words</a></li>
<li><a href="../../06-creating_a_table.html#index_field_lengths">index_field_lengths</a></li>
<li><a href="../../06-creating_a_table.html#index_sp">index_sp</a></li>
<li><a href="../../06-creating_a_table.html#index_token_filter">index_token_filter</a></li>
<li><a href="../../06-creating_a_table.html#index_zones">index_zones</a></li>
<li><a href="../../06-creating_a_table.html#infix_fields">infix_fields</a></li>
<li><a href="../../06-creating_a_table.html#killlist_target">killlist_target</a></li>
<li><a href="../../06-creating_a_table.html#max_substring_len">max_substring_len</a></li>
<li><a href="../../06-creating_a_table.html#min_infix_len">min_infix_len</a></li>
<li><a href="../../06-creating_a_table.html#min_prefix_len">min_prefix_len</a></li>
<li><a href="../../06-creating_a_table.html#min_stemming_len">min_stemming_len</a></li>
<li><a href="../../06-creating_a_table.html#min_word_len">min_word_len</a></li>
<li><a href="../../06-creating_a_table.html#morphology">morphology</a></li>
<li><a href="../../06-creating_a_table.html#morphology_skip_fields">morphology_skip_fields</a></li>
<li><a href="../../06-creating_a_table.html#ngram_chars">ngram_chars</a></li>
<li><a href="../../06-creating_a_table.html#ngram_len">ngram_len</a></li>
<li><a href="../../06-creating_a_table.html#overshort_step">overshort_step</a></li>
<li><a href="../../06-creating_a_table.html#phrase_boundary">phrase_boundary</a></li>
<li><a href="../../06-creating_a_table.html#phrase_boundary_step">phrase_boundary_step</a></li>
<li><a href="../../06-creating_a_table.html#prefix_fields">prefix_fields</a></li>
<li><a href="../../06-creating_a_table.html#regexp_filter">regexp_filter</a></li>
<li><a href="../../06-creating_a_table.html#stopwords">stopwords</a></li>
<li><a href="../../06-creating_a_table.html#stopword_step">stopword_step</a></li>
<li><a href="../../06-creating_a_table.html#stopwords_unstemmed">stopwords_unstemmed</a></li>
<li><a href="../../06-creating_a_table.html#stored_fields">stored_fields</a></li>
<li><a href="../../06-creating_a_table.html#toc-06.02.03-plain_and_realtime_table_settings">stored_only_fields</a></li>
<li><a href="../../06-creating_a_table.html#wordforms">wordforms</a></li>
</ul>
<!-- proofread -->
        
    </section>
    
    <section class="chapter-section" id="toc-06.02.04-percolate_table">
        <a class="chapter-link" href="#toc-06.02.04-percolate_table"> ¶ 6.2.4</a>

        
        <h1 id="percolate-table">Percolate table</h1>
<!-- example pq -->
<p>A percolate table is a special table that stores queries rather than documents. It is used for prospective searches, or "search in reverse."</p>
<ul>
<li>To learn more about performing a search query against a percolate table, see the section <a href="../../13-searching.html#toc-13.16-percolate_query">Percolate query</a>.</li>
<li>To learn how to prepare a table for searching, see the section <a href="../../12-data_creation_and_modification.html#toc-12.01.02-adding_rules_to_a_percolate_table">Adding rules to a percolate table</a>.</li>
</ul>
<p>The schema of a percolate table is fixed and contains the following fields:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ID</td>
<td>An unsigned 64-bit integer with auto-increment functionality. It can be omitted when adding a PQ rule, as described in  <a href="../../12-data_creation_and_modification.html#toc-12.01.02-adding_rules_to_a_percolate_table">add a PQ rule</a></td>
</tr>
<tr>
<td>Query</td>
<td><a href="../../13-searching.html#toc-13.02.01-basic_usage">Full-text query</a> of the rule, which can be thought of as the value of <a href="../../13-searching.html#toc-13.02.01-basic_usage">MATCH clause</a> or <a href="../../13-searching.html#http-json">JSON /search</a>. If <a href="../../13-searching.html#toc-13.02.02-operators">per field operators</a> are used inside the query, the full-text fields need to be declared in the percolate table configuration. If the stored query is only for attribute filtering (without full-text querying), the query value can be empty or omitted. The value of this field should correspond to the expected document schema, which is specified when creating the percolate table.</td>
</tr>
<tr>
<td>Filters</td>
<td>Optional. Filters are an optional string containing attribute filters and/or expressions, defined the same way as in the <a href="../../13-searching.html#where">WHERE clause</a> or <a href="../../13-searching.html#http-json">JSON filtering</a>. The value of this field should correspond to the expected document schema, which is specified when creating the percolate table.</td>
</tr>
<tr>
<td>Tags</td>
<td>Optional. Tags represent a list of string labels separated by commas that can be used for filtering/deleting PQ rules. The tags can also be returned along with matching documents when performing a <a href="../../13-searching.html#toc-13.16-percolate_query">Percolate query</a></td>
</tr>
</tbody>
</table>
<p>Note that you do not need to add the above fields when creating a percolate table.</p>
<p>What you need to keep in mind when creating a new percolate table is to specify the expected schema of a document, which will be checked against the rules you will add later. This is done in the same way as for <a href="../../06-creating_a_table.html#toc-06.02-creating_a_local_table">any other local table</a>.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
Creating a percolate table via SQL
</div>

<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">meta</span><span class="w"> </span><span class="n">json</span><span class="p">)</span><span class="w"> </span><span class="k">type</span><span class="o">=</span><span class="s1">&#39;pq&#39;</span><span class="p">;</span>
</code></pre></div>


<!-- response SQL -->


<div class="codehilite"><pre><span></span><code><span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Creating a percolate table via JSON over HTTP
</div>

<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;CREATE TABLE products(title text, meta json) type=&#39;pq&#39;&quot;</span>
</code></pre></div>



<!-- response JSON -->


<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="nt">&quot;total&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
<span class="nt">&quot;error&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="nt">&quot;warning&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span>
<span class="p">}</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Creating a percolate table via PHP client
</div>

<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = [</span>
<span class="x">    &#39;index&#39; =&gt; &#39;products&#39;,</span>
<span class="x">    &#39;body&#39; =&gt; [</span>
<span class="x">        &#39;columns&#39; =&gt; [</span>
<span class="x">            &#39;title&#39; =&gt; [&#39;type&#39; =&gt; &#39;text&#39;],</span>
<span class="x">            &#39;meta&#39; =&gt; [&#39;type&#39; =&gt; &#39;json&#39;]</span>
<span class="x">        ],</span>
<span class="x">        &#39;settings&#39; =&gt; [</span>
<span class="x">            &#39;type&#39; =&gt; &#39;pq&#39;</span>
<span class="x">        ]</span>
<span class="x">    ]</span>
<span class="x">];</span>
<span class="x">$client-&gt;indices()-&gt;create($index);</span>
</code></pre></div>


<!-- response PHP -->

<div class="codehilite"><pre><span></span><code><span class="x">Array(</span>
<span class="x">    [total] =&gt; 0</span>
<span class="x">    [error] =&gt;</span>
<span class="x">    [warning] =&gt;</span>
<span class="x">)</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, meta json) type=</span><span class="se">\&#39;</span><span class="s1">pq</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, meta json) type=\&#39;pq\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, meta json) type=&#39;pq&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">Sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, meta json) type=&#39;pq&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
TypeScript
</div>

<!-- request typescript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s2">&quot;CREATE TABLE products(title text, meta json) type=&#39;pq&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Go
</div>

<!-- request go -->


<div class="codehilite"><pre><span></span><code><span class="nx">apiClient</span><span class="p">.</span><span class="nx">UtilsAPI</span><span class="p">.</span><span class="nx">Sql</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nx">Background</span><span class="p">()).</span><span class="nx">Body</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, meta json) type=&#39;pq&#39;&quot;</span><span class="p">).</span><span class="nx">Execute</span><span class="p">()</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Creating a percolate table via config
</div>

<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">percolate</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl_pq</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_json</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">meta</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>
<!-- proofread -->
        
    </section>
    
    <section class="chapter-section" id="toc-06.02.05-template_table">
        <a class="chapter-link" href="#toc-06.02.05-template_table"> ¶ 6.2.5</a>

        
        <h1 id="template-table">Template table</h1>
<!-- example template -->
<p>A Template Table is a special type of table in Manticore that doesn't store any data and doesn't create any files on your disk. Despite this, it can have the same <a href="../../06-creating_a_table.html#natural-language-processing-specific-settings">NLP settings</a> as a plain or real-time table. Template tables can be used for the following purposes:</p>
<ul>
<li>As a template to inherit settings in the  <a href="../../06-creating_a_table.html#defining-table-schema-in-config-%28plain mode%29">Plain mode</a>, simplifying your Manticore configuration file.</li>
<li>Keyword generation with the help of the <a href="../../13-searching.html#call-keywords">CALL KEYWORDS</a> command.</li>
<li>Highlighting an arbitrary string using the <a href="../../13-searching.html#call-snippets">CALL SNIPPETS</a> command.</li>
</ul>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
Creating a template table via a configuration file
</div>

<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table template {</span>
<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">template</span>
<span class="w">  </span><span class="na">morphology</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">stem_en</span>
<span class="w">  </span><span class="na">wordforms</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">wordforms.txt</span>
<span class="w">  </span><span class="na">exceptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">exceptions.txt</span>
<span class="w">  </span><span class="na">stopwords</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">stopwords.txt</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>
<!-- proofread -->
        
    </section>
    
    <section class="chapter-section" id="toc-06.03-nlp_and_tokenization">
        <a class="chapter-link" href="#toc-06.03-nlp_and_tokenization"> ¶ 6.3</a>

        
        <h1>NLP and tokenization</h1>
        
    </section>
    
    <section class="chapter-section" id="toc-06.03.01-data_tokenization">
        <a class="chapter-link" href="#toc-06.03.01-data_tokenization"> ¶ 6.3.1</a>

        
        <h1 id="data-tokenization">Data tokenization</h1>
<p>Manticore doesn't store text as is for performing full-text searching on it. Instead, it extracts words and creates several structures that allow fast full-text searching. From the found words, a dictionary is built, which allows a quick look to discover if the word is present or not in the index. In addition, other structures record the documents and fields in which the word was found (as well as the position of it inside a field). All these are used when a full-text match is performed.</p>
<p>The process of demarcating and classifying words is called tokenization. The tokenization is applied at both indexing and searching, and it operates at the character and word level.</p>
<p>On the character level, the engine allows only certain characters to pass. This is defined by the <a href="../../06-creating_a_table.html#charset_table">charset_table</a>. Anything else is replaced with a whitespace (which is considered the default word separator). The charset_table also allows mappings, such as lowercasing or simply replacing one character with another. Besides that, characters can be <a href="../../06-creating_a_table.html#ignore_chars">ignored</a>, <a href="../../06-creating_a_table.html#blend_chars">blended</a>, defined as a <a href="../../06-creating_a_table.html#phrase_boundary">phrase boundary</a>. </p>
<p>At the word level, the base setting is the <a href="../../06-creating_a_table.html#min_word_len">min_word_len</a> which defines the minimum word length in characters to be accepted in the index. A common request is to match singular with plural forms of words. For this, <a href="../../06-creating_a_table.html#morphology">morphology processors</a> can be used. </p>
<p>Going further, we might want a word to be matched as another one because they are synonyms. For this, the <a href="../../06-creating_a_table.html#toc-06.03.07-word_forms">word forms</a> feature can be used, which allows one or more words to be mapped to another one.</p>
<p>Very common words can have some unwanted effects on searching, mostly because of their frequency they require lots of computing to process their doc/hit lists. They can be blacklisted with the <a href="../../06-creating_a_table.html#stopwords">stop words</a> functionality. This helps not only in speeding up queries but also in decreasing the index size.</p>
<p>A more advanced blacklisting is <a href="../../06-creating_a_table.html#bigram_index">bigrams</a>, which allows creating a special token between a "bigram" (common) word and an uncommon word. This can speed up several times when common words are used in phrase searches.</p>
<p>In case of indexing HTML content, it's important not to index the HTML tags, as they can introduce a lot of "noise" in the index. <a href="../../06-creating_a_table.html#stripping-html-tags">HTML stripping</a> can be used and can be configured to strip, but index certain tag attributes or completely ignore the content of certain HTML elements.</p>
<!-- proofread -->
        
    </section>
    
    <section class="chapter-section" id="toc-06.03.02-supported_languages">
        <a class="chapter-link" href="#toc-06.03.02-supported_languages"> ¶ 6.3.2</a>

        
        <h1 id="supported-languages">Supported languages</h1>
<p>Manticore supports a wide range of languages, with basic support enabled for most languages via <code>charset_table = non_cjk</code> (which is the default value).</p>
<p>For many languages, Manticore provides a <a href="../../06-creating_a_table.html#stopwords">stopwords</a> file that can be used to improve search relevance.</p>
<p>Additionally, advanced morphology is available for a few languages that can significantly improve search relevance by using dictionary-based lemmatization or stemming algorithms for better segmentation and normalization.</p>
<p>The table below lists all supported languages and indicates how to enable:</p>
<ul>
<li>basic support (column "Supported")</li>
<li>stopwords (column "Stopwords file name")</li>
<li>advanced morphology (column "Advanced morphology")</li>
</ul>
<table>
<thead>
<tr>
<th>Language</th>
<th>Supported</th>
<th>Stopwords file name</th>
<th>Advanced morphology</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>Afrikaans</td>
<td>charset_table=non_cjk</td>
<td>af</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Arabic</td>
<td>charset_table=non_cjk</td>
<td>ar</td>
<td>morphology=stem_ar (Arabic stemmer); morphology=libstemmer_ar</td>
<td></td>
</tr>
<tr>
<td>Armenian</td>
<td>charset_table=non_cjk</td>
<td>hy</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Assamese</td>
<td>specify charset_table specify charset_table manually</td>
<td>-</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Basque</td>
<td>charset_table=non_cjk</td>
<td>eu</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Bengali</td>
<td>charset_table=non_cjk</td>
<td>bn</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Bishnupriya</td>
<td>specify charset_table manually</td>
<td>-</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Buhid</td>
<td>specify charset_table manually</td>
<td>-</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Bulgarian</td>
<td>charset_table=non_cjk</td>
<td>bg</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Catalan</td>
<td>charset_table=non_cjk</td>
<td>ca</td>
<td>morphology=libstemmer_ca</td>
<td></td>
</tr>
<tr>
<td>Chinese</td>
<td>charset_table=chinese or ngram_chars=chinese</td>
<td>zh</td>
<td>morphology=icu_chinese or ngram_chars=1 correspondingly</td>
<td>ICU dictionary based segmentation is much more accurate than ngram-based</td>
</tr>
<tr>
<td>Croatian</td>
<td>charset_table=non_cjk</td>
<td>hr</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Kurdish</td>
<td>charset_table=non_cjk</td>
<td>ckb</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Czech</td>
<td>charset_table=non_cjk</td>
<td>cz</td>
<td>morphology=stem_cz (Czech stemmer)</td>
<td></td>
</tr>
<tr>
<td>Danish</td>
<td>charset_table=non_cjk</td>
<td>da</td>
<td>morphology=libstemmer_da</td>
<td></td>
</tr>
<tr>
<td>Dutch</td>
<td>charset_table=non_cjk</td>
<td>nl</td>
<td>morphology=libstemmer_nl</td>
<td></td>
</tr>
<tr>
<td>English</td>
<td>charset_table=non_cjk</td>
<td>en</td>
<td>morphology=lemmatize_en (single root form); morphology=lemmatize_en_all (all root forms); morphology=stem_en (Porter's English stemmer); morphology=stem_enru (Porter's English and Russian stemmers); morphology=libstemmer_en (English from libstemmer)</td>
<td></td>
</tr>
<tr>
<td>Esperanto</td>
<td>charset_table=non_cjk</td>
<td>eo</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Estonian</td>
<td>charset_table=non_cjk</td>
<td>et</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Finnish</td>
<td>charset_table=non_cjk</td>
<td>fi</td>
<td>morphology=libstemmer_fi</td>
<td></td>
</tr>
<tr>
<td>French</td>
<td>charset_table=non_cjk</td>
<td>fr</td>
<td>morphology=libstemmer_fr</td>
<td></td>
</tr>
<tr>
<td>Galician</td>
<td>charset_table=non_cjk</td>
<td>gl</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Garo</td>
<td>specify charset_table manually</td>
<td>-</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>German</td>
<td>charset_table=non_cjk</td>
<td>de</td>
<td>morphology=lemmatize_de (single root form); morphology=lemmatize_de_all (all root forms); morphology=libstemmer_de</td>
<td></td>
</tr>
<tr>
<td>Greek</td>
<td>charset_table=non_cjk</td>
<td>el</td>
<td>morphology=libstemmer_el</td>
<td></td>
</tr>
<tr>
<td>Hebrew</td>
<td>charset_table=non_cjk</td>
<td>he</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Hindi</td>
<td>charset_table=non_cjk</td>
<td>hi</td>
<td>morphology=libstemmer_hi</td>
<td></td>
</tr>
<tr>
<td>Hmong</td>
<td>specify charset_table manually</td>
<td>-</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Ho</td>
<td>specify charset_table manually</td>
<td>-</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Hungarian</td>
<td>charset_table=non_cjk</td>
<td>hu</td>
<td>morphology=libstemmer_hu</td>
<td></td>
</tr>
<tr>
<td>Indonesian</td>
<td>charset_table=non_cjk</td>
<td>id</td>
<td>morphology=libstemmer_id</td>
<td></td>
</tr>
<tr>
<td>Irish</td>
<td>charset_table=non_cjk</td>
<td>ga</td>
<td>morphology=libstemmer_ga</td>
<td></td>
</tr>
<tr>
<td>Italian</td>
<td>charset_table=non_cjk</td>
<td>it</td>
<td>morphology=libstemmer_it</td>
<td></td>
</tr>
<tr>
<td>Japanese</td>
<td>ngram_chars=japanese</td>
<td>-</td>
<td>ngram_chars=japanese ngram_len=1</td>
<td>Requires ngram-based segmentation</td>
</tr>
<tr>
<td>Komi</td>
<td>specify charset_table manually</td>
<td>-</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Korean</td>
<td>ngram_chars=korean</td>
<td>-</td>
<td>ngram_chars=korean ngram_len=1</td>
<td>Requires ngram-based segmentation</td>
</tr>
<tr>
<td>Large Flowery Miao</td>
<td>specify charset_table manually</td>
<td>-</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Latin</td>
<td>charset_table=non_cjk</td>
<td>la</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Latvian</td>
<td>charset_table=non_cjk</td>
<td>lv</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Lithuanian</td>
<td>charset_table=non_cjk</td>
<td>lt</td>
<td>morphology=libstemmer_lt</td>
<td></td>
</tr>
<tr>
<td>Maba</td>
<td>specify charset_table manually</td>
<td>-</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Maithili</td>
<td>specify charset_table manually</td>
<td>-</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Marathi</td>
<td>specify charset_table manually</td>
<td>-</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Marathi</td>
<td>charset_table=non_cjk</td>
<td>mr</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Mende</td>
<td>specify charset_table manually</td>
<td>-</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Mru</td>
<td>specify charset_table manually</td>
<td>-</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Myene</td>
<td>specify charset_table manually</td>
<td>-</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Nepali</td>
<td>specify charset_table manually</td>
<td>-</td>
<td>morphology=libstemmer_ne</td>
<td></td>
</tr>
<tr>
<td>Ngambay</td>
<td>specify charset_table manually</td>
<td>-</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Norwegian</td>
<td>charset_table=non_cjk</td>
<td>no</td>
<td>morphology=libstemmer_no</td>
<td></td>
</tr>
<tr>
<td>Odia</td>
<td>specify charset_table manually</td>
<td>-</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Persian</td>
<td>charset_table=non_cjk</td>
<td>fa</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Polish</td>
<td>charset_table=non_cjk</td>
<td>pl</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Portuguese</td>
<td>charset_table=non_cjk</td>
<td>pt</td>
<td>morphology=libstemmer_pt</td>
<td></td>
</tr>
<tr>
<td>Romanian</td>
<td>charset_table=non_cjk</td>
<td>ro</td>
<td>morphology=libstemmer_ro</td>
<td></td>
</tr>
<tr>
<td>Russian</td>
<td>charset_table=non_cjk</td>
<td>ru</td>
<td>morphology=lemmatize_ru (single root form); morphology=lemmatize_ru_all (all root forms); morphology=stem_ru (Porter's Russian stemmer); morphology=stem_enru (Porter's English and Russian stemmers); morphology=libstemmer_ru (from libstemmer)</td>
<td></td>
</tr>
<tr>
<td>Santali</td>
<td>specify charset_table manually</td>
<td>-</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Sindhi</td>
<td>specify charset_table manually</td>
<td>-</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Slovak</td>
<td>charset_table=non_cjk</td>
<td>sk</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Slovenian</td>
<td>charset_table=non_cjk</td>
<td>sl</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Somali</td>
<td>charset_table=non_cjk</td>
<td>so</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Sotho</td>
<td>charset_table=non_cjk</td>
<td>st</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Spanish</td>
<td>charset_table=non_cjk</td>
<td>es</td>
<td>morphology=libstemmer_es</td>
<td></td>
</tr>
<tr>
<td>Swahili</td>
<td>charset_table=non_cjk</td>
<td>sw</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Swedish</td>
<td>charset_table=non_cjk</td>
<td>sv</td>
<td>morphology=libstemmer_sv</td>
<td></td>
</tr>
<tr>
<td>Sylheti</td>
<td>specify charset_table manually</td>
<td>-</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Tamil</td>
<td>specify charset_table manually</td>
<td>-</td>
<td>morphology=libstemmer_ta</td>
<td></td>
</tr>
<tr>
<td>Thai</td>
<td>charset_table=non_cjk</td>
<td>th</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Turkish</td>
<td>charset_table=non_cjk</td>
<td>tr</td>
<td>morphology=libstemmer_tr</td>
<td></td>
</tr>
<tr>
<td>Ukrainian</td>
<td>charset_table=non_cjk,U+0406-&gt;U+0456,U+0456,U+0407-&gt;U+0457,U+0457,U+0490-&gt;U+0491,U+0491</td>
<td>-</td>
<td>morphology=lemmatize_uk_all</td>
<td>Requires <a href="../../../03-installation.html#ukrainian-lemmatizer">installation</a> of UK lemmatizer</td>
</tr>
<tr>
<td>Yoruba</td>
<td>charset_table=non_cjk</td>
<td>yo</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>Zulu</td>
<td>charset_table=non_cjk</td>
<td>zu</td>
<td>-</td>
<td></td>
</tr>
</tbody>
</table>
<!-- proofread -->
        
    </section>
    
    <section class="chapter-section" id="toc-06.03.03-cjk">
        <a class="chapter-link" href="#toc-06.03.03-cjk"> ¶ 6.3.3</a>

        
        <h1 id="chinese-japanese-and-korean-cjk-languages">Chinese, Japanese and Korean (CJK) languages</h1>
<p>Manticore provides built-in support for indexing CJK texts, allowing you to process CJK texts in two different ways:</p>
<!-- example cjk 1 -->
<ol>
<li>Precise segmentation using the ICU library. Currently, only Chinese is supported.</li>
</ol>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>

<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">charset_table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;cjk&#39;</span><span class="w"> </span><span class="n">morphology</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;icu_chinese&#39;</span>
</code></pre></div>



<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST /cli -d &quot;</span>
<span class="err">CREATE TABLE products(title text, price float) charset_table = &#39;cjk&#39; morphology = &#39;icu_chinese&#39;&quot;</span>
</code></pre></div>



<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">            &#39;charset_table&#39; =&gt; &#39;cjk&#39;,</span>
<span class="x">            &#39;morphology&#39; =&gt; &#39;icu_chinese&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) charset_table = </span><span class="se">\&#39;</span><span class="s1">cjk</span><span class="se">\&#39;</span><span class="s1"> morphology = </span><span class="se">\&#39;</span><span class="s1">icu_chinese</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request Javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) charset_table = \&#39;cjk\&#39; morphology = \&#39;icu_chinese\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Java
</div>

<!-- request Java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) charset_table = &#39;cjk&#39; morphology = &#39;icu_chinese&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price float) charset_table = &#39;cjk&#39; morphology = &#39;icu_chinese&#39;&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">charset_table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">cjk</span>
<span class="w">  </span><span class="na">morphology</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">icu_chinese</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<!-- example cjk 2 -->
<ol start="2">
<li>Basic support using the N-gram options <a href="../../06-creating_a_table.html#ngram_len">ngram_len</a> and <a href="../../06-creating_a_table.html#ngram_chars">ngram_chars</a><br />
For each CJK language, there are separate character set tables (<code>chinese</code>, <code>korean</code>, <code>japanese</code>) that can be used, or you can use the common <code>cjk</code> character set table. </li>
</ol>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>

<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">charset_table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;non_cjk&#39;</span><span class="w"> </span><span class="n">ngram_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;1&#39;</span><span class="w"> </span><span class="n">ngram_chars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;cjk&#39;</span>
</code></pre></div>



<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST /cli -d &quot;</span>
<span class="err">CREATE TABLE products(title text, price float) charset_table = &#39;non_cjk&#39; ngram_len = &#39;1&#39; ngram_chars = &#39;cjk&#39;&quot;</span>
</code></pre></div>



<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">             &#39;charset_table&#39; =&gt; &#39;non_cjk&#39;,</span>
<span class="x">             &#39;ngram_len&#39; =&gt; &#39;1&#39;,</span>
<span class="x">             &#39;ngram_chars&#39; =&gt; &#39;cjk&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) charset_table = </span><span class="se">\&#39;</span><span class="s1">non_cjk</span><span class="se">\&#39;</span><span class="s1"> ngram_len = </span><span class="se">\&#39;</span><span class="s1">1</span><span class="se">\&#39;</span><span class="s1"> ngram_chars = </span><span class="se">\&#39;</span><span class="s1">cjk</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) charset_table = \&#39;non_cjk\&#39; ngram_len = \&#39;1\&#39; ngram_chars = \&#39;cjk\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request Java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) charset_table = &#39;non_cjk&#39; ngram_len = &#39;1&#39; ngram_chars = &#39;cjk&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price float) charset_table = &#39;non_cjk&#39; ngram_len = &#39;1&#39; ngram_chars = &#39;cjk&#39;&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">charset_table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">non_cjk</span>
<span class="w">  </span><span class="na">ngram_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1</span>
<span class="w">  </span><span class="na">ngram_chars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">cjk</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<!-- example cjk 3 -->
<p>Additionally, there is built-in support for Chinese <a href="../../06-creating_a_table.html#stopwords">stopwords</a>  with the alias <code>zh</code>.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>

<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">charset_table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;chinese&#39;</span><span class="w"> </span><span class="n">morphology</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;icu_chinese&#39;</span><span class="w"> </span><span class="n">stopwords</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;zh&#39;</span>
</code></pre></div>



<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) charset_table = &#39;chinese&#39; morphology = &#39;icu_chinese&#39; stopwords = &#39;zh&#39;&quot;</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
PHP
</div>
<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">            &#39;charset_table&#39; =&gt; &#39;chinese&#39;,</span>
<span class="x">            &#39;morphology&#39; =&gt; &#39;icu_chinese&#39;,</span>
<span class="x">            &#39;stopwords&#39; =&gt; &#39;zh&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) charset_table = </span><span class="se">\&#39;</span><span class="s1">chinese</span><span class="se">\&#39;</span><span class="s1"> morphology = </span><span class="se">\&#39;</span><span class="s1">icu_chinese</span><span class="se">\&#39;</span><span class="s1"> stopwords = </span><span class="se">\&#39;</span><span class="s1">zh</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) charset_table = \&#39;chinese\&#39; morphology = \&#39;icu_chinese\&#39; stopwords = \&#39;zh\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request Java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) charset_table = &#39;chinese&#39; morphology = &#39;icu_chinese&#39; stopwords = &#39;zh&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price float) charset_table = &#39;chinese&#39; morphology = &#39;icu_chinese&#39; stopwords = &#39;zh&#39;&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">charset_table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">chinese</span>
<span class="w">  </span><span class="na">morphology</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">icu_chinese</span>
<span class="w">  </span><span class="na">stopwords</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">zh</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>
<!-- proofread -->
        
    </section>
    
    <section class="chapter-section" id="toc-06.03.04-lowlevel_tokenization">
        <a class="chapter-link" href="#toc-06.03.04-lowlevel_tokenization"> ¶ 6.3.4</a>

        
        <h1 id="low-level-tokenization">Low-level tokenization</h1>
<p>When text is indexed in Manticore, it is split into words and case folding is done so that words like "Abc", "ABC", and "abc" are treated as the same word.</p>
<p>To perform these operations correctly, Manticore must know:</p>
<ul>
<li>the encoding of the source text (which should always be UTF-8)</li>
<li>which characters are considered letters and which are not</li>
<li>which letters should be folded to other letters</li>
</ul>
<p>You can configure these settings on a per-table basis using the  <a href="../../06-creating_a_table.html#charset_table">charset_table</a> option. charset_table specifies an array that maps letter characters to their case-folded versions (or any other characters that you prefer). Characters that are not present in the array are considered to be non-letters and will be treated as word separators during indexing or searching in this table.</p>
<p>The default character set is <code>non_cjk</code>, which includes <a href="../../06-creating_a_table.html#toc-06.03.02-supported_languages">most languages</a>.</p>
<p>You can also define text pattern replacement rules. For example, with the following rules:</p>
<div class="codehilite"><pre><span></span><code><span class="na">regexp_filter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">\**(\d+)\&quot; =&gt; \1 inch</span>
<span class="na">regexp_filter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">(BLUE|RED) =&gt; COLOR</span>
</code></pre></div>

<p>The text <code>RED TUBE 5" LONG</code> would be indexed as <code>COLOR TUBE 5 INCH LONG</code>, and <code>PLANK 2" x 4"</code> would be indexed as <code>PLANK 2 INCH x 4 INCH</code>. These rules are applied in the specified order. The rules also apply to queries, so a search for <code>BLUE TUBE</code> would actually search for <code>COLOR TUBE</code>.</p>
<p>You can learn more about <a href="../../06-creating_a_table.html#regexp_filter">regexp_filter here</a>.</p>
<h2 id="index-configuration-options">Index configuration options</h2>
<h3 id="charset_table">charset_table</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># default</span>
<span class="na">charset_table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">non_cjk</span>

<span class="c1"># only English and Russian letters</span>
<span class="na">charset_table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0..9, A..Z-&gt;a..z, _, a..z, </span>\
<span class="s">U+410..U+42F-&gt;U+430..U+44F, U+430..U+44F, U+401-&gt;U+451, U+451</span>

<span class="c1"># english charset defined with alias</span>
<span class="na">charset_table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0..9, english, _</span>

<span class="c1"># you can override character mappings by redefining them, e.g. for case insensitive search with German umlauts you can use:</span>
<span class="na">charset_table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">non_cjk, U+00E4, U+00C4-&gt;U+00E4, U+00F6, U+00D6-&gt;U+00F6, U+00FC, U+00DC-&gt;U+00FC, U+00DF, U+1E9E-&gt;U+00DF</span>
</code></pre></div>

<!-- example charset_table -->
<p><code>charset_table</code> specifies an array that maps letter characters to their case folded versions (or any other characters if you like). The default character set is <code>non_cjk</code> which includes most non-CJK languages.</p>
<p><code>charset_table</code> is a workhorse of Manticore's tokenization process, which extracts keywords from document text or query text. It controls what characters are accepted as valid and how they should be transformed (e.g. whether case should be removed or not).</p>
<p>By default, every character maps to 0, which means that it is not considered a valid keyword and is treated as a separator. Once a character is mentioned in the table, it is mapped to another character (most frequently, either to itself or to a lowercase letter) and is treated as a valid keyword part.</p>
<p>charset_table uses a comma-separated list of mappings to declare characters as valid or to map them to other characters. Syntax shortcuts are available for mapping ranges of characters at once:</p>
<ul>
<li>Single char mapping: <code>A-&gt;a</code>. Declares the source character 'A' as allowed within keywords and maps it to the destination character 'a' (but does not declare 'a' as allowed).</li>
<li>Range mapping: <code>A..Z-&gt;a..z</code>. Declares all characters in the source range as allowed and maps them to the destination range. Does not declare the destination range as allowed. Checks the lengths of both ranges.</li>
<li>Stray char mapping: <code>a</code>. Declares a character as allowed and maps it to itself. Equivalent to <code>a-&gt;a</code> single char mapping.</li>
<li>Stray range mapping: <code>a..z</code>.  Declares all characters in the range as allowed and maps them to themselves. Equivalent to <code>a..z-&gt;a..z</code> range mapping.</li>
<li>Checkerboard range mapping: <code>A..Z/2</code>. Maps every pair of characters to the second character. For instance, <code>A..Z/2</code> is equivalent to <code>A-&gt;B, B-&gt;B, C-&gt;D, D-&gt;D, ..., Y-&gt;Z, Z-&gt;Z</code>. This mapping shortcut is helpful for Unicode blocks where uppercase and lowercase letters go in an interleaved order.</li>
</ul>
<p>For characters with codes from 0 to 32, and those in the range of 127 to 8-bit ASCII and Unicode characters, Manticore always treats them as separators. To avoid configuration file encoding issues, 8-bit ASCII characters and Unicode characters must be specified in <code>U+XXX</code> form, where <code>XXX</code> is a hexadecimal code point number. The minimal accepted Unicode character code is <code>U+0021</code>.</p>
<p>If the default mappings are insufficient for your needs, you can redefine the character mappings by specifying them again with another mapping. For example, if the built-in <code>non_cjk</code> array includes characters <code>Ä</code> and <code>ä</code> and maps them both to the ASCII character <code>a</code>, you can redefine those characters by adding the Unicode code points for them, like this:</p>
<div class="codehilite"><pre><span></span><code>charset_table = non_cjk,U+00E4,U+00C4
</code></pre></div>

<p>for case sensitive search or</p>
<div class="codehilite"><pre><span></span><code><span class="n">charset_table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">non_cjk</span><span class="p">,</span><span class="n">U</span><span class="o">+</span><span class="mf">00E4</span><span class="p">,</span><span class="n">U</span><span class="o">+</span><span class="mo">00</span><span class="n">C4</span><span class="o">-&gt;</span><span class="n">U</span><span class="o">+</span><span class="mf">00E4</span>
</code></pre></div>

<p>for case insensitive search.</p>
<!-- request SQL -->

<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">charset_table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;0..9, A..Z-&gt;a..z, _, a..z, U+410..U+42F-&gt;U+430..U+44F, U+430..U+44F, U+401-&gt;U+451, U+451&#39;</span>
</code></pre></div>

<!-- request JSON -->

<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) charset_table = &#39;0..9, A..Z-&gt;a..z, _, a..z, U+410..U+42F-&gt;U+430..U+44F, U+430..U+44F, U+401-&gt;U+451, U+451&#39;&quot;</span>
</code></pre></div>

<!-- request PHP -->

<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">            &#39;charset_table&#39; =&gt; &#39;0..9, A..Z-&gt;a..z, _, a..z, U+410..U+42F-&gt;U+430..U+44F, U+430..U+44F, U+401-&gt;U+451, U+451&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>

<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) charset_table = </span><span class="se">\&#39;</span><span class="s1">0..9, A..Z-&gt;a..z, _, a..z, U+410..U+42F-&gt;U+430..U+44F, U+430..U+44F, U+401-&gt;U+451, U+451</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) charset_table = \&#39;0..9, A..Z-&gt;a..z, _, a..z, U+410..U+42F-&gt;U+430..U+44F, U+430..U+44F, U+401-&gt;U+451, U+451\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request Java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) charset_table = &#39;0..9, A..Z-&gt;a..z, _, a..z, U+410..U+42F-&gt;U+430..U+44F, U+430..U+44F, U+401-&gt;U+451, U+451&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="kr">Sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) charset_table = &#39;</span><span class="mf">0..9</span><span class="p">,</span><span class="w"> </span><span class="n">A</span><span class="p">..</span><span class="n">Z</span><span class="o">-&gt;</span><span class="n">a</span><span class="p">..</span><span class="n">z</span><span class="p">,</span><span class="w"> </span><span class="n">_</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="p">..</span><span class="n">z</span><span class="p">,</span><span class="w"> </span><span class="n">U</span><span class="o">+</span><span class="mf">410.</span><span class="p">.</span><span class="n">U</span><span class="o">+</span><span class="mf">42F</span><span class="o">-&gt;</span><span class="n">U</span><span class="o">+</span><span class="mf">430.</span><span class="p">.</span><span class="n">U</span><span class="o">+</span><span class="mf">44F</span><span class="p">,</span><span class="w"> </span><span class="n">U</span><span class="o">+</span><span class="mf">430.</span><span class="p">.</span><span class="n">U</span><span class="o">+</span><span class="mf">44F</span><span class="p">,</span><span class="w"> </span><span class="n">U</span><span class="o">+</span><span class="mi">401</span><span class="o">-&gt;</span><span class="n">U</span><span class="o">+</span><span class="mi">451</span><span class="p">,</span><span class="w"> </span><span class="n">U</span><span class="o">+</span><span class="mi">451</span><span class="s">&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">charset_table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0..9, A..Z-&gt;a..z, _, a..z, </span>\
<span class="w">    </span><span class="s">U+410..U+42F-&gt;U+430..U+44F, U+430..U+44F, U+401-&gt;U+451, U+451</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<!-- example charset_table 2 -->
<p>Besides definitions of characters and mappings, there are several built-in aliases that can be used. Current aliases are:</p>
<ul>
<li><code>english</code></li>
<li><code>russian</code></li>
<li><code>non_cjk</code></li>
<li><code>cjk</code></li>
</ul>
<!-- request SQL -->

<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">charset_table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;0..9, english, _&#39;</span>
</code></pre></div>

<!-- request JSON -->

<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) charset_table = &#39;0..9, english, _&#39;&quot;</span>
</code></pre></div>

<!-- request PHP -->

<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">            &#39;charset_table&#39; =&gt; &#39;0..9, english, _&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>

<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) charset_table = </span><span class="se">\&#39;</span><span class="s1">0..9, english, _</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) charset_table = \&#39;0..9, english, _\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request Java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) charset_table = &#39;0..9, english, _&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price float) charset_table = &#39;0..9, english, _&#39;&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">charset_table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">0..9, english, _</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<p>If you want to support different languages in your search, it can be a laborious task to define sets of valid characters and folding rules for all of them. We have simplified this for you by providing default charset tables, <code>non_cjk</code> and <code>cjk</code>, that cover non-CJK and CJK (Chinese, Japanese, Korean) languages respectively. In most cases, these charsets should be sufficient for your needs.</p>
<p>Please note that the following languages are currently <strong>not</strong> supported:</p>
<ul>
<li>Assamese</li>
<li>Bishnupriya</li>
<li>Buhid</li>
<li>Garo</li>
<li>Hmong</li>
<li>Ho</li>
<li>Komi</li>
<li>Large Flowery Miao</li>
<li>Maba</li>
<li>Maithili</li>
<li>Marathi</li>
<li>Mende</li>
<li>Mru</li>
<li>Myene</li>
<li>Ngambay</li>
<li>Odia</li>
<li>Santali</li>
<li>Sindhi</li>
<li>Sylheti</li>
</ul>
<p>All other languages listed in the <a href="http://www.unicode.org/cldr/charts/latest/supplemental/languages_and_scripts.html/">Unicode languages<br />
list</a> are supported by default.</p>
<!-- example charset_table 3 -->
<p>To work with both cjk and non-cjk languages, set the options in your configuration file as shown below (with an <a href="../../06-creating_a_table.html#toc-06.03.03-cjk">exception</a> for Chinese):</p>
<!-- request SQL -->

<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">charset_table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;non_cjk&#39;</span><span class="w"> </span><span class="n">ngram_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;1&#39;</span><span class="w"> </span><span class="n">ngram_chars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;cjk&#39;</span>
</code></pre></div>

<!-- request JSON -->

<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) charset_table = &#39;non_cjk&#39; ngram_len = &#39;1&#39; ngram_chars = &#39;cjk&#39;&quot;</span>
</code></pre></div>

<!-- request PHP -->

<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">             &#39;charset_table&#39; =&gt; &#39;non_cjk&#39;,</span>
<span class="x">             &#39;ngram_len&#39; =&gt; &#39;1&#39;,</span>
<span class="x">             &#39;ngram_chars&#39; =&gt; &#39;cjk&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>

<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) charset_table = </span><span class="se">\&#39;</span><span class="s1">non_cjk</span><span class="se">\&#39;</span><span class="s1"> ngram_len = </span><span class="se">\&#39;</span><span class="s1">1</span><span class="se">\&#39;</span><span class="s1"> ngram_chars = </span><span class="se">\&#39;</span><span class="s1">cjk</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) charset_table = \&#39;non_cjk\&#39; ngram_len = \&#39;1\&#39; ngram_chars = \&#39;cjk\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request Java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) charset_table = &#39;non_cjk&#39; ngram_len = &#39;1&#39; ngram_chars = &#39;cjk&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price float) charset_table = &#39;non_cjk&#39; ngram_len = &#39;1&#39; ngram_chars = &#39;cjk&#39;&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">charset_table</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="s">non_cjk</span>
<span class="w">  </span><span class="na">ngram_len</span><span class="w">           </span><span class="o">=</span><span class="w"> </span><span class="s">1</span>
<span class="w">  </span><span class="na">ngram_chars</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s">cjk</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<p>If you do not require support for cjk-languages, you can simply exclude the <a href="../../06-creating_a_table.html#ngram_len">ngram_len</a> and <a href="../../06-creating_a_table.html#ngram_chars">ngram_chars</a><br />
options. For more information on these options, refer to the corresponding documentation sections.</p>
<p>To map one character to multiple characters or vice versa, you can use <a href="../../06-creating_a_table.html#regexp_filter">regexp_filter</a> can be helpful.</p>
<h3 id="blend_chars">blend_chars</h3>
<div class="codehilite"><pre><span></span><code><span class="na">blend_chars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">+, &amp;, U+23</span>
<span class="na">blend_chars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">+, &amp;-&gt;+</span>
</code></pre></div>

<!-- example blend_chars -->
<p>Blended characters list. Optional, default is empty.</p>
<p>Blended characters are indexed as both separators and valid characters. For example, when <code>&amp;</code> is defined as a blended character and <code>AT&amp;T</code> appears in an indexed document, three different keywords will be indexed, <code>at&amp;t</code>, <code>at</code> and <code>t</code>.</p>
<p>Additionally, blended characters can influence indexing in such a way that keywords are indexed as if the blended characters were not typed at all. This behavior is particularly evident when <code>blend_mode = trim_all</code> is specified. For example, the phrase <code>some_thing</code> will be indexed as <code>some</code>, <code>something</code>, and <code>thing</code> with <code>blend_mode = trim_all</code>.</p>
<p>Care should be taken when using blended characters as defining a character as blended means that it is no longer a separator.</p>
<ul>
<li>Therefore, if you put a comma to the <code>blend_chars</code> and search for <code>dog,cat</code>, it will treat that as a single token <code>dog,cat</code>. If <code>dog,cat</code> was <strong>not</strong> indexed as <code>dog,cat</code>, but left as <code>dog cat</code> only, then it will not match.</li>
<li>Hence, this behavior should be controlled with the <a href="../../06-creating_a_table.html#blend_mode">blend_mode</a> setting.</li>
</ul>
<p>Positions for tokens obtained by replacing blended characters with whitespace are assigned as usual, and regular keywords will be indexed as if there were no <code>blend_chars</code> specified at all. An additional token that mixes blended and non-blended characters will be put at the starting position. For instance, if <code>AT&amp;T company</code> occurs in the very beginning of the text field, <code>at</code> will be given position 1, <code>t</code> position 2, <code>company</code> position 3, and <code>AT&amp;T</code> will also be given position 1, blending with the opening regular keyword. As a result, queries for <code>AT&amp;T</code> or just <code>AT</code> will match that document. A phrase query for <code>"AT T"</code> will also match, as well as a phrase query for <code>"AT&amp;T company"</code>.</p>
<p>Blended characters can overlap with special characters used in query syntax, such as <code>T-Mobile</code> or <code>@twitter</code>. Where possible, the query parser will handle the blended character as blended. For instance, if <code>hello @twitter</code> is within quotes (a phrase operator), the query parser will handle the <code>@</code> symbol as blended. However, if the <code>@</code> symbol was not within quotes, the character would be handled as an operator. Therefore, it is recommended to escape keywords.</p>
<p>Blended characters can be remapped so that multiple different blended characters can be normalized into one base form. This is useful when indexing multiple alternative Unicode codepoints with equivalent glyphs.</p>
<!-- request SQL -->

<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">blend_chars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;+, &amp;, U+23, @-&gt;_&#39;</span>
</code></pre></div>

<!-- request JSON -->

<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) blend_chars = &#39;+, &amp;, U+23, @-&gt;_&#39;&quot;</span>
</code></pre></div>

<!-- request PHP -->

<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">            &#39;blend_chars&#39; =&gt; &#39;+, &amp;, U+23, @-&gt;_&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>

<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) blend_chars = </span><span class="se">\&#39;</span><span class="s1">+, &amp;, U+23, @-&gt;_</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) blend_chars = \&#39;+, &amp;, U+23, @-&gt;_\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request Java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) blend_chars = &#39;+, &amp;, U+23, @-&gt;_&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="kr">Sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) blend_chars = &#39;</span><span class="o">+</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="p">,</span><span class="w"> </span><span class="n">U</span><span class="o">+</span><span class="mi">23</span><span class="p">,</span><span class="w"> </span><span class="err">@</span><span class="o">-&gt;</span><span class="n">_</span><span class="s">&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">blend_chars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">+, &amp;, U+23, @-&gt;_</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h3 id="blend_mode">blend_mode</h3>
<div class="codehilite"><pre><span></span><code><span class="na">blend_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">option [, option [, ...]]</span>
<span class="na">option</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">trim_none | trim_head | trim_tail | trim_both | trim_all | skip_pure</span>
</code></pre></div>

<!-- example blend_mode -->
<p>The blended tokens indexing mode is enabled by the blend_mode directive.</p>
<p>By default, tokens that mix blended and non-blended characters get indexed entirely. For example, when both an at-sign and an exclamation are in <code>blend_chars</code>, the string <code>@dude!</code> will be indexed as two tokens: <code>@dude!</code> (with all the blended characters) and <code>dude</code> (without any). As a result, a query of <code>@dude</code> will <strong>not</strong> match it.</p>
<p><code>blend_mode</code> adds flexibility to this indexing behavior. It takes a comma-separated list of options, each of which specifies a token indexing variant.</p>
<p>If multiple options are specified, multiple variants of the same token will be indexed. Regular keywords (resulting from that token by replacing blended characters with a separator) are always indexed.</p>
<p>The options are:</p>
<ul>
<li><code>trim_none</code> - Index the entire token</li>
<li><code>trim_head</code> - Trim heading blended characters, and index the resulting token</li>
<li><code>trim_tail</code> - Trim trailing blended characters, and index the resulting token</li>
<li><code>trim_both</code>- Trim both heading and trailing blended characters, and index the resulting token</li>
<li><code>trim_all</code> - Trim heading, trailing, and middle blended characters, and index the resulting token</li>
<li><code>skip_pure</code> - Do not index the token if it is purely blended, that is, consists of blended characters only</li>
</ul>
<p>Using <code>blend_mode</code> with the example <code>@dude!</code> string above, the setting <code>blend_mode = trim_head, trim_tail</code> would result in two indexed tokens: <code>@dude</code> and <code>dude!</code>. Using <code>trim_both</code> would have no effect because trimming both blended characters results in <code>dude</code>, which is already indexed as a regular keyword. Indexing <code>@U.S.A.</code> with <code>trim_both</code> (and assuming that dot is blended two) would result in <code>U.S.A</code> being indexed. Lastly, <code>skip_pure</code> enables you to ignore sequences of blended characters only. For example, <code>one @@@ two</code> would be indexed as <code>one two</code>, and match that as a phrase. This is not the case by default because a fully blended token gets indexed and offsets the second keyword position.</p>
<p>Default behavior is to index the entire token, equivalent to <code>blend_mode = trim_none</code>.</p>
<p>Be aware that using blend modes limits your search, even with the default mode <code>trim_none</code> if you assume <code>.</code> is a blended character:</p>
<ul>
<li><code>.dog.</code> will become <code>dog. dog</code> during indexing</li>
<li>and you won't be able to find it by <code>dog.</code>.</li>
</ul>
<p>Using more modes increases the chance your keyword will match something.</p>
<!-- request SQL -->

<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">blend_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;trim_tail, skip_pure&#39;</span><span class="w"> </span><span class="n">blend_chars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;+, &amp;&#39;</span>
</code></pre></div>

<!-- request JSON -->

<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) blend_mode = &#39;trim_tail, skip_pure&#39; blend_chars = &#39;+, &amp;&#39;&quot;</span>
</code></pre></div>

<!-- request PHP -->

<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">            &#39;blend_mode&#39; =&gt; &#39;trim_tail, skip_pure&#39;,</span>
<span class="x">            &#39;blend_chars&#39; =&gt; &#39;+, &amp;&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>

<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) blend_mode = </span><span class="se">\&#39;</span><span class="s1">trim_tail, skip_pure</span><span class="se">\&#39;</span><span class="s1"> blend_chars = </span><span class="se">\&#39;</span><span class="s1">+, &amp;</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) blend_mode = \&#39;trim_tail, skip_pure\&#39; blend_chars = \&#39;+, &amp;\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request Java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) blend_mode = &#39;trim_tail, skip_pure&#39; blend_chars = &#39;+, &amp;&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price float) blend_mode = &#39;trim_tail, skip_pure&#39; blend_chars = &#39;+, &amp;&#39;&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">blend_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">trim_tail, skip_pure</span>
<span class="w">  </span><span class="na">blend_chars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">+, &amp;</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h3 id="min_word_len">min_word_len</h3>
<div class="codehilite"><pre><span></span><code><span class="na">min_word_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">length</span>
</code></pre></div>

<!-- example min_word_len -->

<p>min_word_len is an optional index configuration option in Manticore that specifies the minimum indexed word length. The default value is 1, which means that everything is indexed.</p>
<p>Only those words that are not shorter than this minimum will be indexed. For example, if min_word_len is 4, then 'the' won't be indexed, but 'they' will be.</p>
<!-- request SQL -->

<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">min_word_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;4&#39;</span>
</code></pre></div>

<!-- request JSON -->

<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) min_word_len = &#39;4&#39;&quot;</span>
</code></pre></div>

<!-- request PHP -->

<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">            &#39;min_word_len&#39; =&gt; &#39;4&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>

<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) min_word_len = </span><span class="se">\&#39;</span><span class="s1">4</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) min_word_len = \&#39;4\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request Java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) min_word_len = &#39;4&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price float) min_word_len = &#39;4&#39;&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">min_word_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">4</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h3 id="ngram_len">ngram_len</h3>
<div class="codehilite"><pre><span></span><code><span class="na">ngram_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1</span>
</code></pre></div>

<!-- example ngram_len -->
<p>N-gram lengths for N-gram indexing. Optional, default is 0 (disable n-gram indexing). Known values are 0 and 1.</p>
<p>N-grams provide basic CJK (Chinese, Japanese, Korean) support for unsegmented texts. The issue with CJK searching is that there may be no clear separators between the words. In some cases, you may not want to use dictionary-based segmentation <a href="../../06-creating_a_table.html#toc-06.03.03-cjk">the one available for Chinese</a>. In those cases, n-gram segmentation might work well too.</p>
<p>When this feature is enabled, streams of CJK (or any other characters defined in <a href="../../06-creating_a_table.html#ngram_chars">ngram_chars</a>) are indexed as N-grams. For example, if the incoming text is "ABCDEF" (where A to F represent some CJK characters) and ngram_len is 1, it will be indexed as if it were "A B C D E F". Only ngram_len=1 is currently supported. Only those characters that are listed in <a href="../../06-creating_a_table.html#ngram_chars">ngram_chars</a> table will be split this way; others will not be affected.</p>
<p>Note that if the search query is segmented, i.e. there are separators between individual words, then wrapping the words in quotes and using extended mode will result in proper matches being found even if the text was <strong>not</strong> segmented. For instance, assume that the original query is <code>BC DEF</code>. After wrapping in quotes on the application side, it should look like <code>"BC" "DEF"</code> (<em>with</em> quotes). This query will be passed to Manticore and internally split into 1-grams too, resulting in <code>"B C" "D E F"</code> query, still with quotes that are the phrase matching operator. And it will match the text even though there were no separators in the text.</p>
<p>Even if the search query is not segmented, Manticore should still produce good results, thanks to phrase-based ranking: it will pull closer phrase matches (which in the case of N-gram CJK words can mean closer multi-character word matches) to the top.</p>
<!-- request SQL -->

<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">ngram_chars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;cjk&#39;</span><span class="w"> </span><span class="n">ngram_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;1&#39;</span>
</code></pre></div>

<!-- request JSON -->

<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) ngram_chars = &#39;cjk&#39; ngram_len = &#39;1&#39;&quot;</span>
</code></pre></div>

<!-- request PHP -->

<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">             &#39;ngram_chars&#39; =&gt; &#39;cjk&#39;,</span>
<span class="x">             &#39;ngram_len&#39; =&gt; &#39;1&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>

<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) ngram_chars = </span><span class="se">\&#39;</span><span class="s1">cjk</span><span class="se">\&#39;</span><span class="s1"> ngram_len = </span><span class="se">\&#39;</span><span class="s1">1</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) ngram_chars = \&#39;cjk\&#39; ngram_len = \&#39;1\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request Java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) ngram_chars = &#39;cjk&#39; ngram_len = &#39;1&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price float) ngram_chars = &#39;cjk&#39; ngram_len = &#39;1&#39;&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">ngram_chars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">cjk</span>
<span class="w">  </span><span class="na">ngram_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h3 id="ngram_chars">ngram_chars</h3>
<div class="codehilite"><pre><span></span><code><span class="na">ngram_chars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">cjk</span>

<span class="na">ngram_chars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">cjk, U+3000..U+2FA1F</span>
</code></pre></div>

<!-- example ngram_chars -->
<p>N-gram characters list. Optional, default is empty.</p>
<p>To be used in conjunction with in <a href="../../06-creating_a_table.html#ngram_len">ngram_len</a>, this list defines characters, sequences of which are subject to N-gram extraction. Words comprised of other characters will not be affected by N-gram indexing feature. The value format is identical to <a href="../../06-creating_a_table.html#charset_table">charset_table</a>. N-gram characters cannot appear in the <a href="../../06-creating_a_table.html#charset_table">charset_table</a>.</p>
<!-- request SQL -->

<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">ngram_chars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;U+3000..U+2FA1F&#39;</span><span class="w"> </span><span class="n">ngram_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;1&#39;</span>
</code></pre></div>

<!-- request JSON -->

<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) ngram_chars = &#39;U+3000..U+2FA1F&#39; ngram_len = &#39;1&#39;&quot;</span>
</code></pre></div>

<!-- request PHP -->

<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">             &#39;ngram_chars&#39; =&gt; &#39;U+3000..U+2FA1F&#39;,</span>
<span class="x">             &#39;ngram_len&#39; =&gt; &#39;1&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>

<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) ngram_chars = </span><span class="se">\&#39;</span><span class="s1">U+3000..U+2FA1F</span><span class="se">\&#39;</span><span class="s1"> ngram_len = </span><span class="se">\&#39;</span><span class="s1">1</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="n">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">await</span><span class="w"> </span><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="err">&#39;</span><span class="n">CREATE</span><span class="w"> </span><span class="n">TABLE</span><span class="w"> </span><span class="nf">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="n">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="kt">float</span><span class="p">)</span><span class="w"> </span><span class="n">ngram_chars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">\&#39;</span><span class="n">U</span><span class="o">+</span><span class="mf">3000.</span><span class="p">.</span><span class="na">U</span><span class="o">+</span><span class="mf">2F</span><span class="n">A1F</span><span class="err">\&#39;</span><span class="w"> </span><span class="n">ngram_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">\&#39;</span><span class="mi">1</span><span class="err">\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Java
</div>

<!-- request Java -->

<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) ngram_chars = &#39;U+3000..U+2FA1F&#39; ngram_len = &#39;1&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->

<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price float) ngram_chars = &#39;U+3000..U+2FA1F&#39; ngram_len = &#39;1&#39;&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">ngram_chars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">U+3000..U+2FA1F</span>
<span class="w">  </span><span class="na">ngram_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>



<!-- end -->

</div>

</div>

<!-- example ngram_chars 2 -->
<p>Also you can use an alias for our default N-gram table as in the example. It should be sufficient in most cases.</p>
<!-- request SQL -->

<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">ngram_chars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;cjk&#39;</span><span class="w"> </span><span class="n">ngram_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;1&#39;</span>
</code></pre></div>

<!-- request JSON -->

<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) ngram_chars = &#39;cjk&#39; ngram_len = &#39;1&#39;&quot;</span>
</code></pre></div>

<!-- request PHP -->

<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">             &#39;ngram_chars&#39; =&gt; &#39;cjk&#39;,</span>
<span class="x">             &#39;ngram_len&#39; =&gt; &#39;1&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>

<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) ngram_chars = </span><span class="se">\&#39;</span><span class="s1">cjk</span><span class="se">\&#39;</span><span class="s1"> ngram_len = </span><span class="se">\&#39;</span><span class="s1">1</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) ngram_chars = \&#39;cjk\&#39; ngram_len = \&#39;1\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Java
</div>

<!-- request Java -->

<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) ngram_chars = &#39;cjk&#39; ngram_len = &#39;1&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->

<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price float) ngram_chars = &#39;cjk&#39; ngram_len = &#39;1&#39;&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">ngram_chars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">cjk</span>
<span class="w">  </span><span class="na">ngram_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h3 id="ignore_chars">ignore_chars</h3>
<div class="codehilite"><pre><span></span><code><span class="na">ignore_chars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">U+AD</span>
</code></pre></div>

<!-- example ignore_chars -->
<p>Ignored characters list. Optional, default is empty.</p>
<p>Useful in cases when some characters, such as soft hyphenation mark (U+00AD), should be not just treated as separators but rather fully ignored. For example, if '-' is simply not in the charset_table, "abc-def" text will be indexed as "abc" and "def" keywords. On the contrary, if '-' is added to ignore_chars list, the same text will be indexed as a single "abcdef" keyword.</p>
<p>The syntax is the same as for <a href="../../06-creating_a_table.html#charset_table">charset_table</a>, but it's only allowed to declare characters, and not allowed to map them. Also, the ignored characters must not be present in charset_table.</p>
<!-- request SQL -->

<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">ignore_chars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;U+AD&#39;</span>
</code></pre></div>

<!-- request JSON -->

<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) ignore_chars = &#39;U+AD&#39;&quot;</span>
</code></pre></div>

<!-- request PHP -->

<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">            &#39;ignore_chars&#39; =&gt; &#39;U+AD&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>

<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) ignore_chars = </span><span class="se">\&#39;</span><span class="s1">U+AD</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) ignore_chars = \&#39;U+AD\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request Java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) ignore_chars = &#39;U+AD&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price float) ignore_chars = &#39;U+AD&#39;&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">ignore_chars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">U+AD</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h3 id="bigram_index">bigram_index</h3>
<div class="codehilite"><pre><span></span><code><span class="na">bigram_index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">{none|all|first_freq|both_freq}</span>
</code></pre></div>

<!-- example bigram_index -->
<p>Bigram indexing mode. Optional, default is none.</p>
<p>Bigram indexing is a feature to accelerate phrase searches. When indexing, it stores a document list for either all or some of the adjacent words pairs into the index. Such a list can then be used at searching time to significantly accelerate phrase or sub-phrase matching.</p>
<p><code>bigram_index</code> controls the selection of specific word pairs. The known modes are:</p>
<ul>
<li><code>all</code>, index every single word pair</li>
<li><code>first_freq</code>, only index word pairs where the <em>first</em> word is in a list of frequent words (see <a href="../../06-creating_a_table.html#bigram_freq_words">bigram_freq_words</a>). For example, with <code>bigram_freq_words = the, in, i, a</code>, indexing "alone in the dark" text will result in "in the" and "the dark" pairs being stored as bigrams, because they begin with a frequent keyword (either "in" or "the" respectively), but "alone in" would <strong>not</strong> be indexed, because "in" is a <em>second</em> word in that pair.</li>
<li><code>both_freq</code>, only index word pairs where both words are frequent. Continuing with the same example, in this mode indexing "alone in the dark" would only store "in the" (the very worst of them all from searching perspective) as a bigram, but none of the other word pairs.</li>
</ul>
<p>For most use cases, <code>both_freq</code> would be the best mode, but your mileage may vary.</p>
<!-- request SQL -->

<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">bigram_freq_words</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;the, a, you, i&#39;</span><span class="w"> </span><span class="n">bigram_index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;both_freq&#39;</span>
</code></pre></div>

<!-- request JSON -->

<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) bigram_freq_words = &#39;the, a, you, i&#39; bigram_index = &#39;both_freq&#39;&quot;</span>
</code></pre></div>

<!-- request PHP -->

<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">            &#39;bigram_freq_words&#39; =&gt; &#39;the, a, you, i&#39;,</span>
<span class="x">            &#39;bigram_index&#39; =&gt; &#39;both_freq&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>

<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) bigram_freq_words = </span><span class="se">\&#39;</span><span class="s1">the, a, you, i</span><span class="se">\&#39;</span><span class="s1"> bigram_index = </span><span class="se">\&#39;</span><span class="s1">both_freq</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) bigram_freq_words = \&#39;the, a, you, i\&#39; bigram_index = \&#39;both_freq\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request Java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) bigram_freq_words = &#39;the, a, you, i&#39; bigram_index = &#39;both_freq&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price float) bigram_freq_words = &#39;the, a, you, i&#39; bigram_index = &#39;both_freq&#39;&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">bigram_index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">both_freq</span>
<span class="w">  </span><span class="na">bigram_freq_words</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">the, a, you, i</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h3 id="bigram_freq_words">bigram_freq_words</h3>
<div class="codehilite"><pre><span></span><code><span class="na">bigram_freq_words</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">the, a, you, i</span>
</code></pre></div>

<!-- example bigram_freq_words -->
<p>A list of keywords considered "frequent" when indexing bigrams. Optional, default is empty.</p>
<p>Some of the bigram indexing modes (see <a href="../../06-creating_a_table.html#bigram_index">bigram_index</a>) require to define a list of frequent keywords. These are <strong>not</strong> to be confused with stop words. Stop words are completely eliminated when both indexing and searching. Frequent keywords are only used by bigrams to determine whether to index a current word pair or not.</p>
<p><code>bigram_freq_words</code> lets you define a list of such keywords.</p>
<!-- request SQL -->

<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">bigram_freq_words</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;the, a, you, i&#39;</span><span class="w"> </span><span class="n">bigram_index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;first_freq&#39;</span>
</code></pre></div>

<!-- request JSON -->

<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) bigram_freq_words = &#39;the, a, you, i&#39; bigram_index = &#39;first_freq&#39;&quot;</span>
</code></pre></div>

<!-- request PHP -->

<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">            &#39;bigram_freq_words&#39; =&gt; &#39;the, a, you, i&#39;,</span>
<span class="x">            &#39;bigram_index&#39; =&gt; &#39;first_freq&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>

<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) bigram_freq_words = </span><span class="se">\&#39;</span><span class="s1">the, a, you, i</span><span class="se">\&#39;</span><span class="s1"> bigram_index = </span><span class="se">\&#39;</span><span class="s1">first_freq</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) bigram_freq_words = \&#39;the, a, you, i\&#39; bigram_index = \&#39;first_freq\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request Java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) bigram_freq_words = &#39;the, a, you, i&#39; bigram_index = &#39;first_freq&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price float) bigram_freq_words = &#39;the, a, you, i&#39; bigram_index = &#39;first_freq&#39;&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">bigram_freq_words</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">the, a, you, i</span>
<span class="w">  </span><span class="na">bigram_index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">first_freq</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h3 id="dict">dict</h3>
<div class="codehilite"><pre><span></span><code><span class="na">dict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">{keywords|crc}</span>
</code></pre></div>

<!-- example dict -->
<p>The type of keywords dictionary used is identified by one of two known values, 'crc' or 'keywords'. This is optional, with 'keywords' as the default.</p>
<p>Using the keywords dictionary mode (dict=keywords) can significantly decrease the indexing burden and enable substring searches on extensive collections. This mode can be utilized for both plain and RT tables.</p>
<p>CRC dictionaries do not store the original keyword text in the index. Instead, they replace keywords with a control sum value (computed using FNV64) during both searching and indexing processes. This value is used internally within the index. This approach has two disadvantages:</p>
<ul>
<li>Firstly, there's a risk of control sum collisions between different keywords pairs. This risk grows in proportion to the number of unique keywords in the index. Nonetheless, this concern is minor as the probability of a single FNV64 collision in a dictionary of 1 billion entries is roughly 1 in 16, or 6.25 percent. Most dictionaries will have far fewer than a billion keywords given that a typical spoken human language has between 1 and 10 million word forms.</li>
<li>Secondly, and more crucially, it's not straightforward to perform substring searches with control sums. Manticore addressed this issue by pre-indexing all possible substrings as separate keywords (see <a href="../../06-creating_a_table.html#min_prefix_len">min_prefix_len</a>, <a href="../../06-creating_a_table.html#min_infix_len">min_infix_len</a> directives). This method even has an added advantage of matching substrings in the fastest way possible. Yet, pre-indexing all substrings significantly increases the index size (often by factors of 3-10x or more) and subsequently affects the indexing time, making substring searches on large indexes rather impractical.</li>
</ul>
<p>The keywords dictionary resolves both of these issues. It stores keywords in the index and performs search-time wildcard expansion. For instance, a search for a <code>test*</code> prefix could internally expand to a 'test|tests|testing' query based on the dictionary's contents. This expansion process is entirely invisible to the application, with the exception that the separate per-keyword statistics for all the matched keywords are now also reported.</p>
<p>For substring (infix) searches, extended wildcards can be used. Special characters such as <code>?</code> and <code>%</code> are compatible with substring (infix) search (e.g., <code>t?st*</code>, <code>run%</code>, <code>*abc*</code>). Note that the <a href="13-searching.html#wildcard-operators">wildcards operators</a> and the <a href="../../13-searching.html#regex-operator">REGEX</a> only function with <code>dict=keywords</code>.</p>
<p>Indexing with a keywords dictionary is approximately 1.1x to 1.3x slower than regular, non-substring indexing - yet significantly faster than substring indexing (either prefix or infix). The index size should only be slightly larger than that of the standard non-substring table, with a total difference of 1..10% percent. The time it takes for regular keyword searching should be nearly the same or identical across all three index types discussed (CRC non-substring, CRC substring, keywords). Substring searching time can significantly fluctuate based on how many actual keywords match the given substring (i.e., how many keywords the search term expands into). The maximum number of matched keywords is limited by the <a href="../../20-server_settings.html#expansion_limit">expansion_limit</a> directive.</p>
<p>In summary, keywords and CRC dictionaries offer two different trade-off decisions for substring searching. You can opt to either sacrifice indexing time and index size to achieve the fastest worst-case searches (CRC dictionary), or minimally impact indexing time but sacrifice worst-case searching time when the prefix expands into a high number of keywords (keywords dictionary).</p>
<!-- request SQL -->

<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">dict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;keywords&#39;</span>
</code></pre></div>

<!-- request JSON -->

<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) dict = &#39;keywords&#39;&quot;</span>
</code></pre></div>

<!-- request PHP -->

<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">             &#39;dict&#39; =&gt; &#39;keywords&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>

<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) dict = </span><span class="se">\&#39;</span><span class="s1">keywords</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) dict = \&#39;keywords\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request Java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) dict = &#39;keywords&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price float) dict = &#39;keywords&#39;&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">dict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">keywords</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h3 id="embedded_limit">embedded_limit</h3>
<div class="codehilite"><pre><span></span><code><span class="na">embedded_limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">size</span>
</code></pre></div>

<!-- example embedded_limit -->
<p>Embedded exceptions, wordforms, or stop words file size limit. Optional, default is 16K.</p>
<p>When you create a table the above mentioned files can be either saved externally along with the table or embedded directly into the table. Files sized under <code>embedded_limit</code> get stored into the table. For bigger files, only the file names are stored. This also simplifies moving table files to a different machine; you may get by just copying a single file.</p>
<p>With smaller files, such embedding reduces the number of the external files on which the table depends, and helps maintenance. But at the same time it makes no sense to embed a 100 MB wordforms dictionary into a tiny delta table. So there needs to be a size threshold, and <code>embedded_limit</code> is that threshold.</p>
<!-- request CONFIG -->

<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">embedded_limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">32K</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>

<!-- end -->

</div>
</div>
<h3 id="global_idf">global_idf</h3>
<div class="codehilite"><pre><span></span><code><span class="na">global_idf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">/path/to/global.idf</span>
</code></pre></div>

<!-- example global_idf -->
<p>The path to a file with global (cluster-wide) keyword IDFs. Optional, default is empty (use local IDFs).</p>
<p>On a multi-table cluster, per-keyword frequencies are quite likely to differ across different tables. That means that when the ranking function uses TF-IDF based values, such as BM25 family of factors, the results might be ranked slightly differently depending on what cluster node they reside.</p>
<p>The easiest way to fix that issue is to create and utilize a global frequency dictionary, or a global IDF file for short. This directive lets you specify the location of that file. It is suggested (but not required) to use an .idf extension. When the IDF file is specified for a given table <em>and</em> <a href="../../06-creating_a_table.html#global_idf">OPTION global_idf</a> is set to 1, the engine will use the keyword frequencies and collection documents counts from the global_idf file, rather than just the local table. That way, IDFs and the values that depend on them will stay consistent across the cluster.</p>
<p>IDF files can be shared across multiple tables. Only a single copy of an IDF file will be loaded by <code>searchd</code>, even when many tables refer to that file. Should the contents of an IDF file change, the new contents can be loaded with a SIGHUP.</p>
<p>You can build an .idf file using <a href="../../23-miscellaneous_tools.html#indextool">indextool</a> utility, by dumping dictionaries using <code>--dumpdict dict.txt --stats</code> switch first, then converting those to .idf format using <code>--buildidf</code>, then merging all the .idf files across cluster using <code>--mergeidf</code>.</p>
<!-- request SQL -->

<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">global_idf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;/usr/local/manticore/var/global.idf&#39;</span>
</code></pre></div>

<!-- request JSON -->

<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) global_idf = &#39;/usr/local/manticore/var/global.idf&#39;&quot;</span>
</code></pre></div>

<!-- request PHP -->

<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">             &#39;global_idf&#39; =&gt; &#39;/usr/local/manticore/var/global.idf&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>

<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) global_idf = </span><span class="se">\&#39;</span><span class="s1">/usr/local/manticore/var/global.idf</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) global_idf = \&#39;/usr/local/manticore/var/global.idf\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request Java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) global_idf = &#39;/usr/local/manticore/var/global.idf&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">Sql</span><span class="p">(</span><span class="s2">&quot;CREATE TABLE products(title text, price float) global_idf = &#39;/usr/local/manticore/var/global.idf&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">global_idf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">/usr/local/manticore/var/global.idf</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h3 id="hitless_words">hitless_words</h3>
<div class="codehilite"><pre><span></span><code><span class="na">hitless_words</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">{all|path/to/file}</span>
</code></pre></div>

<!-- example hitless_words -->
<p>Hitless words list. Optional, allowed values are 'all', or a list file name.</p>
<p>By default, Manticore full-text index stores not only a list of matching documents for every given keyword, but also a list of its in-document positions (known as hitlist). Hitlists enables phrase, proximity, strict order and other advanced types of searching, as well as phrase proximity ranking. However, hitlists for specific frequent keywords (that can not be stopped for some reason despite being frequent) can get huge and thus slow to process while querying. Also, in some cases we might only care about boolean keyword matching, and never need position-based searching operators (such as phrase matching) nor phrase ranking.</p>
<p><code>hitless_words</code> lets you create indexes that either do not have positional information (hitlists) at all, or skip it for specific keywords.</p>
<p>Hitless index will generally use less space than the respective regular full-text index (about 1.5x can be expected). Both indexing and searching should be faster, at a cost of missing positional query and ranking support.  </p>
<p>If used in positional queries (e.g. phrase queries) the hitless words are taken out from them and used as operand without a position.  For example if "hello" and "world" are hitless and "simon" and "says" are not hitless, the phrase query  <code>"simon says hello world"</code> will be converted to <code>("simon says" &amp; hello &amp; world)</code>, matching "hello" and "world" anywhere in the document and "simon says" as an exact phrase.</p>
<p>A positional query than contains only hitless words will result in an empty phrase node, therefore the entire query will return an empty result and a warning. If the whole dictionary is hitless (using <code>all</code>) only boolean matching can be used on the respective index.</p>
<!-- request SQL -->

<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">hitless_words</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;all&#39;</span>
</code></pre></div>

<!-- request JSON -->

<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) hitless_words = &#39;all&#39;&quot;</span>
</code></pre></div>

<!-- request PHP -->

<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">            &#39;hitless_words&#39; =&gt; &#39;all&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>

<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) hitless_words = </span><span class="se">\&#39;</span><span class="s1">all</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) hitless_words = \&#39;all\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request Java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) hitless_words = &#39;all&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price float) hitless_words = &#39;all&#39;&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">hitless_words</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">all</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h3 id="index_field_lengths">index_field_lengths</h3>
<div class="codehilite"><pre><span></span><code><span class="na">index_field_lengths</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">{0|1}</span>
</code></pre></div>

<!-- example index_field_lengths -->
<p>Enables computing and storing of field lengths (both per-document and average per-index values) into the full-text index. Optional, default is 0 (do not compute and store).</p>
<p>When <code>index_field_lengths</code> is set to 1 Manticore will:</p>
<ul>
<li>create a respective length attribute for every full-text field, sharing the same name but with <code>__len</code> suffix</li>
<li>compute a field length (counted in keywords) for every document and store in to a respective attribute</li>
<li>compute the per-index averages. The lengths attributes will have a special TOKENCOUNT type, but their values are in fact regular 32-bit integers, and their values are generally accessible.</li>
</ul>
<p><a href="../../15-functions.html#bm25a%28%29">BM25A()</a> and <a href="../../15-functions.html#bm25f%28%29">BM25F()</a> functions in the expression ranker are based on these lengths and require <code>index_field_lengths</code> to be enabled. Historically, Manticore used a simplified, stripped-down variant of BM25 that, unlike the complete function, did <strong>not</strong> account for document length. There's also support for both a complete variant of BM25, and its extension towards multiple fields, called BM25F. They require per-document length and per-field lengths, respectively. Hence the additional directive.</p>
<!-- request SQL -->

<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">index_field_lengths</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;1&#39;</span>
</code></pre></div>

<!-- request JSON -->

<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) index_field_lengths = &#39;1&#39;&quot;</span>
</code></pre></div>

<!-- request PHP -->

<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">            &#39;index_field_lengths&#39; =&gt; &#39;1&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>

<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) index_field_lengths = </span><span class="se">\&#39;</span><span class="s1">1</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) index_field_lengths = \&#39;1\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request Java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) index_field_lengths = &#39;1&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price float) index_field_lengths = &#39;1&#39;&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">index_field_lengths</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h3 id="index_token_filter">index_token_filter</h3>
<div class="codehilite"><pre><span></span><code><span class="na">index_token_filter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">my_lib.so:custom_blend:chars=@</span><span class="c1">#&amp;</span>
</code></pre></div>

<!-- example index_token_filter -->
<p>Index-time token filter for full-text indexing. Optional, default is empty.</p>
<p>The index_token_filter directive specifies an optional index-time token filter for full-text indexing. This directive is used to create a custom tokenizer that makes tokens according to custom rules. The filter is created by the indexer on indexing source data into a plain table or by an RT table on processing <code>INSERT</code> or <code>REPLACE</code> statements. The plugins are defined using the format <code>library name:plugin name:optional string of settings</code>. For example, <code>my_lib.so:custom_blend:chars=@#&amp;</code>.</p>
<!-- request SQL -->

<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">index_token_filter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;my_lib.so:custom_blend:chars=@#&amp;&#39;</span>
</code></pre></div>

<!-- request JSON -->

<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) index_token_filter = &#39;my_lib.so:custom_blend:chars=@#&amp;&#39;&quot;</span>
</code></pre></div>

<!-- request PHP -->

<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">            &#39;index_token_filter&#39; =&gt; &#39;my_lib.so:custom_blend:chars=@#&amp;&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>

<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) index_token_filter = </span><span class="se">\&#39;</span><span class="s1">my_lib.so:custom_blend:chars=@#&amp;</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) index_token_filter = \&#39;my_lib.so:custom_blend:chars=@#&amp;\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request Java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) index_token_filter = &#39;my_lib.so:custom_blend:chars=@#&amp;&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code><span class="nt">utilsApi</span><span class="p">.</span><span class="nc">Sql</span><span class="o">(</span><span class="s2">&quot;CREATE TABLE products(title text, price float) index_token_filter = &#39;my_lib.so:custom_blend:chars=@#&amp;&#39;&quot;</span><span class="o">);</span>
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">index_token_filter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">my_lib.so:custom_blend:chars=@</span><span class="c1">#&amp;</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h3 id="overshort_step">overshort_step</h3>
<div class="codehilite"><pre><span></span><code><span class="na">overshort_step</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">{0|1}</span>
</code></pre></div>

<!-- example overshort_step -->
<p>Position increment on overshort (less than <a href="../../06-creating_a_table.html#min_word_len">min_word_len</a>) keywords. Optional, allowed values are 0 and 1, default is 1.</p>
<!-- request SQL -->

<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">overshort_step</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;1&#39;</span>
</code></pre></div>

<!-- request JSON -->

<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) overshort_step = &#39;1&#39;&quot;</span>
</code></pre></div>

<!-- request PHP -->

<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">            &#39;overshort_step&#39; =&gt; &#39;1&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>

<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) overshort_step = </span><span class="se">\&#39;</span><span class="s1">1</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) overshort_step = \&#39;1\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request Java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) overshort_step = &#39;1&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price float) overshort_step = &#39;1&#39;&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">overshort_step</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h3 id="phrase_boundary">phrase_boundary</h3>
<div class="codehilite"><pre><span></span><code><span class="na">phrase_boundary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">., ?, !, U+2026</span><span class="w"> </span><span class="c1"># horizontal ellipsis</span>
</code></pre></div>

<!-- example phrase_boundary -->
<p>Phrase boundary characters list. Optional, default is empty.</p>
<p>This list controls what characters will be treated as phrase boundaries, in order to adjust word positions and enable phrase-level search emulation through proximity search. The syntax is similar to <a href="../../06-creating_a_table.html#charset_table">charset_table</a>, but mappings are not allowed and the boundary characters must not overlap with anything else.</p>
<p>On phrase boundary, additional word position increment (specified by <a href="../../06-creating_a_table.html#phrase_boundary_step">phrase_boundary_step</a>) will be added to current word position. This enables phrase-level searching through proximity queries: words in different phrases will be guaranteed to be more than phrase_boundary_step distance away from each other; so proximity search within that distance will be equivalent to phrase-level search.</p>
<p>Phrase boundary condition will be raised if and only if such character is followed by a separator; this is to avoid abbreviations such as S.T.A.L.K.E.R or URLs being treated as several phrases.</p>
<!-- request SQL -->

<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">phrase_boundary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;., ?, !, U+2026&#39;</span><span class="w"> </span><span class="n">phrase_boundary_step</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;10&#39;</span>
</code></pre></div>

<!-- request JSON -->

<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) phrase_boundary = &#39;., ?, !, U+2026&#39; phrase_boundary_step = &#39;10&#39;&quot;</span>
</code></pre></div>

<!-- request PHP -->

<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">             &#39;phrase_boundary&#39; =&gt; &#39;., ?, !, U+2026&#39;,</span>
<span class="x">             &#39;phrase_boundary_step&#39; =&gt; &#39;10&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>

<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) phrase_boundary = </span><span class="se">\&#39;</span><span class="s1">., ?, !, U+2026</span><span class="se">\&#39;</span><span class="s1"> phrase_boundary_step = </span><span class="se">\&#39;</span><span class="s1">10</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) phrase_boundary = \&#39;., ?, !, U+2026\&#39; phrase_boundary_step = \&#39;10\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request Java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) phrase_boundary = &#39;., ?, !, U+2026&#39; phrase_boundary_step = &#39;10&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price float) phrase_boundary = &#39;., ?, !, U+2026&#39; phrase_boundary_step = &#39;10&#39;&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">phrase_boundary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">., ?, !, U+2026</span>
<span class="w">  </span><span class="na">phrase_boundary_step</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">10</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h3 id="phrase_boundary_step">phrase_boundary_step</h3>
<div class="codehilite"><pre><span></span><code><span class="na">phrase_boundary_step</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">100</span>
</code></pre></div>

<!-- example phrase_boundary_step -->
<p>Phrase boundary word position increment. Optional, default is 0.</p>
<p>On phrase boundary, current word position will be additionally incremented by this number.</p>
<!-- request SQL -->

<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">phrase_boundary_step</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;100&#39;</span><span class="w"> </span><span class="n">phrase_boundary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;., ?, !, U+2026&#39;</span>
</code></pre></div>

<!-- request JSON -->

<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) phrase_boundary_step = &#39;100&#39; phrase_boundary = &#39;., ?, !, U+2026&#39;&quot;</span>
</code></pre></div>

<!-- request PHP -->

<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">             &#39;phrase_boundary_step&#39; =&gt; &#39;100&#39;,</span>
<span class="x">             &#39;phrase_boundary&#39; =&gt; &#39;., ?, !, U+2026&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>

<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) phrase_boundary_step = </span><span class="se">\&#39;</span><span class="s1">100</span><span class="se">\&#39;</span><span class="s1"> phrase_boundary = </span><span class="se">\&#39;</span><span class="s1">., ?, !, U+2026</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) phrase_boundary_step = \&#39;100\&#39; phrase_boundary = \&#39;., ?, !, U+2026\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request Java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) phrase_boundary_step = &#39;100&#39; phrase_boundary = &#39;., ?, !, U+2026&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price float) phrase_boundary_step = &#39;100&#39; phrase_boundary = &#39;., ?, !, U+2026&#39;&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">phrase_boundary_step</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">100</span>
<span class="w">  </span><span class="na">phrase_boundary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">., ?, !, U+2026</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h3 id="regexp_filter">regexp_filter</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># index &#39;13&quot;&#39; as &#39;13inch&#39;</span>
<span class="na">regexp_filter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">\b(\d+)\&quot; =&gt; \1inch</span>

<span class="c1"># index &#39;blue&#39; or &#39;red&#39; as &#39;color&#39;</span>
<span class="na">regexp_filter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">(blue|red) =&gt; color</span>
</code></pre></div>

<!-- example regexp_filter -->
<p>Regular expressions (regexps) used to filter the fields and queries. This directive is optional, multi-valued, and its default is an empty list of regular expressions. The regular expressions engine used by Manticore Search is Google's RE2, which is known for its speed and safety. For detailed information on the syntax supported by RE2, you can visit the <a href="https://github.com/google/re2/wiki/Syntax">RE2 syntax guide</a>.</p>
<p>In certain applications such as product search, there can be many ways to refer to a product, model, or property. For example, <code>iPhone 3gs</code> and <code>iPhone 3 gs</code> (or even <code>iPhone3 gs</code>) are very likely to refer to the same product. Another example could be different ways to express a laptop screen size, such as <code>13-inch</code>, <code>13 inch</code>, <code>13"</code>, or <code>13in</code>.</p>
<p>Regexps provide a mechanism to specify rules tailored to handle such cases. In the first example, you could possibly use a wordforms file to handle a handful of iPhone models, but in the second example, it's better to specify rules that would normalize "13-inch" and "13in" to something identical.</p>
<p>Regular expressions listed in <code>regexp_filter</code> are applied in the order they are listed, at the earliest stage possible, before any other processing (including <a href="../../06-creating_a_table.html#exceptions">exceptions</a>), even before tokenization. That is, regexps are applied to the raw source fields when indexing, and to the raw search query text when searching.</p>
<!-- request SQL -->

<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">regexp_filter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;(blue|red) =&gt; color&#39;</span>
</code></pre></div>

<!-- request JSON -->

<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) regexp_filter = &#39;(blue|red) =&gt; color&#39;&quot;</span>
</code></pre></div>

<!-- request PHP -->

<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">            &#39;regexp_filter&#39; =&gt; &#39;(blue|red) =&gt; color&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>

<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) regexp_filter = </span><span class="se">\&#39;</span><span class="s1">(blue|red) =&gt; color</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) regexp_filter = \&#39;(blue|red) =&gt; color\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
java
</div>

<!-- request Java -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) regexp_filter = &#39;(blue|red) =&gt; color&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>

<!-- request C# -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="n">Sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) regexp_filter = &#39;(blue|red) =&gt; color&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="c1"># index &#39;13&quot;&#39; as &#39;13inch&#39;</span>
<span class="w">  </span><span class="na">regexp_filter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">\b(\d+)\&quot; =&gt; \1inch</span>

<span class="w">  </span><span class="c1"># index &#39;blue&#39; or &#39;red&#39; as &#39;color&#39;</span>
<span class="w">  </span><span class="na">regexp_filter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">(blue|red) =&gt; color</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>
<!-- proofread -->
        
    </section>
    
    <section class="chapter-section" id="toc-06.03.05-wildcard_searching_settings">
        <a class="chapter-link" href="#toc-06.03.05-wildcard_searching_settings"> ¶ 6.3.5</a>

        
        <h1 id="wildcard-searching-settings">Wildcard searching settings</h1>
<p>Wildcard searching is a common text search type. In Manticore, it is performed at the dictionary level. By default, both plain and RT tables use a dictionary type called <a href="../../06-creating_a_table.html#dict">dict</a>. In this mode, words are stored as they are, so enabling wildcarding does not affect the size of the table. When a wildcard search is performed, the dictionary is searched to find all possible expansions of the wildcarded word. This expansion can be problematic in terms of computation at query time when the expanded word provides many expansions or expansions that have huge hitlists, especially in the case of infixes where the wildcard is added at the start and end of the word. To avoid such problems, the  <a href="../../20-server_settings.html#expansion_limit">expansion_limit</a> can be used.</p>
<h2 id="min_prefix_len">min_prefix_len</h2>
<!-- example min_prefix_len -->

<div class="codehilite"><pre><span></span><code><span class="na">min_prefix_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">length</span>
</code></pre></div>

<p>This setting determines the minimum word prefix length to index and search. By default, it is set to 0, meaning prefixes are not allowed.</p>
<p>Prefixes allow for wildcard searching by <code>wordstart*</code> wildcards.</p>
<p>For example, if the word "example" is indexed with min_prefix_len=3, it can be found by searching for "exa", "exam", "examp", "exampl", as well as the full word.</p>
<p>Note that with <a href="../../06-creating_a_table.html#dict">dict</a>=crc min_prefix_len will affect the size of the full-text index since each word expansion will be stored additionally.</p>
<p>Manticore can differentiate perfect word matches from prefix matches and rank the former higher if the following conditions are met:</p>
<ul>
<li><a href="../../06-creating_a_table.html#dict">dict</a>=keywords (on by default)</li>
<li><a href="../../06-creating_a_table.html#index_exact_words">index_exact_words</a>=1 (off by default),</li>
<li><a href="../../13-searching.html#expand_keywords">expand_keywords</a>=1 (also off by default)</li>
</ul>
<p>Note that with either  <a href="../../06-creating_a_table.html#dict">dict</a>=crc mode or any of the above options disabled, it is not possible to differentiate between prefixes and full words, and perfect word matches cannot be ranked higher.</p>
<p>When the <a href="../../06-creating_a_table.html#min_infix_len">minimum infix length</a> is set to a positive number, the minimum prefix length is always considered 1.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>

<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">min_prefix_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;3&#39;</span>
</code></pre></div>



<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) min_prefix_len = &#39;3&#39;&quot;</span>
</code></pre></div>



<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">            &#39;min_prefix_len&#39; =&gt; &#39;3&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) min_prefix_len = </span><span class="se">\&#39;</span><span class="s1">3</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) min_prefix_len = \&#39;3\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Java
</div>
<!-- request Java -->

<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) min_prefix_len = &#39;3&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>
<!-- request C# -->

<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price float) min_prefix_len = &#39;3&#39;&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">min_prefix_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">3</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h2 id="min_infix_len">min_infix_len</h2>
<!-- example min_infix_len -->

<div class="codehilite"><pre><span></span><code><span class="na">min_infix_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">length</span>
</code></pre></div>

<p>The min_infix_len setting determines the minimum length of an infix prefix to index and search. It is optional and its default value is 0, which means that infixes are not allowed. The minimum allowed non-zero value is 2.</p>
<p>When enabled, infixes allow for wildcard searching with term patterns like <code>start*</code>, <code>*end</code>, <code>*middle*</code>, , and so on. It also allows you to disable too short wildcards if they are too expensive to search for.</p>
<p>If the following conditions are met, Manticore can differentiate perfect word matches from infix matches and rank the former higher:</p>
<ul>
<li><a href="../../06-creating_a_table.html#dict">dict</a>=keywords (on by default)</li>
<li><a href="../../06-creating_a_table.html#dict">index_exact_words</a>=1 (off by default),</li>
<li><a href="../../13-searching.html#expand_keywords">expand_keywords</a>=1 (also off by default)</li>
</ul>
<p>Note that with the <a href="../../06-creating_a_table.html#dict">dict</a>=crc mode or any of the above options disabled, there is no way to differentiate between infixes and full words, and thus perfect word matches cannot be ranked higher.</p>
<p>Infix wildcard search query time can vary greatly, depending on how many keywords the substring will actually expand to. Short and frequent syllables like <code>*in*</code> or <code>*ti*</code> might expand to way too many keywords, all of which would need to be matched and processed. Therefore, to generally enable substring searches, you would set min_infix_len to 2. To limit the impact from wildcard searches with too short wildcards, you might set it higher.</p>
<p>Infixes must be at least 2 characters long, and wildcards like <code>*a*</code> are not allowed for performance reasons.</p>
<p>When min_infix_len is set to a positive number, the <a href="../../06-creating_a_table.html#min_prefix_len">minimum prefix length</a> is considered 1. For <a href="../../06-creating_a_table.html#dict">dict</a> word infixing and prefixing cannot be both enabled at the same time. For <a href="../../06-creating_a_table.html#dict">dict</a> and other fields to have prefixes declared with <a href="../../06-creating_a_table.html#prefix_fields">prefix_fields</a>, it is forbidden to declare the same field in both lists.</p>
<p>If dict=keywords, besides the wildcard <code>*</code> two other wildcard characters can be used:</p>
<ul>
<li><code>?</code> can match any (one) character:  <code>t?st</code> will match <code>test</code>, but not <code>teast</code></li>
<li><code>%</code> can match zero or one character:  <code>tes%</code> will match <code>tes</code> or <code>test</code>, but not <code>testing</code></li>
</ul>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>

<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">min_infix_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;3&#39;</span>
</code></pre></div>



<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) min_infix_len = &#39;3&#39;&quot;</span>
</code></pre></div>



<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">            &#39;min_infix_len&#39; =&gt; &#39;3&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) min_infix_len = </span><span class="se">\&#39;</span><span class="s1">3</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) min_infix_len = \&#39;3\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Java
</div>
<!-- request Java -->

<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) min_infix_len = &#39;3&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>
<!-- request C# -->

<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price float) min_infix_len = &#39;3&#39;&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">min_infix_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">3</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h2 id="prefix_fields">prefix_fields</h2>
<!-- example prefix_fields -->

<div class="codehilite"><pre><span></span><code><span class="na">prefix_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">field1[, field2, ...]</span>
</code></pre></div>

<p>The prefix_fields setting is used to limit prefix indexing to specific full-text fields in <a href="../../06-creating_a_table.html#dict">dict=crc</a> mode. By default, all fields are indexed in prefix mode, but because prefix indexing can affect both indexing and searching performance, it may be desired to limit it to certain fields.</p>
<p>To limit prefix indexing to specific fields, use the prefix_fields setting followed by a comma-separated list of field names. If prefix_fields is not set, then all fields will be indexed in prefix mode.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
CONFIG
</div>

<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">prefix_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title, name</span>
<span class="w">  </span><span class="na">min_prefix_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">3</span>
<span class="w">  </span><span class="na">dict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">crc</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h2 id="infix_fields">infix_fields</h2>
<!-- example infix_fields -->

<div class="codehilite"><pre><span></span><code><span class="na">infix_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">field1[, field2, ...]</span>
</code></pre></div>

<p>The infix_fields setting allows you to specify a list of full-text fields to limit infix indexing to. This applies to <a href="../../06-creating_a_table.html#dict">dict=crc</a> only and is optional, with the default being to index all fields in infix mode.<br />
This setting is similar to <a href="../../06-creating_a_table.html#dict">prefix_fields</a>, but instead allows you to limit infix indexing to specific fields.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
CONFIG
</div>

<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">infix_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title, name</span>
<span class="w">  </span><span class="na">min_infix_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">3</span>
<span class="w">  </span><span class="na">dict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">crc</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h2 id="max_substring_len">max_substring_len</h2>
<!-- example max_substring_len -->

<div class="codehilite"><pre><span></span><code><span class="na">max_substring_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">length</span>
</code></pre></div>

<p>The max_substring_len directive sets the maximum substring length to be indexed for either prefix or infix searches. This setting is optional, and its default value is 0 (which means that all possible substrings are indexed). It only applies to <a href="../../06-creating_a_table.html#dict">dict</a>.</p>
<p>By default, substring indexing in <a href="../../06-creating_a_table.html#dict">dict</a> indexes  <strong>all</strong> possible substrings as separate keywords, which can result in an overly large full-text index. Therefore, the max_substring_len directive allows you to skip too-long substrings that will probably never be searched for.</p>
<p>For example, a test table of 10,000 blog posts takes up a different amount of disk space depending on the settings:</p>
<ul>
<li>6.4 MB baseline (no substrings)</li>
<li>24.3 MB (3.8x) with min_prefix_len = 3</li>
<li>22.2 MB (3.5x) with min_prefix_len = 3, max_substring_len = 8</li>
<li>19.3 MB (3.0x) with min_prefix_len = 3, max_substring_len = 6</li>
<li>94.3 MB (14.7x) with min_infix_len = 3</li>
<li>84.6 MB (13.2x) with min_infix_len = 3, max_substring_len = 8</li>
<li>70.7 MB (11.0x) with min_infix_len = 3, max_substring_len = 6</li>
</ul>
<p>Therefore, limiting the max substring length can save 10-15% of the table size.</p>
<p>When using dict=keywords mode, there is no performance impact associated with substring length. Therefore, this directive is not applicable and is intentionally forbidden in that case. However, if required, you can still limit the length of a substring that you search for in the application code.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
CONFIG
</div>

<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">max_substring_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">12</span>
<span class="w">  </span><span class="na">min_infix_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">3</span>
<span class="w">  </span><span class="na">dict</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">crc</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h2 id="expand_keywords">expand_keywords</h2>
<!-- example expand_keywords -->

<div class="codehilite"><pre><span></span><code><span class="na">expand_keywords</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">{0|1|exact|star}</span>
</code></pre></div>

<p>This setting expands keywords with their exact forms and/or with stars when possible. The supported values are:</p>
<ul>
<li>1 -  expand to both the exact form and the form with the stars. For instance,<code>running</code> will become <code>(running | *running* | =running)</code></li>
<li><code>exact</code> - - augment the keyword with only its exact form. For instance, <code>running</code> will become <code>(running | =running)</code></li>
<li><code>star</code> - augment the keyword by adding <code>*</code> around it. For instance, <code>running</code> will become <code>(running | *running*)</code><br />
This setting is optional, and the default value is 0 (keywords are not expanded).</li>
</ul>
<p>Queries against tables with <code>expand_keywords</code> feature enabled are internally expanded as follows: if the table was built with prefix or infix indexing enabled, every keyword gets internally replaced with a disjunction of the keyword itself and a respective prefix or infix (keyword with stars). If the table was built with both stemming and <a href="../../06-creating_a_table.html#index_exact_words">index_exact_words</a> enabled, exact form is also added.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>

<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">expand_keywords</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;1&#39;</span>
</code></pre></div>



<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) expand_keywords = &#39;1&#39;&quot;</span>
</code></pre></div>



<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">            &#39;expand_keywords&#39; =&gt; &#39;1&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) expand_keywords = </span><span class="se">\&#39;</span><span class="s1">1</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) expand_keywords = \&#39;1\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Java
</div>
<!-- request Java -->

<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) expand_keywords = &#39;1&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>
<!-- request C# -->

<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price float) expand_keywords = &#39;1&#39;&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">expand_keywords</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<!-- example expand_keywords2 -->

<p>Expanded queries take naturally longer to complete, but can possibly improve the search quality, as the documents with exact form matches should be ranked generally higher than documents with stemmed or infix matches.</p>
<p><strong>Note that the existing query syntax does not allow to emulate this kind of expansion</strong>, because internal expansion works on keyword level and expands keywords within phrase or quorum operators too (which is not possible through the query syntax). Take a look at the examples and how expand_keywords affects the search result weights and how "runsy" is found by "runs" w/o the need to add a star:</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
expand_keywords is enabled
</div>
<!-- request expand_keywords_enabled -->

<div class="codehilite"><pre><span></span><code><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">t</span><span class="p">(</span><span class="n">f</span><span class="w"> </span><span class="nb">text</span><span class="p">)</span><span class="w"> </span><span class="n">min_infix_len</span><span class="o">=</span><span class="s1">&#39;2&#39;</span><span class="w"> </span><span class="n">expand_keywords</span><span class="o">=</span><span class="s1">&#39;1&#39;</span><span class="w"> </span><span class="n">morphology</span><span class="o">=</span><span class="s1">&#39;stem_en&#39;</span><span class="p">;</span>
<span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">warning</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>

<span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="k">values</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;running&#39;</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;runs&#39;</span><span class="p">),(</span><span class="mi">3</span><span class="p">,</span><span class="s1">&#39;runsy&#39;</span><span class="p">);</span>
<span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>

<span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="p">()</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="k">match</span><span class="p">(</span><span class="s1">&#39;runs&#39;</span><span class="p">);</span>
<span class="o">+</span><span class="c1">------+---------+----------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">f</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">weight</span><span class="p">()</span><span class="w"> </span><span class="o">|</span>
<span class="o">+</span><span class="c1">------+---------+----------+</span>
<span class="o">|</span><span class="w">    </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">runs</span><span class="w">    </span><span class="o">|</span><span class="w">     </span><span class="mi">1560</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="mi">1500</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w">    </span><span class="mi">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">runsy</span><span class="w">   </span><span class="o">|</span><span class="w">     </span><span class="mi">1500</span><span class="w"> </span><span class="o">|</span>
<span class="o">+</span><span class="c1">------+---------+----------+</span>
<span class="mi">3</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>

<span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">drop</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">t</span><span class="p">;</span>
<span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>

<span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">t</span><span class="p">(</span><span class="n">f</span><span class="w"> </span><span class="nb">text</span><span class="p">)</span><span class="w"> </span><span class="n">min_infix_len</span><span class="o">=</span><span class="s1">&#39;2&#39;</span><span class="w"> </span><span class="n">expand_keywords</span><span class="o">=</span><span class="s1">&#39;exact&#39;</span><span class="w"> </span><span class="n">morphology</span><span class="o">=</span><span class="s1">&#39;stem_en&#39;</span><span class="p">;</span>
<span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">warning</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>

<span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="k">values</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;running&#39;</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;runs&#39;</span><span class="p">),(</span><span class="mi">3</span><span class="p">,</span><span class="s1">&#39;runsy&#39;</span><span class="p">);</span>
<span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>

<span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="p">()</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="k">match</span><span class="p">(</span><span class="s1">&#39;running&#39;</span><span class="p">);</span>
<span class="o">+</span><span class="c1">------+---------+----------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">f</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">weight</span><span class="p">()</span><span class="w"> </span><span class="o">|</span>
<span class="o">+</span><span class="c1">------+---------+----------+</span>
<span class="o">|</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="mi">1590</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w">    </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">runs</span><span class="w">    </span><span class="o">|</span><span class="w">     </span><span class="mi">1500</span><span class="w"> </span><span class="o">|</span>
<span class="o">+</span><span class="c1">------+---------+----------+</span>
<span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
expand_keywords is disabled
</div>

<!-- request expand_keywords_disabled -->


<div class="codehilite"><pre><span></span><code><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">t</span><span class="p">(</span><span class="n">f</span><span class="w"> </span><span class="nb">text</span><span class="p">)</span><span class="w"> </span><span class="n">min_infix_len</span><span class="o">=</span><span class="s1">&#39;2&#39;</span><span class="w"> </span><span class="n">morphology</span><span class="o">=</span><span class="s1">&#39;stem_en&#39;</span><span class="p">;</span>
<span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">warning</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>

<span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="k">values</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;running&#39;</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;runs&#39;</span><span class="p">),(</span><span class="mi">3</span><span class="p">,</span><span class="s1">&#39;runsy&#39;</span><span class="p">);</span>
<span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>

<span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="p">()</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="k">match</span><span class="p">(</span><span class="s1">&#39;runs&#39;</span><span class="p">);</span>
<span class="o">+</span><span class="c1">------+---------+----------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">f</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">weight</span><span class="p">()</span><span class="w"> </span><span class="o">|</span>
<span class="o">+</span><span class="c1">------+---------+----------+</span>
<span class="o">|</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="mi">1500</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w">    </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">runs</span><span class="w">    </span><span class="o">|</span><span class="w">     </span><span class="mi">1500</span><span class="w"> </span><span class="o">|</span>
<span class="o">+</span><span class="c1">------+---------+----------+</span>
<span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>

<span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">drop</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">t</span><span class="p">;</span>
<span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>

<span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">t</span><span class="p">(</span><span class="n">f</span><span class="w"> </span><span class="nb">text</span><span class="p">)</span><span class="w"> </span><span class="n">min_infix_len</span><span class="o">=</span><span class="s1">&#39;2&#39;</span><span class="w"> </span><span class="n">morphology</span><span class="o">=</span><span class="s1">&#39;stem_en&#39;</span><span class="p">;</span>
<span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">warning</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>

<span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">insert</span><span class="w"> </span><span class="k">into</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="k">values</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;running&#39;</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="s1">&#39;runs&#39;</span><span class="p">),(</span><span class="mi">3</span><span class="p">,</span><span class="s1">&#39;runsy&#39;</span><span class="p">);</span>
<span class="n">Query</span><span class="w"> </span><span class="n">OK</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="n">affected</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>

<span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">weight</span><span class="p">()</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="k">match</span><span class="p">(</span><span class="s1">&#39;running&#39;</span><span class="p">);</span>
<span class="o">+</span><span class="c1">------+---------+----------+</span>
<span class="o">|</span><span class="w"> </span><span class="n">id</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">f</span><span class="w">       </span><span class="o">|</span><span class="w"> </span><span class="n">weight</span><span class="p">()</span><span class="w"> </span><span class="o">|</span>
<span class="o">+</span><span class="c1">------+---------+----------+</span>
<span class="o">|</span><span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="mi">1500</span><span class="w"> </span><span class="o">|</span>
<span class="o">|</span><span class="w">    </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">runs</span><span class="w">    </span><span class="o">|</span><span class="w">     </span><span class="mi">1500</span><span class="w"> </span><span class="o">|</span>
<span class="o">+</span><span class="c1">------+---------+----------+</span>
<span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<p>This directive does not affect <a href="../../12-data_creation_and_modification.html#indexer-tool">indexer</a> in any way, it only affects <a href="../../05-starting_the_server.html#toc-05.02-manually">searchd</a>.</p>
<h2 id="expansion_limit">expansion_limit</h2>
<div class="codehilite"><pre><span></span><code><span class="na">expansion_limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">number</span>
</code></pre></div>

<p>Maximum number of expanded keywords for a single wildcard. Details are <a href="../../20-server_settings.html#expansion_limit">here</a>.</p>
<!-- proofread -->
        
    </section>
    
    <section class="chapter-section" id="toc-06.03.06-ignoring_stop_words">
        <a class="chapter-link" href="#toc-06.03.06-ignoring_stop_words"> ¶ 6.3.6</a>

        
        <h1 id="ignoring-stop-words">Ignoring stop words</h1>
<p>Stop words are words that are ignored during indexing and searching, typically due to their high frequency and low value to search results. </p>
<p>Manticore Search applies <a href="../../06-creating_a_table.html#toc-06.03.09-morphology">stemming</a> to stop words by default, which can lead to undesired results, but this can be turned off using the <a href="../../06-creating_a_table.html#stopwords_unstemmed">stopwords_unstemmed</a>.</p>
<p>Small stop word files are stored in the table header, and there is a limit to the size of files that can be embedded, as defined by the <a href="../../06-creating_a_table.html#embedded_limit">embedded_limit</a> option.</p>
<p>Stop words are not indexed, but they do affect keyword positions. For example, if "the" is a stop word, and document 1 contains the phrase "in office" while document 2 contains the phrase "in the office," searching for "in office" as an exact phrase will only return the first document, even though "the" is skipped as a stop word in the second document. This behavior can be modified using the <a href="../../06-creating_a_table.html#stopword_step">stopword_step</a> directive.</p>
<h2 id="stopwords">stopwords</h2>
<div class="codehilite"><pre><span></span><code><span class="na">stopwords</span><span class="o">=</span><span class="s">path/to/stopwords/file[ path/to/another/file ...]</span>
</code></pre></div>

<!-- example stopwords -->
<p>The stopwords setting is optional and by default empty. It allows you to specify the path to one or more stop word files, separated by spaces. All the files will be loaded. In the real-time mode, only absolute paths are allowed.</p>
<p>The stop word file format is simple plain text with UTF-8 encoding. The file data will be tokenized with respect to the <a href="../../06-creating_a_table.html#charset_table">charset_table</a> settings, so you can use the same separators as in the indexed data.</p>
<p>Stop word files can be created manually or semi-automatically. The <a href="../../12-data_creation_and_modification.html#indexer-tool">indexer</a> provides a mode that creates a frequency dictionary of the table, sorted by the keyword frequency. Top keywords from that dictionary can usually be used as stop words. See <a href="../../12-data_creation_and_modification.html#indexer-command-line-arguments">--buildstops</a> and <a href="../../12-data_creation_and_modification.html#indexer-command-line-arguments">--buildfreqs</a> switch for details. Top keywords from that dictionary can usually be used as stop words.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>

<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">stopwords</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;/usr/local/manticore/data/stopwords.txt /usr/local/manticore/data/stopwords-ru.txt /usr/local/manticore/data/stopwords-en.txt&#39;</span>
</code></pre></div>



<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) stopwords = &#39;/usr/local/manticore/data/stopwords.txt stopwords-ru.txt stopwords-en.txt&#39;&quot;</span>
</code></pre></div>



<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">            &#39;stopwords&#39; =&gt; &#39;/usr/local/manticore/data/stopwords.txt stopwords-ru.txt stopwords-en.txt&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) stopwords = </span><span class="se">\&#39;</span><span class="s1">/usr/local/manticore/data/stopwords.txt /usr/local/manticore/data/stopwords-ru.txt /usr/local/manticore/data/stopwords-en.txt</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) stopwords = \&#39;/usr/local/manticore/data/stopwords.txt /usr/local/manticore/data/stopwords-ru.txt /usr/local/manticore/data/stopwords-en.txt\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Java
</div>
<!-- request Java -->

<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) stopwords = &#39;/usr/local/manticore/data/stopwords.txt /usr/local/manticore/data/stopwords-ru.txt /usr/local/manticore/data/stopwords-en.txt&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>
<!-- request C# -->

<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price float) stopwords = &#39;/usr/local/manticore/data/stopwords.txt /usr/local/manticore/data/stopwords-ru.txt /usr/local/manticore/data/stopwords-en.txt&#39;&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">stopwords</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">/usr/local/manticore/data/stopwords.txt</span>
<span class="w">  </span><span class="na">stopwords</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">stopwords-ru.txt stopwords-en.txt</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<p>Alternatively you can use one of the default stop word files that come with Manticore. Currently stop words for 50 languages are available. Here is the full list of aliases for them:</p>
<ul>
<li>af - Afrikaans</li>
<li>ar - Arabic</li>
<li>bg - Bulgarian</li>
<li>bn - Bengali</li>
<li>ca - Catalan</li>
<li>ckb- Kurdish</li>
<li>cz - Czech</li>
<li>da - Danish</li>
<li>de - German</li>
<li>el - Greek</li>
<li>en - English</li>
<li>eo - Esperanto</li>
<li>es - Spain</li>
<li>et - Estonian</li>
<li>eu - Basque</li>
<li>fa - Persian</li>
<li>fi - Finnish</li>
<li>fr - French</li>
<li>ga - Irish</li>
<li>gl - Galician</li>
<li>hi - Hindi</li>
<li>he - Hebrew</li>
<li>hr - Croatian</li>
<li>hu - Hungarian</li>
<li>hy - Armenian</li>
<li>id - Indonesian</li>
<li>it - Italian</li>
<li>ja - Japanese</li>
<li>ko - Korean</li>
<li>la - Latin</li>
<li>lt - Lithuanian</li>
<li>lv - Latvian</li>
<li>mr - Marathi</li>
<li>nl - Dutch</li>
<li>no - Norwegian</li>
<li>pl - Polish</li>
<li>pt - Portuguese</li>
<li>ro - Romanian</li>
<li>ru - Russian</li>
<li>sk - Slovak</li>
<li>sl - Slovenian</li>
<li>so - Somali</li>
<li>st - Sotho</li>
<li>sv - Swedish</li>
<li>sw - Swahili</li>
<li>th - Thai</li>
<li>tr - Turkish</li>
<li>yo - Yoruba</li>
<li>zh - Chinese</li>
<li>zu - Zulu</li>
</ul>
<!-- example stopwords 1 -->
<p>For example, to use stop words for Italian language just put the following line in your config file:</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>

<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">stopwords</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;it&#39;</span>
</code></pre></div>



<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) stopwords = &#39;it&#39;&quot;</span>
</code></pre></div>



<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">            &#39;stopwords&#39; =&gt; &#39;it&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) stopwords = </span><span class="se">\&#39;</span><span class="s1">it</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) stopwords = \&#39;it\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Java
</div>
<!-- request Java -->

<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) stopwords = &#39;it&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>
<!-- request C# -->

<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price float) stopwords = &#39;it&#39;&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">stopwords</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">it</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<!-- example stopwords 2 -->
<p>If you need to use stop words for multiple languages you should list all their aliases, separated with commas (RT mode) or spaces (plain mode):</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>

<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">stopwords</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;en, it, ru&#39;</span>
</code></pre></div>



<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) stopwords = &#39;en, it, ru&#39;&quot;</span>
</code></pre></div>



<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">            &#39;stopwords&#39; =&gt; &#39;en, it, ru&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) stopwords = </span><span class="se">\&#39;</span><span class="s1">en, it, ru</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) stopwords = \&#39;en, it, ru\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Java
</div>
<!-- request Java -->

<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) stopwords = &#39;en, it, ru&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>
<!-- request C# -->

<div class="codehilite"><pre><span></span><code>utilsApi.sql(&quot;CREATE TABLE products(title text, price float) stopwords = &#39;en, it, ru&#39;&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">stopwords</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">en it ru</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h2 id="stopword_step">stopword_step</h2>
<div class="codehilite"><pre><span></span><code><span class="na">stopword_step</span><span class="o">=</span><span class="s">{0|1}</span>
</code></pre></div>

<!-- example stopword_step -->
<p>The position_increment setting on <a href="../../06-creating_a_table.html#stopwords">stopwords</a> is optional, and the allowed values are 0 and 1, with the default being 1.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>

<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">stopwords</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;en&#39;</span><span class="w"> </span><span class="n">stopword_step</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;1&#39;</span>
</code></pre></div>



<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) stopwords = &#39;en&#39; stopword_step = &#39;1&#39;&quot;</span>
</code></pre></div>



<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">            &#39;stopwords&#39; =&gt; &#39;en, it, ru&#39;,</span>
<span class="x">            &#39;stopword_step&#39; =&gt; &#39;1&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) stopwords = </span><span class="se">\&#39;</span><span class="s1">en</span><span class="se">\&#39;</span><span class="s1"> stopword_step = </span><span class="se">\&#39;</span><span class="s1">1</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) stopwords = \&#39;en\&#39; stopword_step = \&#39;1\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Java
</div>
<!-- request Java -->

<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) stopwords = \&#39;en\&#39; stopword_step = \&#39;1\&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>
<!-- request C# -->

<div class="codehilite"><pre><span></span><code>utilsApi.sql(&quot;CREATE TABLE products(title text, price float) stopwords = \&#39;en\&#39; stopword_step = \&#39;1\&#39;&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">stopwords</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">en</span>
<span class="w">  </span><span class="na">stopword_step</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h2 id="stopwords_unstemmed">stopwords_unstemmed</h2>
<div class="codehilite"><pre><span></span><code><span class="na">stopwords_unstemmed</span><span class="o">=</span><span class="s">{0|1}</span>
</code></pre></div>

<!-- example stopwords_unstemmed -->
<p>Whether to apply stop words before or after stemming. Optional, default is 0 (apply stop word filter after stemming).</p>
<p>By default, stop words are stemmed themselves, and then applied to tokens <em>after</em> stemming (or any other morphology processing). This means that a token is stopped when stem(token) is equal to stem(stopword). This default behavior can lead to unexpected results when a token is erroneously stemmed to a stopped root. For example, "Andes" might get stemmed to "and", so when "and" is a stopword, "Andes" is also skipped.</p>
<p>However, you can change this behavior by enabling the <code>stopwords_unstemmed</code> directive. When this is enabled, stop words are applied before stemming (and therefore to the original word forms), and the tokens are skipped when the token is equal to the stopword.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>

<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">stopwords</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;en&#39;</span><span class="w"> </span><span class="n">stopwords_unstemmed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;1&#39;</span>
</code></pre></div>



<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) stopwords = &#39;en&#39; stopwords_unstemmed = &#39;1&#39;&quot;</span>
</code></pre></div>



<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">            &#39;stopwords&#39; =&gt; &#39;en, it, ru&#39;,</span>
<span class="x">            &#39;stopwords_unstemmed&#39; =&gt; &#39;1&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) stopwords = </span><span class="se">\&#39;</span><span class="s1">en</span><span class="se">\&#39;</span><span class="s1"> stopwords_unstemmed = </span><span class="se">\&#39;</span><span class="s1">1</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) stopwords = \&#39;en\&#39; stopwords_unstemmed = \&#39;1\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Java
</div>
<!-- request Java -->

<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) stopwords = \&#39;en\&#39; stopwords_unstemmed = \&#39;1\&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>
<!-- request C# -->

<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price float) stopwords = \&#39;en\&#39; stopwords_unstemmed = \&#39;1\&#39;&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">stopwords</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">en</span>
<span class="w">  </span><span class="na">stopwords_unstemmed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>
<!-- proofread -->
        
    </section>
    
    <section class="chapter-section" id="toc-06.03.07-word_forms">
        <a class="chapter-link" href="#toc-06.03.07-word_forms"> ¶ 6.3.7</a>

        
        <h1 id="word-forms">Word forms</h1>
<p>Word forms are applied after tokenizing incoming text by <a href="../../06-creating_a_table.html#charset_table">charset_table</a> rules. They essentially let you replace one word with another. Normally, that would be used to bring different word forms to a single normal form (e.g. to normalize all the variants such as "walks", "walked", "walking" to the normal form "walk"). It can also be used to implement <a href="../../06-creating_a_table.html#toc-06.03.09-morphology">stemming</a> exceptions, because stemming is not applied to words found in the forms list.</p>
<h2 id="wordforms">wordforms</h2>
<div class="codehilite"><pre><span></span><code><span class="na">wordforms</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">path/to/wordforms.txt</span>
<span class="na">wordforms</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">path/to/alternateforms.txt</span>
<span class="na">wordforms</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">path/to/dict*.txt</span>
</code></pre></div>

<!-- example wordforms -->
<p>Word forms dictionary. Optional, default is empty.</p>
<p>The dictionaries are used to normalize incoming words both during indexing and searching. Therefore, when it comes to a <a href="../../06-creating_a_table.html#toc-06.02.02-plain_table">plain table</a>, it's required to rotate the table in order to pick up changes in the word forms file.</p>
<p>Word forms support in Manticore is designed to handle large dictionaries well. They moderately affect indexing speed; for example, a dictionary with 1 million entries slows down indexing by about 1.5 times. Searching speed is not affected at all. The additional RAM impact is roughly equal to the dictionary file size, and dictionaries are shared across tables. For instance, if the very same 50 MB word forms file is specified for 10 different tables, the additional <code>searchd</code> RAM usage will be about 50 MB.</p>
<p>The dictionary file should be in a simple plain text format. Each line should contain source and destination word forms, in UTF-8 encoding, separated by a "greater than" sign. Rules from the <a href="../../06-creating_a_table.html#charset_table">charset_table</a> will be applied when the file is loaded, so if you are using built-in <code>charset_table</code> options, it is typically case-insensitive, just like your other full-text indexed data. Here is a sample file contents:</p>
<div class="codehilite"><pre><span></span><code><span class="na">walks &gt; walk</span>
<span class="na">walked &gt; walk</span>
<span class="na">walking &gt; walk</span>
</code></pre></div>

<p>There is a bundled utility called <a href="../../23-miscellaneous_tools.html#spelldump">Spelldump</a> that helps you create a dictionary file in a format that Manticore can read. The utility can read from source <code>.dict</code> and <code>.aff</code> dictionary files in the <code>ispell</code> or <code>MySpell</code> format, as bundled with OpenOffice.</p>
<p>You can map several source words to a single destination word. The process happens on tokens, not the source text, so differences in whitespace and markup are ignored.</p>
<p>You can use the <code>=&gt;</code> symbol instead of <code>&gt;</code>. Comments (starting with <code>#</code>) are also allowed. Finally, if a line starts with a tilde (<code>~</code>), the wordform will be applied after morphology, instead of before (note that only a single source and destination word are supported in this case).</p>
<div class="codehilite"><pre><span></span><code><span class="na">core 2 duo &gt; c2d</span>
<span class="na">e6600 &gt; c2d</span>
<span class="na">core 2duo</span><span class="w"> </span><span class="o">=</span><span class="s">&gt; c2d</span><span class="w"> </span><span class="c1"># Some people write &#39;2duo&#39; together...</span>
<span class="na">~run &gt; walk # Along with stem_en morphology enabled replaces &#39;run&#39;, &#39;running&#39;, &#39;runs&#39; (and any other words that stem to just &#39;run&#39;) to &#39;walk&#39;</span>
</code></pre></div>

<p>You can specify multiple destination tokens:</p>
<div class="codehilite"><pre><span></span><code><span class="na">s02e02 &gt; season 2 episode 2</span>
<span class="na">s3 e3 &gt; season 3 episode 3</span>
</code></pre></div>

<p>You can specify multiple files, not just one. Masks can be used as a pattern, and all matching files will be processed in simple ascending order.</p>
<p>In the RT mode, only absolute paths are allowed.</p>
<p>If multi-byte codepages are used and file names include foreign characters, the resulting order may not be exactly alphabetic. If the same wordform definition is found in multiple files, the latter one is used and overrides previous definitions.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>

<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">wordforms</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;/var/lib/manticore/wordforms.txt&#39;</span><span class="w"> </span><span class="n">wordforms</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;/var/lib/manticore/alternateforms.txt /var/lib/manticore/dict*.txt&#39;</span>
</code></pre></div>



<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) wordforms = &#39;/var/lib/manticore/wordforms.txt&#39; wordforms = &#39;/var/lib/manticore/alternateforms.txt&#39; wordforms = &#39;/var/lib/manticore/dict*.txt&#39;&quot;</span>
</code></pre></div>



<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">            &#39;wordforms&#39; =&gt; [</span>
<span class="x">                &#39;/var/lib/manticore/wordforms.txt&#39;,</span>
<span class="x">                &#39;/var/lib/manticore/alternateforms.txt&#39;,</span>
<span class="x">                &#39;/var/lib/manticore/dict*.txt&#39;</span>
<span class="x">            ]</span>
<span class="x">        ]);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) wordforms = </span><span class="se">\&#39;</span><span class="s1">/var/lib/manticore/wordforms.txt</span><span class="se">\&#39;</span><span class="s1"> wordforms = </span><span class="se">\&#39;</span><span class="s1">/var/lib/manticore/alternateforms.txt</span><span class="se">\&#39;</span><span class="s1"> wordforms = </span><span class="se">\&#39;</span><span class="s1">/var/lib/manticore/dict*.txt</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float)wordforms = \&#39;/var/lib/manticore/wordforms.txt\&#39; wordforms = \&#39;/var/lib/manticore/alternateforms.txt\&#39; wordforms = \&#39;/var/lib/manticore/dict*.txt\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Java
</div>
<!-- request Java -->

<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) wordforms = &#39;/var/lib/manticore/wordforms.txt&#39; wordforms = &#39;/var/lib/manticore/alternateforms.txt&#39; wordforms = &#39;/var/lib/manticore/dict*.txt&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>
<!-- request C# -->

<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">Sql</span><span class="p">(</span><span class="s2">&quot;CREATE TABLE products(title text, price float) wordforms = &#39;/var/lib/manticore/wordforms.txt&#39; wordforms = &#39;/var/lib/manticore/alternateforms.txt&#39; wordforms = &#39;/var/lib/manticore/dict*.txt&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">wordforms</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">/var/lib/manticore/wordforms.txt</span>
<span class="w">  </span><span class="na">wordforms</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">/var/lib/manticore/alternateforms.txt</span>
<span class="w">  </span><span class="na">wordforms</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">/var/lib/manticore/dict*.txt</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<!-- proofread -->
        
    </section>
    
    <section class="chapter-section" id="toc-06.03.08-exceptions">
        <a class="chapter-link" href="#toc-06.03.08-exceptions"> ¶ 6.3.8</a>

        
        <h1 id="exceptions">Exceptions</h1>
<p>Exceptions (also known as synonyms) allow mapping one or more tokens (including tokens with characters that would normally be excluded) to a single keyword. They are similar to <a href="../../06-creating_a_table.html#wordforms">wordforms</a> in that they also perform mapping but have a number of important differences.</p>
<p>A short summary of the differences from <a href="../../06-creating_a_table.html#wordforms">wordforms</a> is as follows:</p>
<table>
<thead>
<tr>
<th>Exceptions</th>
<th>Word forms</th>
</tr>
</thead>
<tbody>
<tr>
<td>Case sensitive</td>
<td>Case insensitive</td>
</tr>
<tr>
<td>Can use special characters that are not in <a href="../../06-creating_a_table.html#charset_table">charset_table</a></td>
<td>Fully obey <a href="../../06-creating_a_table.html#charset_table">charset_table</a></td>
</tr>
<tr>
<td>Underperform on huge dictionaries</td>
<td>Designed to handle millions of entries</td>
</tr>
</tbody>
</table>
<h2 id="exceptions_1">exceptions</h2>
<div class="codehilite"><pre><span></span><code><span class="na">exceptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">path/to/exceptions.txt</span>
</code></pre></div>

<!-- example exceptions -->
<p>Tokenizing exceptions file. Optional, the default is empty.<br />
In the RT mode, only absolute paths are allowed.</p>
<p>The expected file format is plain text, with one line per exception. The line format is as follows:</p>
<div class="codehilite"><pre><span></span><code><span class="na">map-from-tokens</span><span class="w"> </span><span class="o">=</span><span class="s">&gt; map-to-token</span>
</code></pre></div>

<p>Example file:</p>
<div class="codehilite"><pre><span></span><code><span class="na">at &amp; t</span><span class="w"> </span><span class="o">=</span><span class="s">&gt; at&amp;t</span>
<span class="na">AT&amp;T</span><span class="w"> </span><span class="o">=</span><span class="s">&gt; AT&amp;T</span>
<span class="na">Standarten   Fuehrer</span><span class="w"> </span><span class="o">=</span><span class="s">&gt; standartenfuhrer</span>
<span class="na">Standarten Fuhrer</span><span class="w"> </span><span class="o">=</span><span class="s">&gt; standartenfuhrer</span>
<span class="na">MS Windows</span><span class="w"> </span><span class="o">=</span><span class="s">&gt; ms windows</span>
<span class="na">Microsoft Windows</span><span class="w"> </span><span class="o">=</span><span class="s">&gt; ms windows</span>
<span class="na">C++</span><span class="w"> </span><span class="o">=</span><span class="s">&gt; cplusplus</span>
<span class="na">c++</span><span class="w"> </span><span class="o">=</span><span class="s">&gt; cplusplus</span>
<span class="na">C plus plus</span><span class="w"> </span><span class="o">=</span><span class="s">&gt; cplusplus</span>
</code></pre></div>

<p>All tokens here are case sensitive and will <strong>not</strong> be processed by <a href="../../06-creating_a_table.html#charset_table">charset_table</a> rules. Thus, with the example exceptions file above, the "at&amp;t" text will be tokenized as two keywords "at" and "t" due to lowercase letters. On the other hand, "AT&amp;T" will match exactly and produce a single "AT&amp;T" keyword.</p>
<p>Note that this map-to keyword:</p>
<ul>
<li>is always interpreted as a <em>single</em> word</li>
<li>is both case and space sensitive</li>
</ul>
<p>In our sample, "ms windows" query will <em>not</em> match the document with "MS Windows" text. The query will be interpreted as a query for two keywords, "ms" and "windows". The mapping for "MS Windows" is a single keyword "ms windows", with a space in the middle. On the other hand, "standartenfuhrer" will retrieve documents with "Standarten Fuhrer" or "Standarten Fuehrer" contents (capitalized exactly like this), or any capitalization variant of the keyword itself, e.g., "staNdarTenfUhreR". (It won't catch "standarten fuhrer", however: this text does not match any of the listed exceptions because of case sensitivity and gets indexed as two separate keywords.)</p>
<p>The whitespace in the map-from tokens list matters, but its amount does not. Any amount of whitespace in the map-form list will match any other amount of whitespace in the indexed document or query. For instance, the "AT &amp; T" map-from token will match "AT &amp; T" text, whatever the amount of space in both map-from part and the indexed text. Such text will, therefore, be indexed as a special "AT&amp;T" keyword, thanks to the very first entry from the sample.</p>
<p>Exceptions also allow capturing special characters (that are exceptions from general charset_table rules; hence the name). Assume that you generally do not want to treat '+' as a valid character, but still want to be able to search for some exceptions from this rule such as 'C++'. The sample above will do just that, totally independent of what characters are in the table and what are not.</p>
<p>Therefore, when it comes to a <a href="../../06-creating_a_table.html#toc-06.02.02-plain_table">plain table</a>, it's required to rotate the table in order to pick up changes in the exceptions file.</p>
<!-- request SQL -->

<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">exceptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;/usr/local/manticore/data/exceptions.txt&#39;</span>
</code></pre></div>

<!-- request JSON -->

<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) exceptions = &#39;/usr/local/manticore/data/exceptions.txt&#39;&quot;</span>
</code></pre></div>

<!-- request PHP -->

<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">            &#39;exceptions&#39; =&gt; &#39;/usr/local/manticore/data/exceptions.txt&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>

<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) exceptions = </span><span class="se">\&#39;</span><span class="s1">/usr/local/manticore/data/exceptions.txt</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) exceptions = \&#39;/usr/local/manticore/data/exceptions.txt\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Java
</div>
<!-- request Java -->

<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) exceptions = &#39;/usr/local/manticore/data/exceptions.txt&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>
<!-- request C# -->

<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price float) exceptions = &#39;/usr/local/manticore/data/exceptions.txt&#39;&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">exceptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">/usr/local/manticore/data/exceptions.txt</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>
<!-- proofread -->
        
    </section>
    
    <section class="chapter-section" id="toc-06.03.09-morphology">
        <a class="chapter-link" href="#toc-06.03.09-morphology"> ¶ 6.3.9</a>

        
        <h1 id="advanced-morphology">Advanced morphology</h1>
<p>Morphology preprocessors can be applied to words during indexing to normalize different forms of the same word and improve segmentation. For example, an English stemmer can normalize "dogs" and "dog" to "dog", resulting in identical search results for both keywords.</p>
<p>Manticore has four built-in morphology preprocessors:</p>
<ul>
<li><strong>Lemmatizer</strong>: reduces a word to its root or lemma. For example, "running" can be reduced to "run" and "octopi" can be reduced to "octopus". Note that some words may have multiple corresponding root forms. For example, "dove" can be either the past tense of "dive" or a noun meaning a bird, as in "A white dove flew over the cuckoo's nest." In this case, a lemmatizer can generate all the possible root forms.</li>
<li><strong>Stemmer</strong>: reduces a word to its stem by removing or replacing certain known suffixes. The resulting stem may not necessarily be a valid word. For example, the Porter English stemmer reduces "running" to "run", "business" to "busi" (not a valid word), and does not reduce "octopi" at all.</li>
<li><strong>Phonetic algorithms</strong>: replace words with phonetic codes that are the same even if the words are different but phonetically close.</li>
<li><strong>Word breaking algorithms</strong>: split text into words. Currently available only for Chinese.</li>
</ul>
<h2 id="morphology">morphology</h2>
<div class="codehilite"><pre><span></span><code><span class="na">morphology</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">morphology1[, morphology2, ...]</span>
</code></pre></div>

<!-- example morphology -->
<p>The morphology directive specifies a list of morphology preprocessors to apply to the words being indexed. This is an optional setting, with the default being no preprocessor applied.</p>
<p>Manticore comes with built-in morphological preprocessors for:</p>
<ul>
<li>English, Russian, and German lemmatizers</li>
<li>English, Russian, Arabic, and Czech stemmers</li>
<li>SoundEx and MetaPhone phonetic algorithms</li>
<li>Chinese word breaking algorithm</li>
<li>Snowball (libstemmer) stemmers for more than <a href="../../06-creating_a_table.html#toc-06.03.02-supported_languages">15 other languages</a> are also available.</li>
</ul>
<p>Lemmatizers require dictionary <code>.pak</code> files that can be <a href="https://manticoresearch.com/install/#other-downloads">downloaded from the Manticore website</a>. The dictionaries need to be put in the directory specified by <a href="../../20-server_settings.html#lemmatizer_base">lemmatizer_base</a>. Additionally, the <a href="../../12-data_creation_and_modification.html#lemmatizer_cache">lemmatizer_cache</a> setting can be used to speed up lemmatizing by spending more RAM for an uncompressed dictionary cache.</p>
<p>The Chinese language segmentation can be performed using <a href="http://site.icu-project.org/">ICU</a>. It provides more precise segmentation compared to n-grams but is slightly slower. The <a href="../../06-creating_a_table.html#charset_table">charset_table</a> must include all Chinese characters, which can be done by using the "cjk" alias. When "morphology=icu_chinese" is specified, the documents are first pre-processed by ICU. Then, the result is processed by the tokenizer according to the charset_table, and finally, other morphology processors specified in the "morphology" option are applied. Only those parts of texts that contain Chinese are passed to ICU for segmentation, while others can be modified by different means such as different morphologies or charset_table.</p>
<p>Built-in English and Russian stemmers are faster than their libstemmer counterparts but may produce slightly different results</p>
<p>Soundex implementation matches that of MySQL. Metaphone implementation is based on Double Metaphone algorithm and indexes the primary code.</p>
<p>To use the <code>morphology</code> option, specify one or multiple of the built-in options, including:</p>
<ul>
<li>none: do not perform any morphology processing</li>
<li>lemmatize_ru - apply Russian lemmatizer and pick a single root form</li>
<li>lemmatize_uk - apply Ukrainian lemmatizer and pick a single root form (install it first in <a href="../../03-installation.html#ukrainian-lemmatizer">Centos</a> or <a href="../../03-installation.html#ukrainian-lemmatizer">Ubuntu/Debian</a>). For correct work of the lemmatizer make sure specific Ukrainian characters are preserved in your <code>charset_table</code> since by default they are not. For that override them, like this: <code>charset_table='non_cjk,U+0406-&gt;U+0456,U+0456,U+0407-&gt;U+0457,U+0457,U+0490-&gt;U+0491,U+0491'</code>. <a href="https://play.manticoresearch.com/ua-lemmatizer/">Here</a> is an interactive course about how to install and use the urkainian lemmatizer.</li>
<li>lemmatize_en - apply English lemmatizer and pick a single root form</li>
<li>lemmatize_de - apply German lemmatizer and pick a single root form</li>
<li>lemmatize_ru_all - apply Russian lemmatizer and index all possible root forms</li>
<li>lemmatize_uk_all - apply Ukrainian lemmatizer and index all possible root forms. Find the installation links above and take care of the <code>charset_table</code>.</li>
<li>lemmatize_en_all - apply English lemmatizer and index all possible root forms</li>
<li>lemmatize_de_all - apply German lemmatizer and index all possible root forms</li>
<li>stem_en - apply Porter's English stemmer</li>
<li>stem_ru - apply Porter's Russian stemmer</li>
<li>stem_enru - apply Porter's English and Russian stemmers</li>
<li>stem_cz - apply Czech stemmer</li>
<li>stem_ar - apply Arabic stemmer</li>
<li>soundex - replace keywords with their SOUNDEX code</li>
<li>metaphone - replace keywords with their METAPHONE code</li>
<li>icu_chinese - apply Chinese text segmentation using ICU</li>
<li>libstemmer_* . Refer to the <a href="../../06-creating_a_table.html#toc-06.03.02-supported_languages">list of supported languages</a> for details</li>
</ul>
<p>Multiple stemmers can be specified, separated by commas. They will be applied to incoming words in the order they are listed, and the processing will stop once one of the stemmers modifies the word. Additionally, when <a href="../../06-creating_a_table.html#wordforms">wordforms</a> feature is enabled, the word will be looked up in the word forms dictionary first. If there is a matching entry in the dictionary, stemmers will not be applied at all.  <a href="../../06-creating_a_table.html#wordforms">wordforms</a> сan be used to implement stemming exceptions.</p>
<!-- request SQL -->

<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">morphology</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;stem_en, libstemmer_sv&#39;</span>
</code></pre></div>

<!-- request JSON -->

<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;CREATE TABLE products(title text, price float)  morphology = &#39;stem_en, libstemmer_sv&#39;&quot;</span>
</code></pre></div>

<!-- request PHP -->

<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">            &#39;morphology&#39; =&gt; &#39;stem_en, libstemmer_sv&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>

<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) morphology = </span><span class="se">\&#39;</span><span class="s1">stem_en, libstemmer_sv</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) morphology = \&#39;stem_en, libstemmer_sv\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Java
</div>
<!-- request Java -->

<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) morphology = &#39;stem_en, libstemmer_sv&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>
<!-- request C# -->

<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price float) morphology = &#39;stem_en, libstemmer_sv&#39;&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">morphology</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">stem_en, libstemmer_sv</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h2 id="morphology_skip_fields">morphology_skip_fields</h2>
<!-- example morphology_skip_fields -->

<div class="codehilite"><pre><span></span><code><span class="na">morphology_skip_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">field1[, field2, ...]</span>
</code></pre></div>

<p>A list of fields to skip morphology preprocessing. Optional, default is empty (apply preprocessors to all fields).</p>
<!-- request SQL -->

<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">morphology_skip_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;name&#39;</span><span class="w"> </span><span class="n">morphology</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;stem_en&#39;</span>
</code></pre></div>

<!-- request JSON -->

<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, name text, price float) morphology_skip_fields = &#39;name&#39; morphology = &#39;stem_en&#39;&quot;</span>
</code></pre></div>

<!-- request PHP -->

<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">            &#39;morphology_skip_fields&#39; =&gt; &#39;name&#39;,</span>
<span class="x">            &#39;morphology&#39; =&gt; &#39;stem_en&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>

<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) morphology_skip_fields = </span><span class="se">\&#39;</span><span class="s1">name</span><span class="se">\&#39;</span><span class="s1"> morphology = </span><span class="se">\&#39;</span><span class="s1">stem_en</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) morphology_skip_fields = \&#39;name\&#39; morphology = \&#39;stem_en\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Java
</div>
<!-- request Java -->

<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) morphology_skip_fields = &#39;name&#39; morphology = &#39;stem_en&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>
<!-- request C# -->

<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price float) morphology_skip_fields = &#39;name&#39; morphology = &#39;stem_en&#39;&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">morphology_skip_fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">name</span>
<span class="w">  </span><span class="na">morphology</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">stem_en</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">name</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h2 id="min_stemming_len">min_stemming_len</h2>
<!-- example min_stemming_len -->

<div class="codehilite"><pre><span></span><code><span class="na">min_stemming_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">length</span>
</code></pre></div>

<p>Minimum word length at which to enable stemming. Optional, default is 1 (stem everything).</p>
<p>Stemmers are not perfect, and might sometimes produce undesired results. For instance, running "gps" keyword through Porter stemmer for English results in "gp", which is not really the intent. <code>min_stemming_len</code> feature lets you suppress stemming based on the source word length, ie. to avoid stemming too short words. Keywords that are shorter than the given threshold will not be stemmed. Note that keywords that are exactly as long as specified <strong>will</strong> be stemmed. So in order to avoid stemming 3-character keywords, you should specify 4 for the value. For more finely grained control, refer to <a href="../../06-creating_a_table.html#wordforms">wordforms</a> feature.</p>
<!-- request SQL -->

<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">min_stemming_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;4&#39;</span><span class="w"> </span><span class="n">morphology</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;stem_en&#39;</span>
</code></pre></div>

<!-- request JSON -->

<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) min_stemming_len = &#39;4&#39; morphology = &#39;stem_en&#39;&quot;</span>
</code></pre></div>

<!-- request PHP -->

<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">             &#39;min_stemming_len&#39; =&gt; &#39;4&#39;,</span>
<span class="x">             &#39;morphology&#39; =&gt; &#39;stem_en&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>

<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) min_stemming_len = </span><span class="se">\&#39;</span><span class="s1">4</span><span class="se">\&#39;</span><span class="s1"> morphology = </span><span class="se">\&#39;</span><span class="s1">stem_en</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) min_stemming_len = \&#39;4\&#39; morphology = \&#39;stem_en\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Java
</div>
<!-- request Java -->

<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) min_stemming_len = &#39;4&#39; morphology = &#39;stem_en&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>
<!-- request C# -->

<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price float) min_stemming_len = &#39;4&#39; morphology = &#39;stem_en&#39;&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">min_stemming_len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">4</span>
<span class="w">  </span><span class="na">morphology</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">stem_en</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h2 id="index_exact_words">index_exact_words</h2>
<!-- example index_exact_words -->

<div class="codehilite"><pre><span></span><code><span class="na">index_exact_words</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">{0|1}</span>
</code></pre></div>

<p>This option allows for the indexing of original keywords along with their morphologically modified versions. However, original keywords that are remapped by the <a href="../../06-creating_a_table.html#wordforms">wordforms</a> and <a href="../../06-creating_a_table.html#toc-06.03.08-exceptions">exceptions</a> cannot be indexed. The default value is 0, indicating that this feature is disabled by default.</p>
<p>This allows the use of the <a href="../../13-searching.html#exact-form-modifier">exact form operator</a> in the query language. Enabling this feature will increase the full-text index size and indexing time, but will not impact search performance.</p>
<!-- request SQL -->

<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">index_exact_words</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;1&#39;</span><span class="w"> </span><span class="n">morphology</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;stem_en&#39;</span>
</code></pre></div>

<!-- request JSON -->

<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) index_exact_words = &#39;1&#39; morphology = &#39;stem_en&#39;&quot;</span>
</code></pre></div>

<!-- request PHP -->

<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">             &#39;index_exact_words&#39; =&gt; &#39;1&#39;,</span>
<span class="x">             &#39;morphology&#39; =&gt; &#39;stem_en&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>

<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) index_exact_words = </span><span class="se">\&#39;</span><span class="s1">1</span><span class="se">\&#39;</span><span class="s1"> morphology = </span><span class="se">\&#39;</span><span class="s1">stem_en</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) index_exact_words = \&#39;1\&#39; morphology = \&#39;stem_en\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Java
</div>
<!-- request Java -->

<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) index_exact_words = &#39;1&#39; morphology = &#39;stem_en&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>
<!-- request C# -->

<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price float) index_exact_words = &#39;1&#39; morphology = &#39;stem_en&#39;&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">index_exact_words</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1</span>
<span class="w">  </span><span class="na">morphology</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">stem_en</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>
<!-- proofread -->
        
    </section>
    
    <section class="chapter-section" id="toc-06.03.10-advanced_html_tokenization">
        <a class="chapter-link" href="#toc-06.03.10-advanced_html_tokenization"> ¶ 6.3.10</a>

        
        <h1 id="advanced-html-tokenization">Advanced HTML tokenization</h1>
<h2 id="stripping-html-tags">Stripping HTML tags</h2>
<h3 id="html_strip">html_strip</h3>
<!-- example html_strip -->

<div class="codehilite"><pre><span></span><code><span class="na">html_strip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">{0|1}</span>
</code></pre></div>

<p>This option determines whether HTML markup should be stripped from the incoming full-text data. The default value is 0, which disables stripping. To enable stripping, set the value to 1.</p>
<p>HTML tags and entities are considered as markup and will be processed. </p>
<p>HTML tags are removed, while the contents between them (e.g. everything between <code>&lt;p&gt;</code> and <code>&lt;/p&gt;</code>) are left intact. You can choose to keep and index tag attributes (e.g. HREF attribute in an A tag or ALT in an IMG tag). Some well-known inline tags, such as A, B, I, S, U, BASEFONT, BIG, EM, FONT, IMG, LABEL, SMALL, SPAN, STRIKE, STRONG, SUB, SUP, and TT, are completely removed. All other tags are treated as block level and are replaced with whitespace. For example, the text <code>te&lt;b&gt;st&lt;/b&gt;</code> will be indexed as a single keyword 'test', while <code>te&lt;p&gt;st&lt;/p&gt;</code> will be indexed as two keywords 'te' and 'st'.</p>
<p>HTML entities are decoded and replaced with their corresponding UTF-8 characters. The stripper supports both numeric forms (e.g. <code>&amp;#239;</code>) and text forms (e.g. <code>&amp;oacute;</code> or <code>&amp;nbsp;</code>) of entities, and supports all entities specified by the HTML4 standard.</p>
<p>The stripper is designed to work with properly formed HTML and XHTML, but may produce unexpected results on malformed input (such as HTML with stray <code>&lt;'s</code> or unclosed <code>&gt;'s</code>).</p>
<p>Please note that only the tags themselves, as well as HTML comments, are stripped. To strip the contents of the tags, including embedded scripts, see the <a href="../../06-creating_a_table.html#html_remove_elements">html_remove_elements</a> option. There are no restrictions on tag names, meaning that everything that looks like a valid tag start, end, or comment will be stripped.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>

<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">html_strip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;1&#39;</span>
</code></pre></div>



<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) html_strip = &#39;1&#39;&quot;</span>
</code></pre></div>



<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">            &#39;html_strip&#39; =&gt; &#39;1&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) html_strip = </span><span class="se">\&#39;</span><span class="s1">1</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) html_strip = \&#39;1\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Java
</div>
<!-- request Java -->

<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) html_strip = &#39;1&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>
<!-- request C# -->

<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price float) html_strip = &#39;1&#39;&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">html_strip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h3 id="html_index_attrs">html_index_attrs</h3>
<!-- example html_index_attrs -->

<div class="codehilite"><pre><span></span><code><span class="na">html_index_attrs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">img=alt,title</span><span class="c1">; a=title;</span>
</code></pre></div>

<p>The html_index_attrs option allows you to specify which HTML markup attributes should be indexed even though other HTML markup is stripped. The default value is empty, meaning no attributes will be indexed. <br />
The format of the option is a per-tag enumeration of indexable attributes, as demonstrated in the example above. The contents of the specified attributes will be retained and indexed, providing a way to extract additional information from your full-text data.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>

<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">html_index_attrs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;img=alt,title; a=title;&#39;</span><span class="w"> </span><span class="n">html_strip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;1&#39;</span>
</code></pre></div>



<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) html_index_attrs = &#39;img=alt,title; a=title;&#39; html_strip = &#39;1&#39;&quot;</span>
</code></pre></div>



<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">            &#39;html_index_attrs&#39; =&gt; &#39;img=alt,title; a=title;&#39;,</span>
<span class="x">            &#39;html_strip&#39; =&gt; &#39;1&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) html_index_attrs = </span><span class="se">\&#39;</span><span class="s1">img=alt,title; a=title;</span><span class="se">\&#39;</span><span class="s1"> html_strip = </span><span class="se">\&#39;</span><span class="s1">1</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) html_index_attrs = \&#39;img=alt,title; a=title;\&#39; html_strip = \&#39;1\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Java
</div>
<!-- request Java -->

<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) html_index_attrs = \&#39;img=alt,title; a=title;\&#39; html_strip = &#39;1&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>
<!-- request C# -->

<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price float) html_index_attrs = \&#39;img=alt,title; a=title;\&#39; html_strip = &#39;1&#39;&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">html_index_attrs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">img=alt,title</span><span class="c1">; a=title;</span>
<span class="w">  </span><span class="na">html_strip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h3 id="html_remove_elements">html_remove_elements</h3>
<!-- example html_remove_elements -->

<div class="codehilite"><pre><span></span><code><span class="na">html_remove_elements</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">element1[, element2, ...]</span>
</code></pre></div>

<p>A list of HTML elements whose contents, along with the elements themselves, will be stripped. Optional, the default is an empty string (do not strip contents of any elements).</p>
<p>This option allows you to remove the contents of elements, meaning everything between the opening and closing tags. It is useful for removing embedded scripts, CSS, etc. The short tag form for empty elements (e.g. <br/>) is properly supported, and the text following such a tag will not be removed.</p>
<p>The value is a comma-separated list of element (tag) names, the contents of which should be removed. Tag names are case-insensitive.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>

<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">html_remove_elements</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;style, script&#39;</span><span class="w"> </span><span class="n">html_strip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;1&#39;</span>
</code></pre></div>



<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) html_remove_elements = &#39;style, script&#39; html_strip = &#39;1&#39;&quot;</span>
</code></pre></div>



<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">            &#39;html_remove_elements&#39; =&gt; &#39;style, script&#39;,</span>
<span class="x">            &#39;html_strip&#39; =&gt; &#39;1&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) html_remove_elements = </span><span class="se">\&#39;</span><span class="s1">style, script</span><span class="se">\&#39;</span><span class="s1"> html_strip = </span><span class="se">\&#39;</span><span class="s1">1</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) html_remove_elements = \&#39;style, script\&#39; html_strip = \&#39;1\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Java
</div>
<!-- request Java -->

<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) html_remove_elements = \&#39;style, script\&#39; html_strip = &#39;1&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>
<!-- request C# -->

<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price float) html_remove_elements = \&#39;style, script\&#39; html_strip = &#39;1&#39;&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">html_remove_elements</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">style, script</span>
<span class="w">  </span><span class="na">html_strip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h2 id="extracting-important-parts-from-html">Extracting important parts from HTML</h2>
<h3 id="index_sp">index_sp</h3>
<!-- example index_sp -->

<div class="codehilite"><pre><span></span><code><span class="na">index_sp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">{0|1}</span>
</code></pre></div>

<p>Controls detection and indexing of sentence and paragraph boundaries. Optional, default is 0 (no detection or indexing).</p>
<p>This directive enables the detection and indexing of sentence and paragraph boundaries, making it possible for the <a href="../../13-searching.html#sentence-and-paragraph-operators">SENTENCE</a>  and <a href="../../13-searching.html#sentence-and-paragraph-operators">PARAGRAPH</a>  operators to work. Sentence boundary detection is based on plain text analysis, and only requires setting <code>index_sp = 1</code> to enable it. Paragraph detection, however, relies on HTML markup and occurs during the [HTML stripping process](../../06-creating_a_table.html#toc-06.03.10-advanced_html_tokenization#html_strip. As such, to index paragraph boundaries, both the index_sp directive and the html_strip directive must be set to 1.</p>
<p>The following rules are used to determine sentence boundaries:</p>
<ul>
<li>Question marks (?) and exclamation marks (!) always indicate a sentence boundary. </li>
<li>Trailing dots (.) indicate a sentence boundary, except in the following cases:<ul>
<li>When followed by a letter. This is considered part of an abbreviation (e.g. "S.T.A.L.K.E.R." or "Goldman Sachs S.p.A.").</li>
<li>When followed by a comma. This is considered an abbreviation followed by a comma (e.g. "Telecom Italia S.p.A., founded in 1994").</li>
<li>When followed by a space and a lowercase letter. This is considered an abbreviation within a sentence (e.g. "News Corp. announced in February").</li>
<li>When preceded by a space and an uppercase letter, and followed by a space. This is considered a middle initial (e.g. "John D. Doe").</li>
</ul>
</li>
</ul>
<p>Paragraph boundaries are detected at every block-level HTML tag, including: ADDRESS, BLOCKQUOTE, CAPTION, CENTER, DD, DIV, DL, DT, H1, H2, H3, H4, H5, LI, MENU, OL, P, PRE, TABLE, TBODY, TD, TFOOT, TH, THEAD, TR, and UL.</p>
<p>Both sentences and paragraphs increment the keyword position counter by 1.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>

<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">index_sp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;1&#39;</span><span class="w"> </span><span class="n">html_strip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;1&#39;</span>
</code></pre></div>



<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) index_sp = &#39;1&#39; html_strip = &#39;1&#39;&quot;</span>
</code></pre></div>



<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">            &#39;index_sp&#39; =&gt; &#39;1&#39;,</span>
<span class="x">            &#39;html_strip&#39; =&gt; &#39;1&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) index_sp = </span><span class="se">\&#39;</span><span class="s1">1</span><span class="se">\&#39;</span><span class="s1"> html_strip = </span><span class="se">\&#39;</span><span class="s1">1</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) index_sp = \&#39;1\&#39; html_strip = \&#39;1\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Java
</div>
<!-- request Java -->

<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) index_sp = \&#39;1\&#39; html_strip = &#39;1&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>
<!-- request C# -->

<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price float) index_sp = \&#39;1\&#39; html_strip = &#39;1&#39;&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">index_sp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1</span>
<span class="w">  </span><span class="na">html_strip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>

<h3 id="index_zones">index_zones</h3>
<!-- example index_zones -->

<div class="codehilite"><pre><span></span><code><span class="na">index_zones</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">h*, th, title</span>
</code></pre></div>

<p>A list of HTML/XML zones within a field to be indexed. The default is an empty string (no zones will be indexed).</p>
<p>A "zone" is defined as everything between an opening and a matching closing tag, and all spans sharing the same tag name are referred to as a "zone." For example, everything between <code>&lt;H1&gt;</code> and <code>&lt;/H1&gt;</code> in a document field belongs to the H1 zone.</p>
<p>The <code>index_zones</code> directive enables zone indexing, but the HTML <a href="../../06-creating_a_table.html#html_strip">stripper</a> must also be enabled (by setting <code>html_strip = 1</code>). The value of <code>index_zones</code> should be a comma-separated list of tag names and wildcards (ending with a star) to be indexed as zones.</p>
<p>Zones can be nested and overlap, as long as every opening tag has a matching tag. Zones can also be used for matching with the ZONE operator, as described in the <a href="../../13-searching.html#zone-limit-operator">extended_query_syntax</a>.</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
SQL
</div>

<!-- request SQL -->


<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products</span><span class="p">(</span><span class="n">title</span><span class="w"> </span><span class="nb">text</span><span class="p">,</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="nb">float</span><span class="p">)</span><span class="w"> </span><span class="n">index_zones</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;h, th, title&#39;</span><span class="w"> </span><span class="n">html_strip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;1&#39;</span>
</code></pre></div>



<!-- request JSON -->


<div class="codehilite"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/cli</span><span class="w"> </span><span class="mi">-</span><span class="err">d</span><span class="w"> </span><span class="s2">&quot;</span>
<span class="s2">CREATE TABLE products(title text, price float) index_zones = &#39;h, th, title&#39; html_strip = &#39;1&#39;&quot;</span>
</code></pre></div>



<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;setName(&#39;products&#39;);</span>
<span class="x">$index-&gt;create([</span>
<span class="x">            &#39;title&#39;=&gt;[&#39;type&#39;=&gt;&#39;text&#39;],</span>
<span class="x">            &#39;price&#39;=&gt;[&#39;type&#39;=&gt;&#39;float&#39;]</span>
<span class="x">        ],[</span>
<span class="x">            &#39;index_zones&#39; =&gt; &#39;h*,th,title&#39;,</span>
<span class="x">            &#39;html_strip&#39; =&gt; &#39;1&#39;</span>
<span class="x">        ]);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) index_zones = </span><span class="se">\&#39;</span><span class="s1">h, th, title</span><span class="se">\&#39;</span><span class="s1"> html_strip = </span><span class="se">\&#39;</span><span class="s1">1</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE products(title text, price float) index_zones = \&#39;h, th, title\&#39; html_strip = \&#39;1\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Java
</div>
<!-- request Java -->

<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE products(title text, price float) index_zones = &#39;h, th, title&#39; html_strip = &#39;1&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>
<!-- request C# -->

<div class="codehilite"><pre><span></span><code>utilsApi.Sql(&quot;CREATE TABLE products(title text, price float) index_zones = &#39;h, th, title&#39; html_strip = &#39;1&#39;&quot;);
</code></pre></div>



<!-- request CONFIG -->


<div class="codehilite"><pre><span></span><code><span class="na">table products {</span>
<span class="w">  </span><span class="na">index_zones</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">h*, th, title</span>
<span class="w">  </span><span class="na">html_strip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1</span>

<span class="w">  </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">rt</span>
<span class="w">  </span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">tbl</span>
<span class="w">  </span><span class="na">rt_field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">title</span>
<span class="w">  </span><span class="na">rt_attr_uint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">price</span>
<span class="na">}</span>
</code></pre></div>


<!-- end -->

</div>

</div>
<!-- proofread -->
        
    </section>
    
    <section class="chapter-section" id="toc-06.04-creating_a_distributed_table">
        <a class="chapter-link" href="#toc-06.04-creating_a_distributed_table"> ¶ 6.4</a>

        
        <h1 id="creating-a-distributed-table">Creating a distributed table</h1>
<p>Manticore allows for the creation of <strong>distributed tables</strong>, which act like regular plain or real-time tables, but are actually a collection of child tables used for searching. When a query is sent to a distributed table, it is distributed among all tables in the collection. The server then collects and processes the responses to sort and recalculate values of aggregates, if necessary.</p>
<p>From the client's perspective, it appears as if they are querying a single table.</p>
<p>Distributed tables can be composed of any combination of tables, including:</p>
<ul>
<li>Local storage tables (<a href="../../06-creating_a_table.html#toc-06.02.02-plain_table">plain table</a> and <a href="../../06-creating_a_table.html#toc-06.02.01-realtime_table">Real-Time</a>)</li>
<li><a href="../../06-creating_a_table.html#toc-06.04.02-remote_tables">Remote tables</a></li>
<li>A combination of local and remote tables</li>
<li><a href="../../06-creating_a_table.html#toc-06.02.04-percolate_table">Percolate tables</a> (local, remote, or a combination)</li>
<li>Single local and multiple remote tables, or any other combination</li>
</ul>
<p>Mixing percolate and template tables with plain and real-time tables is not recommended.</p>
<p>A distributed table is defined as type 'distributed' in the configuration file or through the SQL clause <code>CREATE TABLE</code></p>
<h4 id="in-a-configuration-file">In a configuration file</h4>
<div class="codehilite"><pre><span></span><code><span class="na">table foo {</span>
<span class="w">    </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">distributed</span>
<span class="w">    </span><span class="na">local</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">bar</span>
<span class="w">    </span><span class="na">local</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">bar1, bar2</span>
<span class="w">    </span><span class="na">agent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">127.0.0.1:9312:baz</span>
<span class="w">    </span><span class="na">agent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">host1|host2:tbl</span>
<span class="w">    </span><span class="na">agent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">host1:9301:tbl1|host2:tbl2 [ha_strategy=random retry_count=10]</span>
<span class="w">    </span><span class="na">...</span>
<span class="na">}</span>
</code></pre></div>

<h4 id="via-sql">Via SQL</h4>
<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">distributed_index</span><span class="w"> </span><span class="k">type</span><span class="o">=</span><span class="s1">&#39;distributed&#39;</span><span class="w"> </span><span class="k">local</span><span class="o">=</span><span class="s1">&#39;local_index&#39;</span><span class="w"> </span><span class="n">agent</span><span class="o">=</span><span class="s1">&#39;127.0.0.1:9312:remote_index&#39;</span>
</code></pre></div>

<h4 id="children">Children</h4>
<p>The essence of a distributed table lies in its list of child tables, to which it points. There are two types of child tables in a distributed table:</p>
<ol>
<li>
<p><a href="../../06-creating_a_table.html#creating-a-local-distributed-table">Local tables</a>: These are tables that are served within the same server as the distributed table. To enumerate local tables, you use the syntax <code>local =</code>. You can list several local tables using multiple <code>local =</code> lines, or combine them into one list separated by commas.</p>
</li>
<li>
<p><a href="../../06-creating_a_table.html#agent">Remote tables</a>: These are tables that are served anywhere outside the server. To enumerate remote tables, you use the syntax <code>agent =</code>. Each line represents one endpoint or agent. Each agent can have multiple external locations and options for how it should work. More details <a href="../../06-creating_a_table.html#agent">here</a>. It is important to note that the server does not have any information about the type of table it is working with. This may lead to errors if, for example, you issue a <code>CALL PQ</code> to a remote table 'foo' that is not a percolate table.</p>
</li>
</ol>
<!-- proofread -->
        
    </section>
    
    <section class="chapter-section" id="toc-06.04.01-creating_a_local_distributed_table">
        <a class="chapter-link" href="#toc-06.04.01-creating_a_local_distributed_table"> ¶ 6.4.1</a>

        
        <h1 id="creating-a-local-distributed-table">Creating a local distributed table</h1>
<!-- example local_dist -->

<p>A distributed table in Manticore Search acts as a "master node" that proxies the demanded query to other tables and provides merged results from the responses it receives. The table doesn't hold any data on its own. It can connect to both local tables and tables located on other servers. Here's an example of a simple distributed table:</p>
<!-- intro -->

<div class='xcodeblock'>

<div class='xcodeblock-item'>

<div class='item-select'>
Configuration file
</div>

<!-- request Configuration file -->

<div class="codehilite"><pre><span></span><code><span class="na">table index_dist {</span>
<span class="w">  </span><span class="na">type</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s">distributed</span>
<span class="w">  </span><span class="na">local</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">index1</span>
<span class="w">  </span><span class="na">local</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">index2</span>
<span class="w">  </span><span class="na">...</span>
<span class="w"> </span><span class="na">}</span>
</code></pre></div>



<!-- request RT mode -->

<div class="codehilite"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">local_dist</span><span class="w"> </span><span class="k">type</span><span class="o">=</span><span class="s1">&#39;distributed&#39;</span><span class="w"> </span><span class="k">local</span><span class="o">=</span><span class="s1">&#39;index1&#39;</span><span class="w"> </span><span class="k">local</span><span class="o">=</span><span class="s1">&#39;index2&#39;</span><span class="p">;</span>
</code></pre></div>




<!-- request PHP -->


<div class="codehilite"><pre><span></span><code><span class="x">$params = [</span>
<span class="x">    &#39;body&#39; =&gt; [</span>
<span class="x">        &#39;settings&#39; =&gt; [</span>
<span class="x">            &#39;type&#39; =&gt; &#39;distributed&#39;,</span>
<span class="x">            &#39;local&#39; =&gt; [</span>
<span class="x">                &#39;index1&#39;,</span>
<span class="x">                &#39;index2&#39;</span>
<span class="x">            ]</span>
<span class="x">        ]</span>
<span class="x">    ],</span>
<span class="x">    &#39;index&#39; =&gt; &#39;products&#39;</span>
<span class="x">];</span>
<span class="x">$index = new \Manticoresearch\Index($client);</span>
<span class="x">$index-&gt;create($params);</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Python
</div>

<!-- request Python -->


<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="o">.</span><span class="n">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE local_dist type=</span><span class="se">\&#39;</span><span class="s1">distributed</span><span class="se">\&#39;</span><span class="s1"> local=</span><span class="se">\&#39;</span><span class="s1">index1</span><span class="se">\&#39;</span><span class="s1"> local=</span><span class="se">\&#39;</span><span class="s1">index2</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</code></pre></div>


<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Javascript
</div>

<!-- request javascript -->


<div class="codehilite"><pre><span></span><code><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">sql</span><span class="p">(</span><span class="s1">&#39;CREATE TABLE local_dist type=\&#39;distributed\&#39; local=\&#39;index1\&#39; local=\&#39;index2\&#39;&#39;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
Java
</div>
<!-- request Java -->

<div class="codehilite"><pre><span></span><code><span class="n">utilsApi</span><span class="p">.</span><span class="na">sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE local_dist type=&#39;distributed&#39; local=&#39;index1&#39; local=&#39;index2&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- intro -->

</div>

<div class='xcodeblock-item'>

<div class='item-select'>
C
</div>
<!-- request C# -->

<div class="codehilite"><pre><span></span><code><span class="nx">utilsApi</span><span class="p">.</span><span class="nx">Sql</span><span class="p">(</span><span class="s">&quot;CREATE TABLE local_dist type=&#39;distributed&#39; local=&#39;index1&#39; local=&#39;index2&#39;&quot;</span><span class="p">);</span>
</code></pre></div>



<!-- end -->

</div>

</div>
<!-- proofread -->
        
    </section>
    
    <section class="chapter-section" id="toc-06.04.02-remote_tables">
        <a class="chapter-link" href="#toc-06.04.02-remote_tables"> ¶ 6.4.2</a>

        
        <h1 id="remote-tables">Remote tables</h1>
<p>A remote table in Manticore Search is represented by the <a href="../../06-creating_a_table.html#toc-06.04-creating_a_distributed_table">agent</a> prefix in the definition of a distributed table. A distributed table can include a combination of local and remote tables. If there are no local tables provided, the distributed table will be purely remote and serve as a proxy only. For example, you might have a Manticore instance that listens on multiple ports and serves different protocols, and then redirects queries to backend servers that only accept connections via Manticore's internal binary protocol, using persistent connections to reduce the overhead of establishing connections.<br />
Even though a purely remote distributed table doesn't serve local tables itself, it still consumes machine resources, as it still needs to perform final calculations, such as merging results and calculating final aggregated values.</p>
<h2 id="agent">agent</h2>
<div class="codehilite"><pre><span></span><code><span class="na">agent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">address1 [ | address2 [...] ][:table-list]</span>
<span class="na">agent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">address1[:table-list [ | address2[:table-list [...] ] ] ]</span>
</code></pre></div>

<p><code>agent</code> directive declares the remote agents that are searched each time the enclosing distributed table is searched. These agents are essentially pointers to networked tables. The value specified includes the address and can also include multiple alternatives (agent mirrors) for either the address only or the address and table list.</p>
<p>The address specification must be one of the following:</p>
<div class="codehilite"><pre><span></span><code><span class="na">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">hostname[:port]</span><span class="w"> </span><span class="c1"># eg. server2:9312</span>
<span class="na">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">/absolute/unix/socket/path</span><span class="w"> </span><span class="c1"># eg. /var/run/manticore2.sock</span>
</code></pre></div>

<p>The <code>hostname</code> is the remote host name, <code>port</code> is the remote TCP port number, <code>table-list</code> is a comma-separated list of table names, and square brackets [] indicate an optional clause.</p>
<p>If the table name is omitted, it is assumed to be the same table as the one where this line is defined. In other words, when defining agents for the 'mycoolindex' distributed table, you can simply point to the address, and it will be assumed that you are querying the mycoolindex table on the agent's endpoints.</p>
<p>If the port number is omitted, it is assumed to be <strong>9312</strong>. If it is defined but invalid (e.g. 70000), the agent will be skipped.</p>
<p>You can point each agent to one or more remote tables residing on one or more networked servers with no restrictions. This enables several different usage modes:</p>
<ul>
<li>Sharding over multiple agent servers and creating an arbitrary cluster topology</li>
<li>Sharding over multiple agent servers mirrored for high availability and load balancing purposes</li>
<li>Sharding within localhost to utilize multiple cores (however, it is simpler just to use multiple local tables)</li>
</ul>
<p>All agents are searched in parallel. The index list is passed verbatim to the remote agent. The exact way that list is searched within the agent (i.e. sequentially or in parallel) depends solely on the agent's configuration (see the <a href="../../20-server_settings.html#threads">threads</a> setting). The master has no remote control over this.</p>
<p>It is important to note that the <code>LIMIT</code>, option is ignored in agent queries. This is because each agent can contain different tables, so it is the responsibility of the client to apply the limit to the final result set. This is why the query to a physical table is different from the query to a distributed table when viewed in the query logs. The query cannot be a simple copy of the original query, as this would not produce the correct results.</p>
<p>For example, if a client makes a query SELECT ... LIMIT 10, 10, and there are two agents, with the second agent having only 10 documents, broadcasting the original <code>LIMIT 10, 10</code> query would result in receiving 0 documents from the second agent. However, <code>LIMIT 10,10</code> should return documents 10-20 from the resulting set. To resolve this, the query must be sent to the agents with a broader limit, such as the default max_matches value of 1000.</p>
<p>For instance, if there is a distributed table dist that refers to the remote table user, a client query <code>SELECT * FROM dist LIMIT 10,10</code> would be converted to <code>SELECT * FROM user LIMIT 0,1000</code> and sent to the remote table user. Once the distributed table receives the result, it will apply the LIMIT 10,10 and return the requested 10 documents.</p>
<div class="codehilite"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">dist</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">;</span>
</code></pre></div>

<p>the query will be converted to:</p>
<div class="codehilite"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="k">user</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="mi">1000</span>
</code></pre></div>

<p>Additionally, the value can specify options for each individual agent, such as:</p>
<ul>
<li><a href="../../10-creating_a_cluster.html#ha_strategy">ha_strategy</a> - <code>random</code>, <code>roundrobin</code>, <code>nodeads</code>, <code>noerrors</code> (overrides the global <code>ha_strategy</code> setting for the particular agent)</li>
<li><code>conn</code> - <code>pconn</code>, persistent (equivalent to setting <code>agent_persistent</code> at the table level)</li>
<li><code>blackhole</code> <code>0</code>,<code>1</code> (identical to the <a href="../../06-creating_a_table.html#agent_blackhole">agent_blackhole</a> setting for the agent)</li>
<li><code>retry_count</code> an integer value (corresponding to <a href="../../06-creating_a_table.html#agent_retry_count">agent_retry_count</a> , but the provided value will not be multiplied by the number of mirrors)</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="na">agent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">address1:table-list[[ha_strategy=value, conn=value, blackhole=value]]</span>
</code></pre></div>

<p>Example:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># config on box1</span>
<span class="c1"># sharding a table over 3 servers</span>
<span class="na">agent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">box2:9312:shard1</span>
<span class="na">agent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">box3:9312:shard2</span>

<span class="c1"># config on box2</span>
<span class="c1"># sharding a table over 3 servers</span>
<span class="na">agent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">box1:9312:shard2</span>
<span class="na">agent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">box3:9312:shard3</span>

<span class="c1"># config on box3</span>
<span class="c1"># sharding a table over 3 servers</span>
<span class="na">agent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">box1:9312:shard1</span>
<span class="na">agent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">box2:9312:shard3</span>

<span class="c1"># per agent options</span>
<span class="na">agent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">box1:9312:shard1[ha_strategy=nodeads]</span>
<span class="na">agent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">box2:9312:shard2[conn=pconn]</span>
<span class="na">agent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">box2:9312:shard2[conn=pconn,ha_strategy=nodeads]</span>
<span class="na">agent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">test:9312:any[blackhole=1]</span>
<span class="na">agent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">test:9312|box2:9312|box3:9312:any2[retry_count=2]</span>
<span class="na">agent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">test:9312|box2:9312:any2[retry_count=2,conn=pconn,ha_strategy=noerrors]</span>
</code></pre></div>

<p>For optimal performance, it's recommended to place remote tables that reside on the same server within the same record. For instance, instead of:</p>
<div class="codehilite"><pre><span></span><code><span class="na">agent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">remote:9312:idx1</span>
<span class="na">agent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">remote:9312:idx2</span>
</code></pre></div>

<p>you should prefer:</p>
<div class="codehilite"><pre><span></span><code><span class="na">agent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">remote:9312:idx1,idx2</span>
</code></pre></div>

<h2 id="agent_persistent">agent_persistent</h2>
<div class="codehilite"><pre><span></span><code><span class="na">agent_persistent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">remotebox:9312:index2</span>
</code></pre></div>

<p>The <code>agent_persistent</code> option allows you to persistently connect to an agent, meaning the connection will not be dropped after a query is executed. The syntax for this directive is the same as the <code>agent</code> directive. However, instead of opening a new connection to the agent for each query and then closing it, the master will keep a connection open and reuse it for subsequent queries. The maximum number of persistent connections per agent host is defined by the <a href="../../20-server_settings.html#persistent_connections_limit">persistent_connections_limit</a> option in the searchd section.</p>
<p>It's important to note that the <a href="../../20-server_settings.html#persistent_connections_limit">persistent_connections_limit</a> must be set to a value greater than 0 in order to use persistent agent connections. If it's not defined, it defaults to 0, and the <code>agent_persistent</code> directive will act the same as the <code>agent</code>directive.</p>
<p>Using persistent master-agent connections reduces TCP port pressure and saves time on connection handshakes, making it more efficient.</p>
<h2 id="agent_blackhole">agent_blackhole</h2>
<div class="codehilite"><pre><span></span><code><span class="na">agent_blackhole</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">testbox:9312:testindex1,testindex2</span>
<span class="na">````</span>

<span class="na">The `agent_blackhole` directive allows you to forward queries to remote agents without waiting for or processing their responses. This is useful for debugging or testing production clusters, as you can set up a separate debugging/testing instance and forward requests to it from the production master (aggregator) instance, without interfering with production work. The master searchd will attempt to connect to the blackhole agent and send queries as normal, but will not wait for or process any responses, and all network errors on the blackhole agents will be ignored. The format of the value is identical to that of the regular `agent` directive.</span>

<span class="c1">## agent_connect_timeout</span>

<span class="na">```ini</span>
<span class="na">agent_connect_timeout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">300</span>
<span class="na">````</span>

<span class="na">The `agent_connect_timeout` directive defines the timeout for connecting to remote agents. By default, the value is assumed to be in milliseconds, but can have [another suffix](../../20-server_settings.html#toc-20.03-special_suffixes)). The default value is 1000 (1 second).</span>

<span class="na">When connecting to remote agents, `searchd` will wait for this amount of time at most to complete the connection successfully. If the timeout is reached but the connection has not been established, and `retries` are enabled, a retry will be initiated.</span>

<span class="c1">## agent_query_timeout</span>

<span class="na">```ini</span>
<span class="na">agent_query_timeout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">10000</span><span class="w"> </span><span class="c1"># our query can be long, allow up to 10 sec</span>
</code></pre></div>

<p>The <code>agent_query_timeout</code> sets the amount of time that searchd will wait for a remote agent to complete a query. The default value is 3000 milliseconds (3 seconds), but can be <code>suffixed</code> to indicate a different unit of time.</p>
<p>After establishing a connection, <code>searchd</code> will wait for a maximum of agent_query_timeout for remote queries to complete. Note that this timeout is separate from the <code>agent_connection_timeout</code> and the total possible delay caused by a remote agent will be the sum of both values. If the agent_query_timeout is reached, the query will <strong>not</strong> be retried, instead, a warning will be produced.</p>
<p>Note that behavior is also affected by <a href="../../20-server_settings.html#reset_network_timeout_on_packet">reset_network_timeout_on_packet</a></p>
<h2 id="agent_retry_count">agent_retry_count</h2>
<p>The <code>agent_retry_count</code> is an integer that specifies how many times Manticore will attempt to connect and query remote agents in a distributed table before reporting a fatal query error. It works similarly to <code>agent_retry_count</code> defined in the "searchd" section of the configuration file but applies specifically to the table.</p>
<h2 id="mirror_retry_count">mirror_retry_count</h2>
<p><code>mirror_retry_count</code> serves the same purpose as <code>agent_retry_count</code>.  If both values are provided, <code>mirror_retry_count</code> will take precedence, and a warning will be raised.</p>
<h2 id="instance-wide-options">Instance-wide options</h2>
<p>The following options manage the overall behavior of remote agents and are specified in <strong>the searchd section of the configuration file</strong>. They set default values for the entire Manticore instance.</p>
<ul>
<li><code>agent_connect_timeout</code> - default value for the <code>agent_connect_timeout</code> parameter.</li>
<li><code>agent_query_timeout</code> - default value for the <code>agent_query_timeout</code> parameter. This can also be overridden on a per-query basis using the same setting name in a distributed (network) table.</li>
<li><code>agent_retry_count</code> is an integer that specifies the number of times Manticore will attempt to connect and query remote agents in a distributed table before reporting a fatal query error. The default value is 0 (i.e. no retries). This value can also be specified on a per-query basis using the 'OPTION retry_count=XXX' clause. If a per-query option is provided, it will take precedence over the value specified in the config.</li>
</ul>
<p>Note, that if you use <strong>agent mirrors</strong> in the definition of your distributed table, the server will select a different mirror before each connection attempt according to the specified <a href="../../10-creating_a_cluster.html#ha_strategy">ha_strategy</a> specified. In this case the <a href="../../06-creating_a_table.html#agent_retry_count">agent_retry_count</a> will be aggregated for all mirrors in the set.</p>
<p>For example, if you have 10 mirrors and set <code>agent_retry_count=5</code>, he server will attempt up to 50 retries (assuming an average of 5 tries per every 10 mirrors). In case of the option <code>ha_strategy = roundrobin</code>, it will actually be exactly 5 tries per mirror.</p>
<p>At the same time, the value provided as the <a href="../../13-searching.html#retry_count">retry_count</a> option in the <code>agent</code> definition serves as an absolute limit. In other words, the <code>[retry_count=2]</code> option in the agent definition means there will be a maximum of 2 tries, regardless of whether there is 1 or 10 mirrors in the line.</p>
<h3 id="agent_retry_delay">agent_retry_delay</h3>
<p>The <code>agent_retry_delay</code> is an integer value that determines the amount of time, in milliseconds, that Manticore Search will wait before retrying to query a remote agent in case of a failure. This value can be specified either globally in the searchd configuration or on a per-query basis using the <code>OPTION retry_delay=XXX</code> clause. If both options are provided, the per-query option will take precedence over the global one. The default value is 500 milliseconds (0.5 seconds). This option is only relevant if agent_retry_count or the per-query <code>OPTION retry_count</code> are non-zero.</p>
<h3 id="client_timeout">client_timeout</h3>
<p>The <code>client_timeout</code> option sets the maximum waiting time between requests when using persistent connections. This value is expressed in seconds or with a time suffix. The default value is 5 minutes.</p>
<p>Example:</p>
<div class="codehilite"><pre><span></span><code><span class="na">client_timeout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">1h</span>
</code></pre></div>

<h3 id="hostname_lookup">hostname_lookup</h3>
<p>The <code>hostname_lookup</code> option defines the strategy for renewing hostnames. By default, the IP addresses of agent host names are cached at server start to avoid excessive access to DNS. However, in some cases, the IP can change dynamically (e.g. cloud hosting) and it may be desirable to not cache the IPs. Setting this option to <code>request</code> disables the caching and queries the DNS for each query. The IP addresses can also be manually renewed using the <code>FLUSH HOSTNAMES</code> command.</p>
<h3 id="listen_tfo">listen_tfo</h3>
<p>The <code>listen_tfo</code> option allows for the use of the TCP_FASTOPEN flag for all listeners. By default, it is managed by the system, but it can be explicitly turned off by setting it to '0'.</p>
<p>For more information about the TCP Fast Open extension, please refer to <a href="https://en.wikipedia.org/wiki/TCP_Fast_Open">Wikipedia</a>.  In short, it allows to eliminate one TCP round-trip when establishing a connection.</p>
<p>In practice, using TFO can optimize the client-agent network efficiency, similar to when <code>agent_persistent</code>  is in use, but without holding active connections and without limitations on the maximum number of connections.</p>
<p>Most modern operating systems support TFO. Linux (as one of the most progressive) has supported it since 2011, with kernels starting from 3.7 (for the server side). Windows has supported it since some builds of Windows 10. Other systems, such as FreeBSD and MacOS, are also in the game.</p>
<p>For Linux systems, the server checks the variable <code>/proc/sys/net/ipv4/tcp_fastopen</code> and behaves accordingly. Bit 0 manages the client side, while bit 1 rules the listeners. By default, the system has this parameter set to 1, i.e., clients are enabled and listeners are disabled.</p>
<h3 id="persistent_connections_limit">persistent_connections_limit</h3>
<div class="codehilite"><pre><span></span><code><span class="na">persistent_connections_limit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">29</span><span class="w"> </span><span class="c1"># assume that each host of agents has max_connections = 30 (or 29).</span>
</code></pre></div>

<p>The <code>persistent_connections_limit</code> option defines the maximum number of simultaneous persistent connections to remote persistent agents. This is an instance-wide setting and must be defined in the searchd configuration section. Each time a connection to an agent defined under <code>agent_persistent</code> is made, we attempt to reuse an existing connection (if one exists) or create a new connection and save it for future use. However, in some cases it may be necessary to limit the number of persistent connections. This directive defines the limit and affects the number of connections to each agent's host across all distributed tables.</p>
<p>It is recommended to set this value equal to or less than the <a href="../../20-server_settings.html#max_connections">max_connections</a> option in the agent's configuration.</p>
<h2 id="distributed-snippets-creation">Distributed snippets creation</h2>
<p>A special case of a distributed table is a single local and multiple remotes, which is used exclusively for  <a href="../../06-creating_a_table.html#distributed-snippets-creation">distributed snippets creation</a>, when snippets are sourced from files. In this case, the local table may act as a "template" table, providing settings for tokenization when building snippets.</p>
<h3 id="snippets_file_prefix">snippets_file_prefix</h3>
<div class="codehilite"><pre><span></span><code><span class="na">snippets_file_prefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">/mnt/common/server1/</span>
</code></pre></div>

<p>The <code>snippets_file_prefix</code> is an optional prefix that can be added to the local file names when generating snippets. The default value is the current working folder.</p>
<p>To learn more about distributed snippets creation, see  <a href="../../13-searching.html#toc-13.07-highlighting">CALL SNIPPETS</a>.</p>
<h2 id="distributed-percolate-tables-dpq-tables">Distributed percolate tables (DPQ tables)</h2>
<p>You can create a distributed table from multiple <a href="../../06-creating_a_table.html#toc-06.02.04-percolate_table">percolate</a> tables. The syntax for constructing this type of table is the same as for other distributed tables, and can include multiple<code>local</code> tables as well as <code>agents</code>.</p>
<p>For DPQ, the operations of listing stored queries and searching through them (using <a href="../../13-searching.html#performing-a-percolate-query-with-call-pq">CALL PQ</a>) are transparent and work as if all the tables were one single local table. However, data manipulation statements such as <code>insert</code>, <code>replace</code>, <code>truncate</code> are not available.</p>
<p>If you include a non-percolate table in the list of agents, the behavior will be undefined. If the incorrect agent has the same schema as the outer schema of the PQ table (id, query, tags, filters), it will not trigger an error when listing stored PQ rules, and may pollute the list of actual PQ rules stored in PQ tables with its own non-PQ strings. As a result, be cautious and aware of the confusion that this may cause. A<code>CALL PQ</code> to such an incorrect agent will trigger an error.</p>
<p>For more information on making queries to a distributed percolate table, see <a href="../../13-searching.html#performing-a-percolate-query-with-call-pq">making queries to a distribute percolate table</a>.</p>
<!-- proofread -->
        
    </section>
    

    <script>
        const hide = (el) => el.style.display = 'none';
        const show = (el) => el.style.display = '';

        function gen(html) {
            const template = document.createElement('template');
            template.innerHTML = html.trim();
            return template.content;
        }

        function processCodeBlock(block) {
            block.append(gen(`<div class="selectors"></div><div class="codes"></div>`));

            let selectors = block.querySelector(".selectors");
            let codes = block.querySelector(".codes");

            function hideAllCodes() {
                for (let i = 0; i < codes.children.length; i++) {
                    hide(codes.children[i]);
                }
            }

            function clearSelection() {
                for (let i = 0; i < selectors.children.length; i++) {
                    selectors.children[i].classList.remove('selected');
                }
            }

            let items = block.querySelectorAll('.xcodeblock-item');
            for (let i = 0; i < items.length; i++) {
                let lang = items[i];

                lang.remove();

                let sel = lang.querySelector('.item-select');
                let code = lang.querySelector('.codehilite');

                if (!sel || !code){
                    continue
                }

                sel.remove();
                code.remove();

                selectors.append(sel);
                codes.append(code);

                if (i == 0) {
                    sel.classList.add('selected');
                } else {
                    hide(code);
                } 

                sel.addEventListener('click', () => {
                    hideAllCodes();
                    clearSelection();
                    show(code);
                    sel.classList.add('selected');
                });
            }
        }

        let codeBlocks = document.querySelectorAll('.xcodeblock');
        for (let i = 0; i < codeBlocks.length; i++) {
            processCodeBlock(codeBlocks[i]);
        }
    </script>
</body>